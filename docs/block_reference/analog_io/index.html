<!doctype html><html lang=en><head><title>Analog I/O Blocks - MPLAB Device Blocks for Simulink</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block_reference/analog_io/index.html><link rel=icon type=image/x-icon href=../../favicon.ico><style>html,html[data-theme=dark],body{color-scheme:light only!important;background-color:#fff!important;color:#222!important}:root{--bg-primary:#f8f9fa;--bg-secondary:white;--bg-tertiary:#f8f9fa;--text-primary:#2c3e50;--text-secondary:#666;--text-tertiary:#6c757d;--text-heading:#1a1a1a;--border-color:#dee2e6;--border-light:#e1e8ed;--border-medium:#e9ecef;--accent-primary:#1C355E;--accent-secondary:#41B6E6;--accent-hover:#2a5a8f;--accent-light:#D1DDE6;--code-bg:#f4f4f4;--code-text:#c7254e;--pre-bg:linear-gradient(to bottom, #e8e8e8 0%, #f0f0f0 100%);--pre-border:#d0d0d0;--table-hover:#E5F3FF;--table-stripe:#f8f9fa;--note-bg:linear-gradient(to right, #e7f3fe 0%, #f5fbff 100%);--note-border:#2196F3;--note-text:#1976D2;--warning-bg:linear-gradient(to right, #fff9e6 0%, #fffcf0 100%);--warning-border:#ff9800;--warning-text:#f57c00;--shadow-sm:0 2px 4px rgba(0,0,0,0.05);--shadow-md:0 2px 8px rgba(0,0,0,0.08);--shadow-lg:0 2px 12px rgba(0,0,0,0.08)}[data-theme=dark]{--bg-primary:#1a1d23;--bg-secondary:#242831;--bg-tertiary:#2d3139;--text-primary:#e4e6eb;--text-secondary:#adb5bd;--text-tertiary:#8b95a1;--text-heading:#e4e6eb;--border-color:#3a3f4b;--border-light:#3a3f4b;--border-medium:#404654;--accent-primary:#41B6E6;--accent-secondary:#5AC8FA;--accent-hover:#6DD5FF;--accent-light:#1a2d3f;--code-bg:#2d3139;--code-text:#ff6b9d;--pre-bg:linear-gradient(to bottom, #2d3139 0%, #2d3139 100%);--pre-border:#3a3f4b;--table-hover:#1e3a52;--table-stripe:#2d3139;--note-bg:linear-gradient(to right, #1e3a52 0%, #1e3a52 100%);--note-border:#4da6d6;--note-text:#66b3e0;--warning-bg:linear-gradient(to right, #3d3520 0%, #3d3520 100%);--warning-border:#ffb347;--warning-text:#ffc870;--shadow-sm:0 2px 4px rgba(0,0,0,0.3);--shadow-md:0 2px 8px rgba(0,0,0,0.4);--shadow-lg:0 2px 12px rgba(0,0,0,0.5)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:8px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:8px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:40px;max-width:200px;object-fit:contain}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-secondary);margin-bottom:16px;padding:10px 14px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover)}.breadcrumbs span{margin:0 8px;color:var(--text-tertiary)}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:initial;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}li mjx-container[display=true]{text-align:left!important;margin:8px 0!important}li p mjx-container[display=true]{text-align:left!important;margin:8px 0!important}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:flex;align-items:center;gap:15px;margin:20px auto;padding:15px;max-width:900px;background-color:#f8f9fa;border-radius:8px;border:1px solid #dee2e6;transition:all .2s ease-in-out}.block-card-link{display:flex;align-items:center;gap:15px;flex:1;text-decoration:none;color:inherit}.block-icon-container:has(.block-card-link):hover{background-color:#e9ecef;border-color:#0076a8;box-shadow:0 2px 8px rgba(0,118,168,.15);cursor:pointer}.block-icon-image{flex-shrink:0;width:150px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.block-icon-image picture{width:100%;max-width:150px;display:flex;align-items:center;justify-content:center}.block-icon-image img,.block-icon-image source{max-width:100%;max-height:100%;width:auto;height:auto;display:block;object-fit:contain}.block-icon-description{flex:1;font-size:16px;line-height:1.6;color:#333;column-count:1;max-width:100%}.family-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px;justify-content:center;width:100%}.family-tag{display:inline-block;padding:3px 8px;font-size:11px;font-weight:600;background-color:#2196f3;color:#fff;border-radius:4px;white-space:nowrap}.family-detail{font-weight:400;opacity:.9;font-size:10px;margin-left:3px}.chip-family-badges{display:flex;flex-direction:column;gap:6px;padding:12px;background-color:#e3f2fd;border:2px solid #2196f3;border-radius:6px;min-width:140px;flex-shrink:0}.chip-family-badges::before{content:"Device Support";font-size:11px;font-weight:700;color:#1565c0;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;text-align:center}.chip-badge{display:block;padding:6px 10px;font-size:12px;font-weight:600;border-radius:4px;white-space:nowrap;text-align:center;transition:all .15s ease-in-out}.chip-badge:hover{transform:scale(1.05);box-shadow:0 2px 4px rgba(0,0,0,.2)}.chip-badge.dspic30f{background-color:#e3f2fd;color:#1565c0;border:1px solid #90caf9}.chip-badge.dspic33f{background-color:#e8f5e9;color:#2e7d32;border:1px solid #81c784}.chip-badge.dspic33e{background-color:#fff3e0;color:#e65100;border:1px solid #ffb74d}.chip-badge.dspic33c{background-color:#f3e5f5;color:#6a1b9a;border:1px solid #ba68c8}.chip-badge.dspic33a{background-color:#fce4ec;color:#c2185b;border:1px solid #f06292}.chip-badge.pic32{background-color:#e0f7fa;color:#00695c;border:1px solid #4db6ac}.chip-badge.sam{background-color:#fff9c4;color:#f57f17;border:1px solid #fdd835}.chip-badge.all-families{background-color:#e0e0e0;color:#424242;border:1px solid #9e9e9e;font-weight:700}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"Analog I\/O Blocks","description":"MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block_reference\/analog_io\/index.html","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-17","dateModified":"2025-10-17","inLanguage":"en-US"}</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><h2 class=sidebar-title>MPLAB Blockset</h2></div><div class=sidebar-nav><div class=nav-section><a href=../../index.html class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>🏠</span>Home</span></a></div><div class=nav-section id=section-getting-started><a href=../../getting_started/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("getting-started"),!0'><span><span class=icon>🚀</span>Getting Started</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("getting-started"),!1'>▶</span></a><div class=nav-section-children><a href=../../getting_started/overview.html class=nav-link>Overview</a>
<a href=../../getting_started/installation.html class=nav-link>Installation</a>
<a href=../../getting_started/quick_start.html class=nav-link>Quick Start Guide</a>
<a href=../../getting_started/board_templates.html class=nav-link>Board Templates</a>
<a href=../../getting_started/motor_control_examples.html class=nav-link>Motor Control Examples</a>
<a href=../../getting_started/scheduler_multitasking.html class=nav-link>Scheduler & Multitasking</a>
<a href=../../getting_started/external_mode_pil.html class=nav-link>External Mode & PIL</a>
<a href=../../getting_started/data_visualization.html class=nav-link>Data Visualization</a>
<a href=../../getting_started/supported_devices.html class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-user-guide><a href=../../user_guide/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("user-guide"),!0'><span><span class=icon>📚</span>User Guide</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("user-guide"),!1'>▶</span></a><div class=nav-section-children><a href=../../user_guide/code_generation.html class=nav-link>Code Generation</a>
<a href=../../user_guide/compiler_setup.html class=nav-link>Compiler Setup</a>
<a href=../../user_guide/external_mode.html class=nav-link>External Mode</a>
<a href=../../user_guide/pil_testing.html class=nav-link>PIL Testing</a></div></div><div class=nav-section id=section-block-reference><a href=../../block_reference/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("block-reference"),!0'><span><span class=icon>🧩</span>Block Reference</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("block-reference"),!1'>▶</span></a><div class=nav-section-children><div class=nav-subsection id=section-pwm><a href=../../block_reference/pwm_io/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("pwm"),!0'><span><span class=icon>⚡</span>PWM</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("pwm"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/pwm_io/pwm.html class=nav-block-link>PWM</a>
<a href=../../block_reference/pwm_io/pwm_highspeed.html class=nav-block-link>PWM High-Speed</a>
<a href=../../block_reference/pwm_io/pwm_hs_fep.html class=nav-block-link>PWM HS FEP</a>
<a href=../../block_reference/pwm_io/pwm_highspeed_override.html class=nav-block-link>PWM HS Override</a>
<a href=../../block_reference/pwm_io/mcpwm.html class=nav-block-link>MCPWM (PIC32)</a>
<a href=../../block_reference/pwm_io/pwm_sam7x.html class=nav-block-link>PWM SAM7x</a>
<a href=../../block_reference/pwm_io/pwm_sam7x_override.html class=nav-block-link>PWM SAM7x Override</a>
<a href=../../block_reference/pwm_io/tcc_pwm.html class=nav-block-link>TCC PWM (SAM)</a></div></div><div class=nav-subsection id=section-timers><a href=../../block_reference/timers/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("timers"),!0'><span><span class=icon>⏱️</span>Timers</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("timers"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/timers/timer_config.html class=nav-block-link>Timer Config</a>
<a href=../../block_reference/timers/timer_pil_profiling.html class=nav-block-link>PIL Profiling Timer</a></div></div><div class=nav-subsection id=section-capture-compare><a href=../../block_reference/capture_compare/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("capture-compare"),!0'><span><span class=icon>📏</span>Input Capture / Output Compare</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("capture-compare"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/capture_compare/input_capture.html class=nav-block-link>Input Capture</a>
<a href=../../block_reference/capture_compare/output_compare_hw.html class=nav-block-link>Output Compare (HW)</a>
<a href=../../block_reference/capture_compare/output_compare_sw.html class=nav-block-link>Output Compare (SW)</a></div></div><div class=nav-subsection id=section-adc><a href=../../block_reference/adc/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("adc"),!0'><span><span class=icon>📊</span>ADC</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("adc"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/adc/adc.html class=nav-block-link>ADC (dsPIC)</a>
<a href=../../block_reference/adc/adc_hs_12b.html class=nav-block-link>ADC HS 12-bit</a>
<a href=../../block_reference/adc/adc_highspeed_sar.html class=nav-block-link>ADC High-Speed SAR</a>
<a href=../../block_reference/adc/adc_highspeed_sar_dspic.html class=nav-block-link>ADC HS SAR (dsPIC)</a>
<a href=../../block_reference/adc/adc_same5x.html class=nav-block-link>ADC (SAM E5x)</a>
<a href=../../block_reference/adc/adc_samrh707x.html class=nav-block-link>ADC (SAMRH707x)</a>
<a href=../../block_reference/adc/afec_sam7x.html class=nav-block-link>AFEC (SAM7x)</a></div></div><div class=nav-subsection id=section-communication><a href=../../block_reference/communication/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("communication"),!0'><span><span class=icon>📡</span>Communication</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("communication"),!1'>▶</span></a><div class=nav-section-children><div class=nav-subsection id=section-uart><a href=../../block_reference/communication.html#uart-blocks class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("uart"),!0'><span><span class=icon></span>UART</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("uart"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/communication/uart/uart_config.html class=nav-block-link>UART Config</a>
<a href=../../block_reference/communication/uart/uart_tx.html class=nav-block-link>UART Tx</a>
<a href=../../block_reference/communication/uart/uart_rx.html class=nav-block-link>UART Rx</a>
<a href=../../block_reference/communication/uart/uart_txmatlab.html class=nav-block-link>UART Tx MATLAB</a>
<a href=../../block_reference/communication/uart/uart_break_and_autobaud.html class=nav-block-link>UART Break & Autobaud</a></div></div><div class=nav-subsection id=section-can><a href=../../block_reference/communication.html#can-blocks class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("can"),!0'><span><span class=icon></span>CAN</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("can"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/communication/can/can_config.html class=nav-block-link>CAN Config</a>
<a href=../../block_reference/communication/can/can_tx.html class=nav-block-link>CAN Tx</a>
<a href=../../block_reference/communication/can/can_rx.html class=nav-block-link>CAN Rx</a></div></div><a href=../../block_reference/communication/i2c.html class=nav-block-link>I2C Master/Slave</a>
<a href=../../block_reference/communication/spi.html class=nav-block-link>SPI Master/Slave</a></div></div><div class=nav-subsection id=section-digital-io><a href=../../block_reference/digital_io/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("digital-io"),!0'><span><span class=icon>🔌</span>Digital I/O</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("digital-io"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/digital_io/digital_input.html class=nav-block-link>Digital Input</a>
<a href=../../block_reference/digital_io/digital_output.html class=nav-block-link>Digital Output</a>
<a href=../../block_reference/digital_io/digital_output_read.html class=nav-block-link>Digital Output Read</a>
<a href=../../block_reference/digital_io/digital_output_write.html class=nav-block-link>Digital Output Write</a></div></div><div class=nav-subsection id=section-encoders><a href=../../block_reference/encoders/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("encoders"),!0'><span><span class=icon>🔄</span>Encoders</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("encoders"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/encoders_counters/qei.html class=nav-block-link>QEI (Quadrature Encoder)</a>
<a href=../../block_reference/encoders_counters/pdec.html class=nav-block-link>PDEC (SAM)</a>
<a href=../../block_reference/encoders_counters/qdec_samx.html class=nav-block-link>QDEC (SAM)</a>
<a href=../../block_reference/encoders_counters/change_notification.html class=nav-block-link>Change Notification</a></div></div><div class=nav-subsection id=section-analog-io><a href=../../block_reference/analog_io/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("analog-io"),!0'><span><span class=icon>📉</span>Analog I/O</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("analog-io"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/analog_io/dac_samx.html class=nav-block-link>DAC (SAM)</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html class=nav-block-link>High-Speed Comparator</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=nav-block-link>Comparator w/ Slope</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/op_amp.html class=nav-block-link>Op-Amp</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/pga.html class=nav-block-link>PGA (Programmable Gain Amp)</a></div></div><div class=nav-subsection id=section-system-config><a href=../../block_reference/system_configuration/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("system-config"),!0'><span><span class=icon>⚙️</span>System Config</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("system-config"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/system_configuration/master.html class=nav-block-link>Master</a>
<a href=../../block_reference/system_configuration/interrupt.html class=nav-block-link>Interrupt</a>
<a href=../../block_reference/system_configuration/compiler_options.html class=nav-block-link>Compiler Options</a>
<a href=../../block_reference/system_configuration/scheduler_options.html class=nav-block-link>Scheduler Options</a>
<a href=../../block_reference/system_configuration/idle_task.html class=nav-block-link>Idle Task</a>
<a href=../../block_reference/system_configuration/mcu_load.html class=nav-block-link>MCU Load</a>
<a href=../../block_reference/system_configuration/mcu_overload.html class=nav-block-link>MCU Overload</a>
<a href=../../block_reference/system_configuration/tasks_state.html class=nav-block-link>Tasks State</a>
<a href=../../block_reference/system_configuration/secondary_core.html class=nav-block-link>Secondary Core</a></div></div><div class=nav-subsection id=section-utility><a href=../../block_reference/utility/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("utility"),!0'><span><span class=icon>🔧</span>Utility Blocks</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("utility"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/user_functions/c_function_call.html class=nav-block-link>C Function Call</a>
<a href=../../block_reference/utility/doc.html class=nav-block-link>Documentation Block</a>
<a href=../../block_reference/utility/msi.html class=nav-block-link>MSI (Model Sample Info)</a>
<a href=../../block_reference/utility/port_info.html class=nav-block-link>Port Info</a>
<a href=../../block_reference/utility/timer_info.html class=nav-block-link>Timer Info</a>
<a href=../../block_reference/utility/simulink_reset_config.html class=nav-block-link>Simulink Reset Config</a></div></div></div></div><div class=nav-section id=section-examples><a href=../../examples/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("examples"),!0'><span><span class=icon>📖</span>Examples</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("examples"),!1'>▶</span></a><div class=nav-section-children><a href=../../examples/field_weakening.html class=nav-link>Field Weakening</a></div></div><div class=nav-section id=section-github><a href=https://github.com/microchip-technology/mplab-blocksetindex.html class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>💻</span>GitHub</span></a></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=../../index.html>Home</a>
<span>></span>
<a href=../../block_reference/index.html>Block Reference</a>
<span>></span>
<span>Analog I/O Blocks</span></div><div class=under-construction-banner><span class=icon>⚠️</span>
<strong>Documentation Under Construction</strong> —
This documentation is currently being developed. All information has not been validated by Microchip yet.</div><div class=page-header><h1>Analog I/O Blocks</h1><div class=page-header-right><img src=../../images/microchip-logo.png alt="Microchip Logo" class=microchip-logo>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>☀️</span>
<span id=theme-text>Light</span></button></div></div><h2 id=overview>Overview</h2><p>Analog I/O blocks provide precise voltage generation, signal conditioning, and threshold detection capabilities for motor control, power conversion, and instrumentation applications. The MPLAB Blockset offers DAC outputs for waveform generation, high-speed comparators for fault protection, operational amplifiers for signal conditioning, and programmable gain amplifiers for sensor interfacing.</p><h2 id=available-analog-io-blocks>Available Analog I/O Blocks</h2><h3 id=mchp_dacc_samx---digital-to-analog-converter-for-sam-devices>MCHP_DACC_SAMx - Digital-to-Analog Converter for SAM Devices</h3><div class=block-icon-container><a href=dac_samx.html class=block-card-link><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/DAC_SAMx.svg type=image/svg+xml><source srcset=../../images/blocks/analog/DAC_SAMx_hu_104f8b18ae542768.webp type=image/webp><img src=../../images/blocks/analog/DAC_SAMx.png alt="DAC_SAMx Block Icon"></picture><div class=family-tags><span class=family-tag>SAM</span></div></div><div class=block-icon-description><strong>High-performance DAC for waveform generation</strong> and precision voltage output on SAM ARM microcontrollers. - **Resolution**: 10-bit or 12-bit (device-dependent)</div></a></div><hr><h3 id=mchp_highspeed_analogcomparator---fast-threshold-detection>MCHP_HighSpeed_AnalogComparator - Fast Threshold Detection</h3><div class=block-icon-container><a href=comparator_opamps_volt_ref/highspeed_analogcomparator.html class=block-card-link><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator.svg type=image/svg+xml><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator_hu_9405d758d9dcfaf7.webp type=image/webp><img src=../../images/blocks/analog/HighSpeed_AnalogComparator.png alt="HighSpeed_AnalogComparator Block Icon"></picture><div class=family-tags><span class=family-tag>All Families</span></div></div><div class=block-icon-description><strong>Sub-microsecond comparator</strong> for overcurrent protection and fault detection with PWM integration. - **Response Time**: 100-200 ns (high-speed mode)</div></a></div><hr><h3 id=mchp_highspeed_analogcomparator_wslope---comparator-with-slope-compensation>MCHP_HighSpeed_AnalogComparator_wSlope - Comparator with Slope Compensation</h3><div class=block-icon-container><a href=comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=block-card-link><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator_wSlope.svg type=image/svg+xml><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator_wSlope_hu_91b0e41e62b25853.webp type=image/webp><img src=../../images/blocks/analog/HighSpeed_AnalogComparator_wSlope.png alt="HighSpeed_AnalogComparator_wSlope Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span></div></div><div class=block-icon-description><strong>Advanced comparator with slope compensation</strong> for peak current mode control in switched-mode power supplies. - **Slope Compensation**: Prevents subharmonic oscillation</div></a></div><hr><h3 id=mchp_op_amp---operational-amplifier-configuration>MCHP_OP_AMP - Operational Amplifier Configuration</h3><div class=block-icon-container><a href=comparator_opamps_volt_ref/op_amp.html class=block-card-link><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/OpAmp.svg type=image/svg+xml><source srcset=../../images/blocks/analog/OpAmp_hu_fb5a2d1d77b1826d.webp type=image/webp><img src=../../images/blocks/analog/OpAmp.png alt="OpAmp Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span>
<span class=family-tag>PIC32</span></div></div><div class=block-icon-description><strong>On-chip operational amplifier</strong> for signal conditioning and buffering. - **Gain Configuration**: Unity gain buffer or programmable gain</div></a></div><hr><h3 id=mchp_pga---programmable-gain-amplifier>MCHP_PGA - Programmable Gain Amplifier</h3><div class=block-icon-container><a href=comparator_opamps_volt_ref/pga.html class=block-card-link><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/PGA.svg type=image/svg+xml><source srcset=../../images/blocks/analog/PGA_hu_1a67ae8490f70464.webp type=image/webp><img src=../../images/blocks/analog/PGA.png alt="PGA Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC33C</span>
<span class=family-tag>PIC32</span>
<span class=family-tag>SAM</span></div></div><div class=block-icon-description><strong>Programmable Gain Amplifier</strong> for dynamic signal amplification with software-controlled gain. - **Selectable Gain**: Multiple gain settings (1x, 2x, 4x, 8x, 16x, 32x)</div></a></div><hr><h2 id=block-selection-guide>Block Selection Guide</h2><h3 id=by-application>By Application</h3><table><thead><tr><th>Application</th><th>Recommended Block</th><th>Why?</th></tr></thead><tbody><tr><td><strong>Voltage Reference</strong></td><td><strong>DAC</strong></td><td>Precision DC voltage for biasing or reference</td></tr><tr><td><strong>Waveform Generation</strong></td><td><strong>DAC</strong></td><td>Audio, function generator, test signals</td></tr><tr><td><strong>Overcurrent Protection</strong></td><td><strong>High-Speed Comparator</strong></td><td>Fast fault detection with PWM shutdown</td></tr><tr><td><strong>Peak Current Mode Control</strong></td><td><strong>Comparator with Slope</strong></td><td>SMPS regulation with slope compensation</td></tr><tr><td><strong>Sensor Buffering</strong></td><td><strong>Op-Amp</strong></td><td>Impedance matching and signal conditioning</td></tr><tr><td><strong>Variable Gain Sensing</strong></td><td><strong>PGA</strong></td><td>Dynamic amplification for wide-range sensors</td></tr><tr><td><strong>DC Bus Monitoring</strong></td><td><strong>High-Speed Comparator</strong></td><td>Overvoltage/undervoltage detection</td></tr></tbody></table><h3 id=by-device-family>By Device Family</h3><table><thead><tr><th>Device Family</th><th>DAC</th><th>High-Speed Comparator</th><th>Comparator w/Slope</th><th>Op-Amp</th><th>PGA</th></tr></thead><tbody><tr><td><strong>dsPIC30F</strong></td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>dsPIC33F</strong></td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>dsPIC33E</strong></td><td>❌</td><td>✅ (EP/EV)</td><td>✅ (EP/EV)</td><td>⚠️ (selected)</td><td>❌</td></tr><tr><td><strong>dsPIC33C</strong></td><td>❌</td><td>✅ (CH/CK)</td><td>✅ (CH/CK)</td><td>✅</td><td>✅</td></tr><tr><td><strong>PIC32MK</strong></td><td>❌</td><td>❌</td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td><strong>SAM E5x/E7x/C2x</strong></td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>⚠️ (selected)</td></tr></tbody></table><p><strong>Legend:</strong> ✅ Full Support | ⚠️ Selected Devices | ❌ Not Available</p><hr><h2 id=analog-signal-chain-integration>Analog Signal Chain Integration</h2><h3 id=typical-motor-control-signal-chain>Typical Motor Control Signal Chain</h3><pre tabindex=0><code>Sensor → PGA/Op-Amp → ADC (for feedback)
            ↓
      Comparator (for protection)
            ↓
    PWM Fault Input (hardware shutdown)
</code></pre><p><strong>Configuration Strategy:</strong></p><ol><li><strong>Current Sensing</strong>: Op-Amp or PGA amplifies shunt voltage → ADC for control loop</li><li><strong>Overcurrent Protection</strong>: Comparator monitors amplified signal → PWM fault for immediate shutdown</li><li><strong>Voltage Reference</strong>: DAC provides stable reference for comparator threshold</li></ol><h3 id=typical-instrumentation-chain>Typical Instrumentation Chain</h3><pre tabindex=0><code>Sensor → PGA (variable gain) → ADC (measurement)
         ↓
  Op-Amp (buffering/filtering)
</code></pre><p><strong>Configuration Strategy:</strong></p><ol><li><strong>Signal Conditioning</strong>: Op-Amp buffers high-impedance sensor</li><li><strong>Range Adaptation</strong>: PGA adjusts gain based on signal amplitude</li><li><strong>Measurement</strong>: ADC samples conditioned signal with optimal resolution</li></ol><hr><h2 id=comparator-pwm-fault-integration>Comparator-PWM Fault Integration</h2><p><strong>Critical for motor control and power conversion</strong> - Comparators can trigger PWM fault events for immediate hardware shutdown without CPU intervention.</p><p><strong>How It Works:</strong></p><p>High-speed comparators monitor critical signals (current, voltage) and directly control PWM outputs through hardware fault inputs. When the comparator detects an over-threshold condition, it forces PWM outputs to a safe state within nanoseconds, protecting hardware from damage.</p><p><strong>Fault Response Strategies:</strong></p><table><thead><tr><th>Fault Trigger</th><th>Comparator Configuration</th><th>PWM Fault Action</th><th>Recovery</th></tr></thead><tbody><tr><td><strong>Overcurrent (cycle-by-cycle)</strong></td><td>Fast response, 10mV hysteresis</td><td>Force outputs LOW during fault</td><td>Automatic recovery next PWM period</td></tr><tr><td><strong>Overvoltage (latched)</strong></td><td>15mV hysteresis, filtered</td><td>Latch outputs OFF</td><td>Manual reset required</td></tr><tr><td><strong>Peak current limit</strong></td><td>Slope compensation enabled</td><td>Reduce duty cycle</td><td>Proportional reduction</td></tr></tbody></table><p><strong>Configuration Best Practices:</strong></p><ul><li>Use hysteresis to prevent chattering during transients</li><li>Configure PWM blanking window to ignore switching noise</li><li>Verify comparator response time meets protection requirements</li><li>Test fault recovery behavior under real operating conditions</li></ul><hr><h2 id=dac-output-applications>DAC Output Applications</h2><h3 id=voltage-reference-generation>Voltage Reference Generation</h3><p>DACs provide stable DC voltage references for:</p><ul><li>Comparator threshold setting</li><li>ADC biasing (single-ended to differential conversion)</li><li>Voltage-controlled circuits</li><li>Test equipment calibration</li></ul><p><strong>Accuracy Considerations:</strong></p><ul><li>12-bit DAC: 0.8 mV step size @ 3.3V reference</li><li>10-bit DAC: 3.2 mV step size @ 3.3V reference</li><li>Use external precision reference for critical applications</li><li>Account for output impedance when driving low-impedance loads</li></ul><h3 id=waveform-generation>Waveform Generation</h3><p>DACs enable arbitrary waveform synthesis for:</p><ul><li>Audio signal generation (speech, tones, music)</li><li>Function generator applications (sine, triangle, sawtooth)</li><li>Motor commutation signals (BLDC trapezoidal drive)</li><li>Test stimulus generation</li></ul><p><strong>Performance Limits:</strong></p><ul><li>SAM E7x: 1 MSPS maximum update rate</li><li>SAM C2x: 350 kSPS maximum update rate</li><li>Use DMA for high-speed continuous waveforms</li><li>Add external low-pass filter for high-quality audio</li></ul><hr><h2 id=op-amp-and-pga-signal-conditioning>Op-Amp and PGA Signal Conditioning</h2><h3 id=sensor-interfacing-best-practices>Sensor Interfacing Best Practices</h3><p><strong>When to Use Op-Amp:</strong></p><ul><li>High-impedance sensor buffering (piezoelectric, pH probes)</li><li>Active filtering (low-pass, high-pass, band-pass)</li><li>Current-to-voltage conversion (photodiode amplification)</li><li>Level shifting for single-ended to differential conversion</li></ul><p><strong>When to Use PGA:</strong></p><ul><li>Sensors with wide dynamic range (load cells, pressure sensors)</li><li>Multi-range measurement systems</li><li>Automatic gain control for varying signal amplitudes</li><li>Optimal ADC resolution across different operating conditions</li></ul><p><strong>Configuration Tips:</strong></p><ul><li>Op-Amp unity gain: Use for simple buffering without amplification</li><li>PGA gain selection: Start with lowest gain, increase if ADC resolution insufficient</li><li>Differential mode: Use for common-mode noise rejection</li><li>Output impedance: Ensure compatible with ADC input impedance</li></ul><hr><h2 id=device-family-support-summary>Device Family Support Summary</h2><table><thead><tr><th>Analog Block</th><th>dsPIC30F</th><th>dsPIC33F</th><th>dsPIC33E</th><th>dsPIC33C</th><th>dsPIC33A</th><th>PIC32MK</th><th>SAM E5x</th><th>SAM E7x</th><th>SAM C2x</th></tr></thead><tbody><tr><td>DAC</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>High-Speed Comparator</td><td>❌</td><td>❌</td><td>✅ (EP/EV)</td><td>✅ (CH/CK)</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>Comparator w/Slope</td><td>❌</td><td>❌</td><td>✅ (EP/EV)</td><td>✅ (CH/CK)</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>Op-Amp</td><td>❌</td><td>❌</td><td>⚠️ (selected)</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>PGA</td><td>❌</td><td>❌</td><td>❌</td><td>✅</td><td>❌</td><td>✅</td><td>⚠️ (selected)</td><td>❌</td><td>❌</td></tr></tbody></table><p><strong>Legend:</strong> ✅ Full Support | ⚠️ Selected Devices | ❌ Not Available</p><hr><h2 id=see-also>See Also</h2><p><strong>Related Block Categories:</strong></p><ul><li><strong><a href=../adc/>ADC Blocks</a></strong> - For analog-to-digital conversion and measurement</li><li><strong><a href=../pwm_io/>PWM Blocks</a></strong> - For comparator fault integration</li><li><strong><a href=../system_configuration/>System Configuration</a></strong> - For analog reference configuration</li></ul><p><strong>Recommended Reading:</strong></p><ul><li>Comparator fault inputs integrate directly with PWM modules</li><li>DACs require stable voltage reference for accuracy</li><li>Op-Amps can buffer DAC outputs for higher drive capability</li><li>PGA and Op-Amp outputs typically connect to ADC inputs</li></ul><p><strong>Example Projects:</strong></p><ul><li><a href=../../getting_started/motor_control_examples.html>Motor Control Examples</a> - See comparator fault protection</li><li><a href=../../getting_started/board_templates.html>Board Templates</a> - Pre-configured analog signal chains</li></ul><hr><p><strong>💡 Quick Selection Guide:</strong></p><ul><li><strong>Need voltage output?</strong> → DAC (SAM devices)</li><li><strong>Need fast fault protection?</strong> → High-Speed Comparator</li><li><strong>Need SMPS peak current control?</strong> → Comparator with Slope Compensation</li><li><strong>Need sensor buffering?</strong> → Op-Amp (unity gain or fixed gain)</li><li><strong>Need variable sensor gain?</strong> → PGA (programmable gain selection)</li></ul><h2><a href=../../block_reference/analog_io/dac_samx.html>MCHP DAC SAMx Documentation</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/DAC_SAMx.svg type=image/svg+xml><source srcset=../../images/blocks/analog/DAC_SAMx_hu_104f8b18ae542768.webp type=image/webp><img src=../../images/blocks/analog/DAC_SAMx.png alt="DAC SAMx Block Icon"></picture></div><div class=block-icon-description>High-performance DAC for waveform generation and precision voltage output</div></div><h2 id=block-overview>Block Overview</h2><p>The <strong>MCHP_DACC_SAMx</strong> block provides access to the Digital-to-Analog Converter Controller (DACC) available in SAM E5x, SAM E7x, and SAM C2x microcontrollers. This peripheral enables high-quality analog voltage generation for applications including waveform synthesis, precision voltage references, audio output, and control signal generation.</p><pre><code>                10-bit or 12-bit resolution (device-dependent)
                Dual-channel independent or differential output modes
                Up to 1 MSPS conversion rate
                Internal or external voltage reference options
                Built-in waveform generation capabilities
                DMA support for continuous waveform streaming
                Low glitch energy and monotonic output
</code></pre><h3 id=supported-device-families>Supported Device Families</h3><table><thead><tr><th>Family</th><th>Representative Devices</th><th>Resolution</th><th>Channels</th><th>Max Rate</th></tr></thead><tbody><tr><td>SAM E5x</td><td>SAME54P20A, SAME53J18A</td><td>12-bit</td><td>2 (DAC0, DAC1)</td><td>1 MSPS</td></tr><tr><td>SAM E7x</td><td>SAME70Q21B, SAMV71Q21B</td><td>12-bit</td><td>2 (DAC0, DAC1)</td><td>1 MSPS</td></tr><tr><td>SAM C2x</td><td>SAMC21G18A, SAMC20G18A</td><td>10-bit</td><td>2 (DAC0, DAC1)</td><td>350 kSPS</td></tr></tbody></table><p><strong>Output Modes:</strong> The DACC supports both single-ended outputs (DAC0 and DAC1 independent) and differential output mode (DAC0 - DAC1), providing flexibility for various signal generation requirements.</p><h2><a href=../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html>MCHP High-Speed Analog Comparator Documentation</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator.svg type=image/svg+xml><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator_hu_9405d758d9dcfaf7.webp type=image/webp><img src=../../images/blocks/analog/HighSpeed_AnalogComparator.png alt="High-Speed Analog Comparator Block Icon"></picture></div><div class=block-icon-description>Fast threshold detection and PWM integration for motor control and power applications</div></div><h2 id=overview>Overview</h2><p>The <strong>MCHP High-Speed Analog Comparator</strong> block configures the on-chip analog comparators for fast threshold detection applications. These comparators provide critical real-time monitoring for motor control overcurrent protection, power supply fault detection, and zero-crossing detection. With response times in the nanosecond range, they can directly trigger PWM fault events without CPU intervention.</p><pre><code>                Sub-microsecond response time for critical fault protection
                Multiple comparator instances (up to 4 per device)
                Internal DAC reference or external voltage reference
                Programmable hysteresis for noise immunity
                Direct PWM fault input integration
                Configurable output state monitoring
</code></pre><h3 id=typical-applications>Typical Applications</h3><ul><li><strong>Overcurrent Protection:</strong> Motor drive current limit detection</li><li><strong>Overvoltage/Undervoltage:</strong> DC bus voltage monitoring</li><li><strong>Zero-Crossing Detection:</strong> AC line synchronization</li><li><strong>PWM Blanking:</strong> Noise immunity during switching</li><li><strong>Peak Detection:</strong> Signal peak monitoring</li></ul><h2 id=device-family-support>Device Family Support</h2><h4 id=dspic33ep>dsPIC33EP</h4><p>1-4 Comparators</p><h2><a href=../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html>MCHP High-Speed Analog Comparator with Slope Compensation Documentation</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator_wSlope.svg type=image/svg+xml><source srcset=../../images/blocks/analog/HighSpeed_AnalogComparator_wSlope_hu_91b0e41e62b25853.webp type=image/webp><img src=../../images/blocks/analog/HighSpeed_AnalogComparator_wSlope.png alt="High-Speed Analog Comparator with Slope Block Icon"></picture></div><div class=block-icon-description>Advanced peak current mode control with programmable slope compensation</div></div><h2 id=overview>Overview</h2><p>The <strong>MCHP High-Speed Analog Comparator with Slope Compensation</strong> block extends the standard comparator with integrated slope compensation capabilities for peak current mode control applications. This advanced feature prevents sub-harmonic oscillation in current-mode DC-DC converters and motor drives operating at duty cycles above 50%.</p><pre><code>                All standard comparator features plus slope compensation
                Programmable compensation ramp generation
                Automatic ramp synchronization with PWM
                Variable slope adjustment for optimal stability
                Sub-microsecond response for high-frequency switching
                Integrated peak current mode control logic
</code></pre><h3 id=peak-current-mode-control>Peak Current Mode Control</h3><p>Peak current mode control regulates output by controlling the peak inductor current in each switching cycle. Slope compensation stabilizes the control loop when duty cycle exceeds 50%, preventing period-doubling oscillations.
<strong>Why Slope Compensation?</strong>
In peak current mode control with D > 50%, the inductor current slope creates a positive feedback loop leading to sub-harmonic oscillation. Adding a compensation ramp to the current sense signal stabilizes the loop.</p><h2><a href=../../block_reference/analog_io/comparator_opamps_volt_ref/op_amp.html>MCHP Op-Amp Documentation</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/OpAmp.svg type=image/svg+xml><source srcset=../../images/blocks/analog/OpAmp_hu_fb5a2d1d77b1826d.webp type=image/webp><img src=../../images/blocks/analog/OpAmp.png alt="OpAmp Block Icon"></picture></div><div class=block-icon-description>Integrated operational amplifiers for signal conditioning and analog processing</div></div><h2 id=block-overview>Block Overview</h2><p>The <strong>MCHP_OP_AMP</strong> block provides access to the integrated operational amplifiers available in dsPIC33C, dsPIC33CH, and dsPIC33CK microcontrollers. These on-chip op-amps eliminate the need for external amplification circuitry in many applications, reducing BOM cost and board space while improving signal integrity.</p><pre><code>                Integrated signal conditioning eliminates external op-amps
                Direct connection to ADC for optimized signal chain
                Configurable gain settings for flexible amplification
                Rail-to-rail operation for maximum dynamic range
                Low offset and drift for precision measurements
</code></pre><h3 id=supported-device-families>Supported Device Families</h3><pre tabindex=0><code>| Family | DOS Module | Op-Amp Instances | Key Features |
|---|---|---|---|
| dsPIC33C/CH/CK | DOS_03349_amp_pad_opamp_ctrl_upb_v1 | Up to 3 op-amps | Basic amplification, fixed gain |
| dsPIC33A | DOS_03495_amp_pad_opamp_ctrl_upb_v2_dspic33a | Up to 3 op-amps | Enhanced features, programmable gain |

**Pin Mapping:** The block automatically displays pin assignments for each op-amp instance (IN+, IN-, OUT) based on the selected device. Pin assignments are fixed in hardware and cannot be remapped. 
## Operating Modes

### 1. Voltage Follower (Buffer)
**Configuration:** Enabled with negative input internally set to 0 
- **Gain:** Unity (1×)
- **Input:** IN+ connected to signal source
- **Feedback:** Output internally connected to IN-
- **Use Case:** High-impedance buffer, isolation amplifier

### 2. Non-Inverting Amplifier
**Configuration:** Enabled with positive and negative inputs 
- **Gain:** Configured by external resistor network
- **Input:** Signal applied to IN+
- **Feedback:** Resistor divider on IN- for gain setting
- **Use Case:** Signal amplification, sensor conditioning

### 3. Inverting Amplifier
**Configuration:** Enabled with positive and negative inputs 
- **Gain:** Set by input/feedback resistor ratio
- **Input:** Signal applied to IN- through input resistor
- **Reference:** IN+ connected to ground or reference voltage
- **Use Case:** Phase inversion, current-to-voltage conversion

### 4. Differential Amplifier
**Configuration:** Enabled with positive and negative inputs 
- **Gain:** Matched resistor network for CMRR
- **Input:** Differential signal on IN+ and IN-
- **Output:** Single-ended amplified difference
- **Use Case:** Differential sensor signals, noise rejection

## Block Parameters

| Parameter | Options | Description |
|---|---|---|
| OpAmp1 | • Disabled | • Enabled with negative input internally set to 0 | • Enabled with positive and negative inputs | Configuration for first op-amp instance. When enabled, the block automatically                         configures AMPON (master enable) and AMPEN[0] (instance enable) bits. The mode                         selection determines NCHDIS[0] setting (0 = internal connection, 1 = external pins). |
| OpAmp2 | • Disabled | • Enabled with negative input internally set to 0 | • Enabled with positive and negative inputs | Configuration for second op-amp instance. Independent control of AMPEN[1] and                         NCHDIS[1] bits. Can be used simultaneously with OpAmp1 for dual-channel applications. |
| OpAmp3 | • Disabled | • Enabled with negative input internally set to 0 | • Enabled with positive and negative inputs | Configuration for third op-amp instance (if available on device). Controls AMPEN[2]                         and NCHDIS[2]. Useful for three-phase motor control or multi-channel data acquisition. |


## Register Configuration

### AMPCON1 Register
 // Op-Amp Control Register 1 AMPCON1 = (AMPON &lt;&lt; 15) | // Master enable (1 = enabled) (AMPSIDL &lt;&lt; 13) | // Stop in idle (0 = continue in idle) (NCHDIS2 &lt;&lt; 10) | // OpAmp3 negative channel (1 = external pin) (NCHDIS1 &lt;&lt; 9) | // OpAmp2 negative channel (1 = external pin) (NCHDIS0 &lt;&lt; 8) | // OpAmp1 negative channel (1 = external pin) (AMPEN2 &lt;&lt; 2) | // OpAmp3 enable (1 = enabled) (AMPEN1 &lt;&lt; 1) | // OpAmp2 enable (1 = enabled) (AMPEN0 &lt;&lt; 0); // OpAmp1 enable (1 = enabled) 
### Port Configuration
## Application Examples

### Example 1: Voltage Follower for ADC Input Buffering
**Application:** High-impedance sensor buffer  // Configuration: // - OpAmp1 = &#34;Enabled with negative input internally set to 0&#34; // - OpAmp2 = Disabled // - OpAmp3 = Disabled // Hardware connections: // - Sensor output → OA1_IN+ (high impedance input) // - OA1_OUT → ADC channel (low impedance) // - Feedback is internal (unity gain) // Block automatically configures: AMPCON1bits.AMPON = 1; // Enable op-amp module AMPCON1bits.AMPEN0 = 1; // Enable OpAmp1 AMPCON1bits.NCHDIS0 = 0; // Internal feedback (voltage follower) // Result: Buffered sensor signal with no loading effect 
### Example 2: Non-Inverting Amplifier (Gain = 10)
**Application:** Thermocouple amplification  // Configuration: // - OpAmp1 = &#34;Enabled with positive and negative inputs&#34; // - External resistors: R1 = 1kΩ (to GND), R2 = 9kΩ (feedback) // - Gain = 1 + (R2/R1) = 1 + (9k/1k) = 10 // Hardware connections: // - Thermocouple → OA1_IN+ // - OA1_OUT → R2 → OA1_IN- // - OA1_IN- → R1 → GND // - OA1_OUT → ADC channel // Block configuration: AMPCON1bits.AMPON = 1; // Enable op-amp module AMPCON1bits.AMPEN0 = 1; // Enable OpAmp1 AMPCON1bits.NCHDIS0 = 1; // External pin for feedback network // Result: 10× amplified thermocouple signal // Input: 5mV → Output: 50mV 
### Example 3: Differential Amplifier for Current Sensing
**Application:** High-side current measurement  // Configuration: // - OpAmp1 = &#34;Enabled with positive and negative inputs&#34; // - Shunt resistor: 0.01Ω (100mΩ) // - Matched resistor network: R1 = R3 = 1kΩ, R2 = R4 = 10kΩ // - Differential gain = 10 // Hardware connections: // - Motor high-side → Shunt (0.01Ω) → Motor // - Shunt_High → R1 → OA1_IN+ // - Shunt_Low → R3 → GND // - OA1_IN+ → R2 → OA1_OUT // - OA1_IN- → R4 → GND // - OA1_OUT → ADC // Block configuration: AMPCON1bits.AMPON = 1; // Enable op-amp module AMPCON1bits.AMPEN0 = 1; // Enable OpAmp1 AMPCON1bits.NCHDIS0 = 1; // External resistor network // Current measurement: // Motor current: 10A → Shunt voltage: 100mV // Op-amp output: 100mV × 10 = 1V → ADC 
### Example 4: Multi-Channel Instrumentation Amplifier
**Application:** Three-phase current sensing  // Configuration: // - OpAmp1 = &#34;Enabled with positive and negative inputs&#34; (Phase A) // - OpAmp2 = &#34;Enabled with positive and negative inputs&#34; (Phase B) // - OpAmp3 = &#34;Enabled with positive and negative inputs&#34; (Phase C) // Hardware connections (per channel): // - Shunt resistor: 0.01Ω per phase // - Differential gain: 20 (configured by external resistors) // - OA1_OUT → ADC_CH1 // - OA2_OUT → ADC_CH2 // - OA3_OUT → ADC_CH3 // Block configuration: AMPCON1bits.AMPON = 1; // Enable op-amp module AMPCON1bits.AMPEN0 = 1; // Enable OpAmp1 (Phase A) AMPCON1bits.AMPEN1 = 1; // Enable OpAmp2 (Phase B) AMPCON1bits.AMPEN2 = 1; // Enable OpAmp3 (Phase C) AMPCON1bits.NCHDIS0 = 1; // External network for all AMPCON1bits.NCHDIS1 = 1; AMPCON1bits.NCHDIS2 = 1; // Synchronized three-phase current measurement // Sample all three ADC channels simultaneously for accurate FOC 
## Design Considerations

### Gain Configuration

- **Voltage Follower:** No external components required, unity gain (1×), high input impedance
- **Non-Inverting:** Gain = 1 + (R2/R1), input impedance ≈ op-amp input impedance (very high)
- **Inverting:** Gain = -(R2/R1), input impedance = R1 (finite), inverted output phase
- **Differential:** Gain = (R2/R1) for matched resistors, requires precision resistor matching

### Bandwidth and Slew Rate


                
                    Op-amp bandwidth typically ranges from 1 MHz to 10 MHz (device-dependent)
                    Gain-bandwidth product limits useful frequency range at higher gains
                    Slew rate limits large signal response (typically 1-10 V/μs)
                    Check device datasheet for specific performance parameters

### Offset and Calibration

- **Input Offset Voltage:** Typically ±1-5 mV (device-dependent)
- **Temperature Drift:** Consider offset drift over operating temperature range
- **Calibration:** Some devices support offset trim registers (check DOS module features)
- **Mitigation:** Use AC coupling or software offset correction for critical applications

### Power Supply Considerations
**Rail-to-Rail Operation:**
- Input common-mode range typically extends from VSS to VDD - 1.5V
- Output swing typically VSS + 100mV to VDD - 100mV under light loads
- Ensure signal levels stay within op-amp linear range
- Headroom required for proper operation, especially at high frequencies

### PCB Layout Guidelines

- **Short Traces:** Keep op-amp input and feedback traces as short as possible
- **Ground Plane:** Use solid ground plane under op-amp circuitry
- **Decoupling:** Place 100nF ceramic capacitor close to VDD pin
- **Separation:** Separate analog and digital ground returns
- **Shielding:** Shield sensitive inputs from switching noise sources

## Integration with Other Blocks

### Op-Amp + ADC Chain
**Optimized Signal Path:**
- Configure MCHP_OP_AMP block for desired gain and mode
- Connect op-amp output pin to dedicated ADC input channel
- Configure MCHP_ADC block to sample from op-amp output pin
- Synchronize ADC sampling with control loop timing
- Apply digital calibration/offset correction if needed

### Op-Amp + PWM Synchronization
**Motor Control Application:**
- Use op-amps to amplify shunt resistor voltages (current sensing)
- Trigger ADC from PWM events to sample at optimal timing
- Avoid sampling during PWM switching transitions
- Use ADC trigger delay to account for op-amp settling time

### Multi-Instance Coordination
 // Example: Three-phase motor current sensing // OpAmp1 → ADC_CH1 (Phase A current) // OpAmp2 → ADC_CH2 (Phase B current) // OpAmp3 → ADC_CH3 (Phase C current) // Configure all op-amps with identical gain // Sample all ADC channels simultaneously // Ensures phase alignment for FOC algorithm 
## Troubleshooting

| Issue | Possible Causes | Solution |
|---|---|---|
| No output signal | • AMPON not set | • AMPENx not set | • Pin not configured as analog | Verify block configuration enables the desired op-amp instance.                         Check that MCHP_PORT is correctly configured (automatic in INITIALISATION). |
| Saturated output | • Excessive input signal | • Incorrect gain setting | • Insufficient supply headroom | Reduce input amplitude, check resistor values for correct gain,                         ensure VDD provides adequate headroom for output swing. |
| Oscillation | • Poor PCB layout | • Missing decoupling | • Capacitive load | Add series resistor to output (10-50Ω), improve ground plane,                         add decoupling capacitor close to VDD pin, reduce trace lengths. |
| DC offset error | • Input offset voltage | • Bias current effects | • Temperature drift | Apply software offset calibration, use AC coupling if DC accuracy                         not required, check for trim registers in device datasheet. |
| Incorrect gain | • Wrong resistor values | • Incorrect mode selection | • Loading effects | Verify resistor network matches desired gain formula, ensure                         NCHDIS bit matches mode (0 = internal, 1 = external), check                         output load impedance is much higher than feedback resistors. |

## Related Blocks

- [MCHP_HighSpeed_AnalogComparator] - Fast analog comparator for threshold detection
- [MCHP_PGA] - Programmable Gain Amplifier with digital gain control
- [MCHP_ADC_HS_SAR_dsPIC33] - High-speed ADC for digitizing op-amp outputs
- [MCHP_PWM_HS_FEP] - PWM for motor control synchronization
[← Back to Analog Blocks]
</code></pre><h2><a href=../../block_reference/analog_io/comparator_opamps_volt_ref/pga.html>MCHP PGA Documentation</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=../../images/blocks/analog/PGA.svg type=image/svg+xml><source srcset=../../images/blocks/analog/PGA_hu_1a67ae8490f70464.webp type=image/webp><img src=../../images/blocks/analog/PGA.png alt="PGA Block Icon"></picture></div><div class=block-icon-description>Digitally-controlled gain amplifier with calibration for precision analog signal conditioning</div></div><h2 id=block-overview>Block Overview</h2><p>The <strong>MCHP_PGA</strong> block provides access to the Programmable Gain Amplifier (PGA) peripheral available in select dsPIC33C, dsPIC33CH, and dsPIC33CK devices. The PGA offers digitally-controlled gain settings with calibration capabilities, enabling precision signal conditioning for sensor inputs and ADC front-end applications.</p><pre><code>                Software-configurable gain: 1×, 2×, 4×, 8×, 16×, 32× (device-dependent)
                Runtime gain adjustment via block input or register write
                Offset and gain calibration registers for precision measurements
                Direct connection to DACOUT pins or internal ADC inputs
                Single-ended or differential input modes
                Eliminates external amplifier circuits and reduces BOM cost
</code></pre><h3 id=supported-device-families>Supported Device Families</h3><table><thead><tr><th>Family</th><th>DOS Module</th><th>PGA Instances</th><th>Gain Range</th><th>Output Options</th></tr></thead><tbody><tr><td>dsPIC33C/CH/CK</td><td>DOS_02291_PGA</td><td>2 PGA channels</td><td>1×, 2×, 4×, 8×, 16×, 32×</td><td>DACOUT1, DACOUT2, Internal</td></tr></tbody></table><p><strong>Output Routing:</strong> PGA outputs can be routed to DACOUT pins (for external ADC or monitoring) or kept internal (for direct connection to on-chip ADC). The block automatically configures pin assignments based on your selection.</p><div class=nav-footer><p>Last updated: October 2025 | MPLAB Blockset Documentation</p><p>&copy; 2025 Microchip Technology Incorporated and its subsidiaries</p><p style=font-size:10px;margin-top:8px;line-height:1.4>The "Microchip" name and logo, the "M" logo, and other names, logos, and brands are registered
and unregistered trademarks of Microchip Technology Incorporated or its affiliates and/or
subsidiaries in the United States and/or other countries ("Microchip Trademarks"). Information
regarding Microchip Trademarks can be found at
<a href=https://www.microchip.com/en-us/about/legal-information/microchip-trademarks target=_blank style=color:var(--accent-primary)>https://www.microchip.com/en-us/about/legal-information/microchip-trademarks</a>.</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
☰</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="🌙",n.textContent="Dark"):(t.textContent="☀️",n.textContent="Light")}(function(){const n=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}}),window.toggleSection=function(e){const t=document.getElementById("section-"+e);if(t&&(t.classList.toggle("expanded"),t.classList.contains("nav-section"))){const n=getExpandedSections();t.classList.contains("expanded")?n.add(e):n.delete(e),localStorage.setItem("expandedSections",JSON.stringify([...n]))}};function getExpandedSections(){const e=localStorage.getItem("expandedSections");return new Set(e?JSON.parse(e):[])}function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;if(n===e){t.classList.add("active");const n=t.closest(".nav-subsection");n&&!n.classList.contains("expanded")&&n.classList.add("expanded");const e=t.closest(".nav-section");if(e&&!e.classList.contains("expanded")){e.classList.add("expanded");const n=e.id.replace("section-",""),t=getExpandedSections();t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t]))}}})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage();const t=document.querySelector(".nav-link.active");if(t){const e=t.closest(".nav-section");if(e&&e.id){const n=e.id.replace("section-",""),t=getExpandedSections();t.has(n)||(t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t])))}}}()</script></body></html>