<!DOCTYPE html>
<html>
<head>
    <title>MCHP_TCC_PWM - MCHP Blockset</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../assets/css/navigation.css">
    <script src="../../assets/js/navigation.js"></script>
</head>
<body>
    <!-- Mobile Navigation Toggle -->
    <button class="nav-toggle" aria-label="Toggle navigation">☰</button>

    <!-- Left Navigation Panel -->
    <nav class="doc-nav-container">
        <div class="doc-nav-header">
            <a href="../../index.html">MCHP Blockset Docs</a>
        </div>
        <ul class="doc-nav-menu">
            <li class="nav-item">
                <a href="../../index.html" class="nav-link">Home</a>
            </li>

            <!-- Getting Started Section -->
            <li class="nav-item">
                <div class="nav-category">Getting Started <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../getting_started/overview.html" class="nav-link">Overview</a></li>
                    <li><a href="../../getting_started/installation.html" class="nav-link">Installation</a></li>
                    <li><a href="../../getting_started/quick_start.html" class="nav-link">Quick Start</a></li>
                    <li><a href="../../getting_started/board_templates.html" class="nav-link">Board Templates</a></li>
                    <li><a href="../../getting_started/supported_devices.html" class="nav-link">Supported Devices</a></li>
                </ul>
            </li>

            <!-- User Guide Section -->
            <li class="nav-item">
                <div class="nav-category">User Guide <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../user_guide/index.html" class="nav-link">User Guide Overview</a></li>
                    <li><a href="../../user_guide/code_generation.html" class="nav-link">Code Generation</a></li>
                    <li><a href="../../user_guide/external_mode.html" class="nav-link">External Mode</a></li>
                </ul>
            </li>

            <!-- Block Reference Section -->
            <li class="nav-item">
                <div class="nav-category">Block Reference <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../block_reference/index.html" class="nav-link">Block Reference Overview</a></li>
                </ul>
            </li>

            <!-- Examples Section -->
            <li class="nav-item">
                <div class="nav-category">Examples <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../examples/field_weakening.html" class="nav-link">Field Weakening</a></li>
                </ul>
            </li>

            <!-- Release Notes -->
            <li class="nav-item">
                <a href="../../release_notes.html" class="nav-link">Release Notes</a>
            </li>
        </ul>
    </nav>

    <div class="doc-content-wrapper">
    <h1>MCHP_TCC_PWM - Timer/Counter for Control PWM Block</h1>

    
    <!-- Block Icon -->
    <div class="block-image">
        <img src="../assets/images/blocks/pwm/TCC_PWM.svg"
             alt="TCC_PWM Block Icon"
             onerror="this.onerror=null; this.src='../assets/images/blocks/pwm/TCC_PWM.png';">
        <div class="block-image-caption">
            TCC_PWM Block Icon
        </div>
    </div>
<h2>Block Description</h2>
    <p>The MCHP_TCC_PWM block provides PWM generation using the TCC (Timer/Counter for Control) peripheral found in SAME5x, SAMC2x, and SAMD2x microcontrollers. TCC offers advanced features for motor control including pattern generation, fault handling, and synchronized operation.</p>

    <div class="note">
        <strong>Note:</strong> TCC is the primary PWM peripheral for SAME5x/SAMC2x families, offering superior features compared to basic TC (Timer/Counter) modules.
    </div>

    <h2>Supported Device Families</h2>
    <table>
        <tr>
            <th>Family</th>
            <th>TCC Instances</th>
            <th>Channels per TCC</th>
        </tr>
        <tr>
            <td><strong>SAME54/53/51</strong></td>
            <td>TCC0, TCC1, TCC2</td>
            <td>6, 4, 3 channels</td>
        </tr>
        <tr>
            <td><strong>SAMC21/20</strong></td>
            <td>TCC0, TCC1, TCC2</td>
            <td>4, 4, 2 channels</td>
        </tr>
        <tr>
            <td><strong>SAMD21/20</strong></td>
            <td>TCC0, TCC1, TCC2</td>
            <td>4, 2, 2 channels</td>
        </tr>
    </table>

    <h2>Key Features</h2>
    <ul>
        <li>Up to 6 PWM channels per TCC instance (device dependent)</li>
        <li>Complementary outputs with dead-time</li>
        <li>Circular, dual-slope (center-aligned) modes</li>
        <li>Pattern generation for BLDC/stepper motors</li>
        <li>Recoverable and non-recoverable faults</li>
        <li>Dithering for enhanced resolution</li>
        <li>Compare capture for position sensing</li>
    </ul>

    <h2>Configuration Parameters</h2>

    <h3>Basic Configuration</h3>
    <table>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>TCC_Instance</code></td>
            <td>Select TCC0, TCC1, or TCC2</td>
        </tr>
        <tr>
            <td><code>Waveform_Mode</code></td>
            <td>Normal Frequency, Match Frequency, or PWM</td>
        </tr>
        <tr>
            <td><code>Counter_Mode</code></td>
            <td>Up, Down, or Dual-slope (center-aligned)</td>
        </tr>
        <tr>
            <td><code>Enabled_Channels</code></td>
            <td>Array of enabled channel numbers</td>
        </tr>
    </table>

    <h3>Dead Time and Pattern</h3>
    <table>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>DeadTime_Enable</code></td>
            <td>Enable complementary output with dead-time</td>
        </tr>
        <tr>
            <td><code>DeadTime_Low</code></td>
            <td>Dead-time for low-side (cycles)</td>
        </tr>
        <tr>
            <td><code>DeadTime_High</code></td>
            <td>Dead-time for high-side (cycles)</td>
        </tr>
        <tr>
            <td><code>Pattern_Enable</code></td>
            <td>Enable pattern generator for BLDC</td>
        </tr>
        <tr>
            <td><code>Pattern_Table</code></td>
            <td>Commutation pattern table</td>
        </tr>
    </table>

    <h2>Block Inputs/Outputs</h2>

    <h3>Inputs</h3>
    <table>
        <tr>
            <th>Input</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>Period</code></td>
            <td>Optional period input</td>
        </tr>
        <tr>
            <td><code>Compare 0..N</code></td>
            <td>Compare values (duty cycle) per channel</td>
        </tr>
        <tr>
            <td><code>Pattern_Index</code></td>
            <td>Pattern table index (if pattern mode enabled)</td>
        </tr>
    </table>

    <h3>Outputs</h3>
    <table>
        <tr>
            <th>Output</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>Fault_Status</code></td>
            <td>Fault condition status</td>
        </tr>
        <tr>
            <td><code>Overflow_Flag</code></td>
            <td>Counter overflow indicator</td>
        </tr>
    </table>

    <h2>Usage Example</h2>
    <pre><code>% BLDC motor control with TCC pattern generator:
TCC_Instance = 'TCC0';
Waveform_Mode = 'PWM';
Counter_Mode = 'Dual-slope';
Enabled_Channels = [0 1 2];

% Pattern generator:
Pattern_Enable = 'on';
Pattern_Table = [
    % Hall state -> [Ch0 Ch1 Ch2] outputs
    0b000000;  % Invalid
    0b100001;  % Hall 001
    0b001100;  % Hall 010
    0b101100;  % Hall 011
    0b110010;  % Hall 100
    0b110001;  % Hall 101
    0b011010;  % Hall 110
    0b000000   % Invalid
];

% Connect Hall sensor state -> Pattern_Index
</code></pre>

    <h2>Related Blocks</h2>
    <ul>
        <li><a href="pwm_sam7x.html"><strong>MCHP_PWM_SAM7x</strong></a> - General SAM7x PWM</li>
        <li><strong>MCHP_TC_PWM</strong> - Basic Timer/Counter PWM</li>
        <li><strong>MCHP_ADC_SAM</strong> - SAM ADC with TCC event sync</li>
    </ul>

    <hr>
    <p><small>Last updated: January 2025 | MCHP Blockset Documentation</small></p>
    </div>
</body>
</html>
