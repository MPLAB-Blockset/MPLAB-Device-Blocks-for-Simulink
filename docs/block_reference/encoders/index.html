<!doctype html><html lang=en><head><title>Encoder Blocks - MPLAB Device Blocks for Simulink</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block_reference/encoders/index.html><link rel=icon type=image/x-icon href=../../favicon.ico><style>html,html[data-theme=dark],body{color-scheme:light only!important;background-color:#fff!important;color:#222!important}:root{--bg-primary:#f8f9fa;--bg-secondary:white;--bg-tertiary:#f8f9fa;--text-primary:#2c3e50;--text-secondary:#666;--text-tertiary:#6c757d;--text-heading:#1a1a1a;--border-color:#dee2e6;--border-light:#e1e8ed;--border-medium:#e9ecef;--accent-primary:#1C355E;--accent-secondary:#41B6E6;--accent-hover:#2a5a8f;--accent-light:#D1DDE6;--code-bg:#f4f4f4;--code-text:#c7254e;--pre-bg:linear-gradient(to bottom, #e8e8e8 0%, #f0f0f0 100%);--pre-border:#d0d0d0;--table-hover:#E5F3FF;--table-stripe:#f8f9fa;--note-bg:linear-gradient(to right, #e7f3fe 0%, #f5fbff 100%);--note-border:#2196F3;--note-text:#1976D2;--warning-bg:linear-gradient(to right, #fff9e6 0%, #fffcf0 100%);--warning-border:#ff9800;--warning-text:#f57c00;--shadow-sm:0 2px 4px rgba(0,0,0,0.05);--shadow-md:0 2px 8px rgba(0,0,0,0.08);--shadow-lg:0 2px 12px rgba(0,0,0,0.08)}[data-theme=dark]{--bg-primary:#1a1d23;--bg-secondary:#242831;--bg-tertiary:#2d3139;--text-primary:#e4e6eb;--text-secondary:#adb5bd;--text-tertiary:#8b95a1;--text-heading:#e4e6eb;--border-color:#3a3f4b;--border-light:#3a3f4b;--border-medium:#404654;--accent-primary:#41B6E6;--accent-secondary:#5AC8FA;--accent-hover:#6DD5FF;--accent-light:#1a2d3f;--code-bg:#2d3139;--code-text:#ff6b9d;--pre-bg:linear-gradient(to bottom, #2d3139 0%, #2d3139 100%);--pre-border:#3a3f4b;--table-hover:#1e3a52;--table-stripe:#2d3139;--note-bg:linear-gradient(to right, #1e3a52 0%, #1e3a52 100%);--note-border:#4da6d6;--note-text:#66b3e0;--warning-bg:linear-gradient(to right, #3d3520 0%, #3d3520 100%);--warning-border:#ffb347;--warning-text:#ffc870;--shadow-sm:0 2px 4px rgba(0,0,0,0.3);--shadow-md:0 2px 8px rgba(0,0,0,0.4);--shadow-lg:0 2px 12px rgba(0,0,0,0.5)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:8px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:8px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:40px;max-width:200px;object-fit:contain}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-secondary);margin-bottom:16px;padding:10px 14px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover)}.breadcrumbs span{margin:0 8px;color:var(--text-tertiary)}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:initial;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}li mjx-container[display=true]{text-align:left!important;margin:8px 0!important}li p mjx-container[display=true]{text-align:left!important;margin:8px 0!important}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:flex;align-items:center;gap:15px;margin:20px auto;padding:15px;max-width:900px;background-color:#f8f9fa;border-radius:8px;border:1px solid #dee2e6;transition:all .2s ease-in-out}.block-card-link{display:flex;align-items:center;gap:15px;flex:1;text-decoration:none;color:inherit}.block-icon-container:has(.block-card-link):hover{background-color:#e9ecef;border-color:#0076a8;box-shadow:0 2px 8px rgba(0,118,168,.15);cursor:pointer}.block-icon-image{flex-shrink:0;width:150px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.block-icon-image picture{width:100%;max-width:150px;display:flex;align-items:center;justify-content:center}.block-icon-image img,.block-icon-image source{max-width:100%;max-height:100%;width:auto;height:auto;display:block;object-fit:contain}.block-icon-description{flex:1;font-size:16px;line-height:1.6;color:#333;column-count:1;max-width:100%}.family-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px;justify-content:center;width:100%}.family-tag{display:inline-block;padding:3px 8px;font-size:11px;font-weight:600;background-color:#2196f3;color:#fff;border-radius:4px;white-space:nowrap}.family-detail{font-weight:400;opacity:.9;font-size:10px;margin-left:3px}.chip-family-badges{display:flex;flex-direction:column;gap:6px;padding:12px;background-color:#e3f2fd;border:2px solid #2196f3;border-radius:6px;min-width:140px;flex-shrink:0}.chip-family-badges::before{content:"Device Support";font-size:11px;font-weight:700;color:#1565c0;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;text-align:center}.chip-badge{display:block;padding:6px 10px;font-size:12px;font-weight:600;border-radius:4px;white-space:nowrap;text-align:center;transition:all .15s ease-in-out}.chip-badge:hover{transform:scale(1.05);box-shadow:0 2px 4px rgba(0,0,0,.2)}.chip-badge.dspic30f{background-color:#e3f2fd;color:#1565c0;border:1px solid #90caf9}.chip-badge.dspic33f{background-color:#e8f5e9;color:#2e7d32;border:1px solid #81c784}.chip-badge.dspic33e{background-color:#fff3e0;color:#e65100;border:1px solid #ffb74d}.chip-badge.dspic33c{background-color:#f3e5f5;color:#6a1b9a;border:1px solid #ba68c8}.chip-badge.dspic33a{background-color:#fce4ec;color:#c2185b;border:1px solid #f06292}.chip-badge.pic32{background-color:#e0f7fa;color:#00695c;border:1px solid #4db6ac}.chip-badge.sam{background-color:#fff9c4;color:#f57f17;border:1px solid #fdd835}.chip-badge.all-families{background-color:#e0e0e0;color:#424242;border:1px solid #9e9e9e;font-weight:700}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"Encoder Blocks","description":"MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block_reference\/encoders\/index.html","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-17","dateModified":"2025-10-17","inLanguage":"en-US"}</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><h2 class=sidebar-title>MPLAB Blockset</h2></div><div class=sidebar-nav><div class=nav-section><a href=../../index.html class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>🏠</span>Home</span></a></div><div class=nav-section id=section-getting-started><a href=../../getting_started/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("getting-started"),!0'><span><span class=icon>🚀</span>Getting Started</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("getting-started"),!1'>▶</span></a><div class=nav-section-children><a href=../../getting_started/overview.html class=nav-link>Overview</a>
<a href=../../getting_started/installation.html class=nav-link>Installation</a>
<a href=../../getting_started/quick_start.html class=nav-link>Quick Start Guide</a>
<a href=../../getting_started/board_templates.html class=nav-link>Board Templates</a>
<a href=../../getting_started/motor_control_examples.html class=nav-link>Motor Control Examples</a>
<a href=../../getting_started/scheduler_multitasking.html class=nav-link>Scheduler & Multitasking</a>
<a href=../../getting_started/external_mode_pil.html class=nav-link>External Mode & PIL</a>
<a href=../../getting_started/data_visualization.html class=nav-link>Data Visualization</a>
<a href=../../getting_started/supported_devices.html class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-user-guide><a href=../../user_guide/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("user-guide"),!0'><span><span class=icon>📚</span>User Guide</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("user-guide"),!1'>▶</span></a><div class=nav-section-children><a href=../../user_guide/code_generation.html class=nav-link>Code Generation</a>
<a href=../../user_guide/compiler_setup.html class=nav-link>Compiler Setup</a>
<a href=../../user_guide/external_mode.html class=nav-link>External Mode</a>
<a href=../../user_guide/pil_testing.html class=nav-link>PIL Testing</a></div></div><div class=nav-section id=section-block-reference><a href=../../block_reference/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("block-reference"),!0'><span><span class=icon>🧩</span>Block Reference</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("block-reference"),!1'>▶</span></a><div class=nav-section-children><div class=nav-subsection id=section-pwm><a href=../../block_reference/pwm_io/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("pwm"),!0'><span><span class=icon>⚡</span>PWM</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("pwm"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/pwm_io/pwm.html class=nav-block-link>PWM</a>
<a href=../../block_reference/pwm_io/pwm_highspeed.html class=nav-block-link>PWM High-Speed</a>
<a href=../../block_reference/pwm_io/pwm_hs_fep.html class=nav-block-link>PWM HS FEP</a>
<a href=../../block_reference/pwm_io/pwm_highspeed_override.html class=nav-block-link>PWM HS Override</a>
<a href=../../block_reference/pwm_io/mcpwm.html class=nav-block-link>MCPWM (PIC32)</a>
<a href=../../block_reference/pwm_io/pwm_sam7x.html class=nav-block-link>PWM SAM7x</a>
<a href=../../block_reference/pwm_io/pwm_sam7x_override.html class=nav-block-link>PWM SAM7x Override</a>
<a href=../../block_reference/pwm_io/tcc_pwm.html class=nav-block-link>TCC PWM (SAM)</a></div></div><div class=nav-subsection id=section-timers><a href=../../block_reference/timers/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("timers"),!0'><span><span class=icon>⏱️</span>Timers</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("timers"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/timers/timer_config.html class=nav-block-link>Timer Config</a>
<a href=../../block_reference/timers/timer_pil_profiling.html class=nav-block-link>PIL Profiling Timer</a></div></div><div class=nav-subsection id=section-capture-compare><a href=../../block_reference/capture_compare/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("capture-compare"),!0'><span><span class=icon>📏</span>Input Capture / Output Compare</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("capture-compare"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/capture_compare/input_capture.html class=nav-block-link>Input Capture</a>
<a href=../../block_reference/capture_compare/output_compare_hw.html class=nav-block-link>Output Compare (HW)</a>
<a href=../../block_reference/capture_compare/output_compare_sw.html class=nav-block-link>Output Compare (SW)</a></div></div><div class=nav-subsection id=section-adc><a href=../../block_reference/adc/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("adc"),!0'><span><span class=icon>📊</span>ADC</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("adc"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/adc/adc.html class=nav-block-link>ADC (dsPIC)</a>
<a href=../../block_reference/adc/adc_hs_12b.html class=nav-block-link>ADC HS 12-bit</a>
<a href=../../block_reference/adc/adc_highspeed_sar.html class=nav-block-link>ADC High-Speed SAR</a>
<a href=../../block_reference/adc/adc_highspeed_sar_dspic.html class=nav-block-link>ADC HS SAR (dsPIC)</a>
<a href=../../block_reference/adc/adc_same5x.html class=nav-block-link>ADC (SAM E5x)</a>
<a href=../../block_reference/adc/adc_samrh707x.html class=nav-block-link>ADC (SAMRH707x)</a>
<a href=../../block_reference/adc/afec_sam7x.html class=nav-block-link>AFEC (SAM7x)</a></div></div><div class=nav-subsection id=section-communication><a href=../../block_reference/communication/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("communication"),!0'><span><span class=icon>📡</span>Communication</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("communication"),!1'>▶</span></a><div class=nav-section-children><div class=nav-subsection id=section-uart><a href=../../block_reference/communication.html#uart-blocks class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("uart"),!0'><span><span class=icon></span>UART</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("uart"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/communication/uart/uart_config.html class=nav-block-link>UART Config</a>
<a href=../../block_reference/communication/uart/uart_tx.html class=nav-block-link>UART Tx</a>
<a href=../../block_reference/communication/uart/uart_rx.html class=nav-block-link>UART Rx</a>
<a href=../../block_reference/communication/uart/uart_txmatlab.html class=nav-block-link>UART Tx MATLAB</a>
<a href=../../block_reference/communication/uart/uart_break_and_autobaud.html class=nav-block-link>UART Break & Autobaud</a></div></div><div class=nav-subsection id=section-can><a href=../../block_reference/communication.html#can-blocks class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("can"),!0'><span><span class=icon></span>CAN</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("can"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/communication/can/can_config.html class=nav-block-link>CAN Config</a>
<a href=../../block_reference/communication/can/can_tx.html class=nav-block-link>CAN Tx</a>
<a href=../../block_reference/communication/can/can_rx.html class=nav-block-link>CAN Rx</a></div></div><a href=../../block_reference/communication/i2c.html class=nav-block-link>I2C Master/Slave</a>
<a href=../../block_reference/communication/spi.html class=nav-block-link>SPI Master/Slave</a></div></div><div class=nav-subsection id=section-digital-io><a href=../../block_reference/digital_io/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("digital-io"),!0'><span><span class=icon>🔌</span>Digital I/O</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("digital-io"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/digital_io/digital_input.html class=nav-block-link>Digital Input</a>
<a href=../../block_reference/digital_io/digital_output.html class=nav-block-link>Digital Output</a>
<a href=../../block_reference/digital_io/digital_output_read.html class=nav-block-link>Digital Output Read</a>
<a href=../../block_reference/digital_io/digital_output_write.html class=nav-block-link>Digital Output Write</a></div></div><div class=nav-subsection id=section-encoders><a href=../../block_reference/encoders/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("encoders"),!0'><span><span class=icon>🔄</span>Encoders</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("encoders"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/encoders_counters/qei.html class=nav-block-link>QEI (Quadrature Encoder)</a>
<a href=../../block_reference/encoders_counters/pdec.html class=nav-block-link>PDEC (SAM)</a>
<a href=../../block_reference/encoders_counters/qdec_samx.html class=nav-block-link>QDEC (SAM)</a>
<a href=../../block_reference/encoders_counters/change_notification.html class=nav-block-link>Change Notification</a></div></div><div class=nav-subsection id=section-analog-io><a href=../../block_reference/analog_io/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("analog-io"),!0'><span><span class=icon>📉</span>Analog I/O</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("analog-io"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/analog_io/dac_samx.html class=nav-block-link>DAC (SAM)</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html class=nav-block-link>High-Speed Comparator</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=nav-block-link>Comparator w/ Slope</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/op_amp.html class=nav-block-link>Op-Amp</a>
<a href=../../block_reference/analog_io/comparator_opamps_volt_ref/pga.html class=nav-block-link>PGA (Programmable Gain Amp)</a></div></div><div class=nav-subsection id=section-system-config><a href=../../block_reference/system_configuration/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("system-config"),!0'><span><span class=icon>⚙️</span>System Config</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("system-config"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/system_configuration/master.html class=nav-block-link>Master</a>
<a href=../../block_reference/system_configuration/interrupt.html class=nav-block-link>Interrupt</a>
<a href=../../block_reference/system_configuration/compiler_options.html class=nav-block-link>Compiler Options</a>
<a href=../../block_reference/system_configuration/scheduler_options.html class=nav-block-link>Scheduler Options</a>
<a href=../../block_reference/system_configuration/idle_task.html class=nav-block-link>Idle Task</a>
<a href=../../block_reference/system_configuration/mcu_load.html class=nav-block-link>MCU Load</a>
<a href=../../block_reference/system_configuration/mcu_overload.html class=nav-block-link>MCU Overload</a>
<a href=../../block_reference/system_configuration/tasks_state.html class=nav-block-link>Tasks State</a>
<a href=../../block_reference/system_configuration/secondary_core.html class=nav-block-link>Secondary Core</a></div></div><div class=nav-subsection id=section-utility><a href=../../block_reference/utility/index.html class=nav-subsection-title onclick='return event.stopPropagation(),toggleSection("utility"),!0'><span><span class=icon>🔧</span>Utility Blocks</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("utility"),!1'>▶</span></a><div class=nav-section-children><a href=../../block_reference/user_functions/c_function_call.html class=nav-block-link>C Function Call</a>
<a href=../../block_reference/utility/doc.html class=nav-block-link>Documentation Block</a>
<a href=../../block_reference/utility/msi.html class=nav-block-link>MSI (Model Sample Info)</a>
<a href=../../block_reference/utility/port_info.html class=nav-block-link>Port Info</a>
<a href=../../block_reference/utility/timer_info.html class=nav-block-link>Timer Info</a>
<a href=../../block_reference/utility/simulink_reset_config.html class=nav-block-link>Simulink Reset Config</a></div></div></div></div><div class=nav-section id=section-examples><a href=../../examples/index.html class=nav-section-title onclick='return event.stopPropagation(),toggleSection("examples"),!0'><span><span class=icon>📖</span>Examples</span>
<span class=toggle-icon onclick='return event.preventDefault(),event.stopPropagation(),toggleSection("examples"),!1'>▶</span></a><div class=nav-section-children><a href=../../examples/field_weakening.html class=nav-link>Field Weakening</a></div></div><div class=nav-section id=section-github><a href=https://github.com/microchip-technology/mplab-blocksetindex.html class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>💻</span>GitHub</span></a></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=../../index.html>Home</a>
<span>></span>
<a href=../../block_reference/index.html>Block Reference</a>
<span>></span>
<span>Encoder Blocks</span></div><div class=under-construction-banner><span class=icon>⚠️</span>
<strong>Documentation Under Construction</strong> —
This documentation is currently being developed. All information has not been validated by Microchip yet.</div><div class=page-header><h1>Encoder Blocks</h1><div class=page-header-right><img src=../../images/microchip-logo.png alt="Microchip Logo" class=microchip-logo>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>☀️</span>
<span id=theme-text>Light</span></button></div></div><h2 id=overview>Overview</h2><p>Encoder blocks provide hardware-based position and velocity measurement using quadrature encoders, essential for motor control and motion feedback applications. The MPLAB Blockset offers dedicated encoder interfaces (QEI, PDEC, QDEC) that decode incremental encoder signals with zero CPU overhead, enabling precise position tracking and velocity calculation for motor control feedback loops.</p><h2 id=available-encoder-blocks>Available Encoder Blocks</h2><h3 id=mchp_qei---quadrature-encoder-interface-for-dspic>MCHP_QEI - Quadrature Encoder Interface for dsPIC</h3><div class=block-icon-container><a href=encoders_counters/qei.html class=block-card-link><div class=block-icon-image><picture><img src=../../assets/images/blocks/qei/QEI.png alt="QEI Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC30F</span>
<span class=family-tag>dsPIC33F</span>
<span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span></div></div><div class=block-icon-description><strong>Dedicated QEI peripheral for dsPIC</strong> with hardware quadrature decoding, velocity measurement, and index pulse support. - **Hardware Quadrature Decoding**: No CPU overhead for edge counting</div></a></div><hr><h3 id=mchp_pdec---position-decoder-for-sam-arm>MCHP_PDEC - Position Decoder for SAM ARM</h3><div class=block-icon-container><a href=encoders_counters/pdec.html class=block-card-link><div class=block-icon-image><picture><img src=../../assets/images/blocks/qei/PDEC.png alt="PDEC Block Icon"></picture><div class=family-tags><span class=family-tag>SAM</span></div></div><div class=block-icon-description><strong>Advanced position decoder for SAM</strong> with angular position tracking and configurable filtering. - **Angular Position Output**: Direct angle calculation (0-360°)</div></a></div><hr><h3 id=mchp_qdec_samx---quadrature-decoder-using-tc-for-sam>MCHP_QDEC_SAMx - Quadrature Decoder using TC for SAM</h3><div class=block-icon-container><a href=encoders_counters/qdec_samx.html class=block-card-link><div class=block-icon-image><picture><img src=../../assets/images/blocks/qei/QDEC_SAMx.png alt="QDEC_SAMx Block Icon"></picture><div class=family-tags><span class=family-tag>SAM</span></div></div><div class=block-icon-description><strong>Timer/Counter-based quadrature decoder</strong> for SAM devices without dedicated PDEC. - **TC Module Quadrature Mode**: Uses Timer/Counter peripheral</div></a></div><hr><h3 id=mchp_changenotification---software-encoder-decoding>MCHP_ChangeNotification - Software Encoder Decoding</h3><div class=block-icon-container><a href=encoders_counters/change_notification.html class=block-card-link><div class=block-icon-image><picture><img src=../../assets/images/blocks/qei/ChangeNotification.png alt="ChangeNotification Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC30F</span>
<span class=family-tag>dsPIC33F</span>
<span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span>
<span class=family-tag>PIC32</span></div></div><div class=block-icon-description><strong>GPIO interrupt-based encoder decoding</strong> for devices without dedicated QEI/PDEC peripherals. - **Software Decoding**: Interrupt-driven quadrature state machine</div></a></div><hr><h2 id=block-selection-guide>Block Selection Guide</h2><h3 id=by-device-family>By Device Family</h3><table><thead><tr><th>Device Family</th><th>Recommended Block</th><th>Alternative</th><th>Notes</th></tr></thead><tbody><tr><td><strong>dsPIC30F / 33F / 33E</strong></td><td><strong>QEI</strong></td><td>ChangeNotification</td><td>QEI preferred for motor control</td></tr><tr><td><strong>dsPIC33C / 33A</strong></td><td><strong>QEI</strong></td><td>ChangeNotification</td><td>Enhanced QEI with improved filtering</td></tr><tr><td><strong>SAM E5x / D5x / E7x / S7x / V7x</strong></td><td><strong>PDEC</strong></td><td>QDEC_SAMx</td><td>PDEC preferred for angular output</td></tr><tr><td><strong>SAM C20 / C21 / D20 / D21</strong></td><td><strong>QDEC_SAMx</strong></td><td>ChangeNotification</td><td>TC-based quadrature mode</td></tr><tr><td><strong>PIC24</strong></td><td><strong>ChangeNotification</strong></td><td>-</td><td>No dedicated QEI on PIC24</td></tr><tr><td><strong>PIC32</strong></td><td><strong>ChangeNotification</strong></td><td>-</td><td>No dedicated QEI on PIC32</td></tr></tbody></table><h3 id=by-encoder-speed>By Encoder Speed</h3><table><thead><tr><th>Encoder Speed</th><th>Recommended Approach</th><th>Maximum PPR</th><th>Block Choice</th></tr></thead><tbody><tr><td><strong>&lt; 1000 RPM</strong></td><td>Software or Hardware</td><td>Up to 5000 PPR</td><td>ChangeNotification or QEI</td></tr><tr><td><strong>1000-5000 RPM</strong></td><td>Hardware only</td><td>Up to 2048 PPR</td><td>QEI, PDEC, QDEC_SAMx</td></tr><tr><td><strong>5000-10000 RPM</strong></td><td>Hardware with filtering</td><td>Up to 1024 PPR</td><td>QEI (4x mode), PDEC</td></tr><tr><td><strong>> 10000 RPM</strong></td><td>Hardware only, low PPR</td><td>Up to 512 PPR</td><td>QEI with digital filter</td></tr></tbody></table><p><strong>PPR Calculation</strong>: Maximum edge frequency = (RPM × PPR × 4) / 60</p><ul><li>Example: 10000 RPM × 1024 PPR × 4 = 682 kHz edge rate (challenging for most MCUs)</li></ul><h3 id=by-application-requirements>By Application Requirements</h3><table><thead><tr><th>Application</th><th>Block Choice</th><th>Why?</th></tr></thead><tbody><tr><td><strong>3-Phase FOC Motor Control</strong></td><td>QEI (dsPIC) or PDEC (SAM)</td><td>Hardware velocity measurement, zero CPU overhead</td></tr><tr><td><strong>Servo Positioning</strong></td><td>QEI or PDEC</td><td>Index pulse support, high-resolution position</td></tr><tr><td><strong>Robotic Joint</strong></td><td>PDEC or QEI</td><td>Angular position output, multi-turn tracking</td></tr><tr><td><strong>BLDC Sensorless + Encoder Backup</strong></td><td>QEI or PDEC</td><td>Redundant position feedback</td></tr><tr><td><strong>Low-Cost Motor Control</strong></td><td>QDEC_SAMx</td><td>TC-based, available on entry-level SAM</td></tr><tr><td><strong>Legacy Device Encoder</strong></td><td>ChangeNotification</td><td>Software decoding, no dedicated peripheral needed</td></tr></tbody></table><hr><h2 id=encoder-fundamentals>Encoder Fundamentals</h2><h3 id=quadrature-encoding-basics>Quadrature Encoding Basics</h3><p><strong>Quadrature encoder signals:</strong></p><ul><li><strong>Channel A</strong>: Primary position signal</li><li><strong>Channel B</strong>: Phase-shifted signal (90° ahead for forward rotation)</li><li><strong>Index (Z)</strong>: One pulse per revolution (optional, for absolute reference)</li></ul><p><strong>Decoding Modes:</strong></p><ul><li><strong>1x Mode</strong>: Count edges of Channel A only (lowest resolution)</li><li><strong>2x Mode</strong>: Count rising and falling edges of Channel A</li><li><strong>4x Mode</strong>: Count all edges of A and B (highest resolution, 4× PPR)</li></ul><p><strong>Direction Detection:</strong></p><ul><li><strong>Forward</strong>: Channel A leads Channel B by 90°</li><li><strong>Reverse</strong>: Channel B leads Channel A by 90°</li></ul><h3 id=position-and-velocity-calculation>Position and Velocity Calculation</h3><p><strong>Position:</strong></p><pre tabindex=0><code>Position (counts) = Edge_Counter / 4   (for 4x mode)
Position (mechanical degrees) = (Position_counts / PPR) × 360°
Position (electrical degrees) = Position_mechanical × Pole_Pairs
</code></pre><p><strong>Velocity:</strong></p><pre tabindex=0><code>RPM = (Delta_Position / Delta_Time) × 60 / PPR

Example:
- PPR = 1024
- Delta_Position = 5000 counts (in 4x mode)
- Delta_Time = 10 ms (0.01 s)
- RPM = (5000 / (1024 × 4)) / 0.01 × 60 = 7324 RPM
</code></pre><p><strong>Hardware velocity measurement</strong> (QEI, PDEC):</p><ul><li>Uses timer to measure interval between encoder edges</li><li>More accurate at low speeds than position differentiation</li><li>Automatically handles direction</li></ul><hr><h2 id=encoder-wiring-and-electrical-considerations>Encoder Wiring and Electrical Considerations</h2><h3 id=encoder-types>Encoder Types</h3><table><thead><tr><th>Encoder Type</th><th>Outputs</th><th>Voltage</th><th>Recommended Pull</th><th>Use Case</th></tr></thead><tbody><tr><td><strong>Push-Pull (TTL)</strong></td><td>Active high/low</td><td>5V or 3.3V</td><td>None</td><td>High-speed, short cables</td></tr><tr><td><strong>Open Collector</strong></td><td>Open drain</td><td>5-24V</td><td>External pull-up (2.2kΩ - 10kΩ)</td><td>Industrial, long cables</td></tr><tr><td><strong>Differential (RS-422)</strong></td><td>A/A-, B/B-</td><td>5V differential</td><td>Line receiver IC</td><td>Noisy environments, long cables (>10 m)</td></tr></tbody></table><h3 id=noise-immunity>Noise Immunity</h3><p><strong>Digital Filter (QEI/PDEC):</strong></p><ul><li><strong>Purpose</strong>: Reject switch bounce and electrical noise</li><li><strong>Setting</strong>: 3-7 clock cycles typical</li><li><strong>Trade-off</strong>: More filtering = slower response to high-speed edges</li></ul><p><strong>Hardware Recommendations:</strong></p><ul><li><strong>Twisted pair wiring</strong>: Reduces EMI pickup</li><li><strong>Shielded cable</strong>: Ground shield at one end only</li><li><strong>Bypass capacitors</strong>: 100 nF at encoder connector (close to MCU pins)</li><li><strong>Series resistors</strong>: 100Ω on A/B/Z lines (current limiting, ESD protection)</li></ul><hr><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues</h2><h3 id=encoder-not-counting>Encoder Not Counting</h3><p><strong>Check:</strong></p><ul><li>✅ Encoder power supply (5V or 12V/24V for industrial encoders)</li><li>✅ Ground connection between encoder and MCU</li><li>✅ QEI/PDEC peripheral enabled in block</li><li>✅ Pin assignments correct (use Port Info block to verify)</li><li>✅ Encoder actually rotating (use Digital_Input block to check raw signals)</li></ul><h3 id=wrong-direction>Wrong Direction</h3><p><strong>Check:</strong></p><ul><li>✅ Swap Channel A and B in block configuration</li><li>✅ Or use &ldquo;Invert Direction&rdquo; option if available</li><li>✅ Verify encoder wiring matches datasheet</li></ul><h3 id=position-jumps-or-noise>Position Jumps or Noise</h3><p><strong>Check:</strong></p><ul><li>✅ Increase digital filter setting (5-7 clock cycles)</li><li>✅ Add external 100 nF capacitors on A/B/Z lines</li><li>✅ Use shielded twisted pair cable</li><li>✅ Check for EMI sources (PWM switching, motor cables)</li><li>✅ Reduce maximum encoder speed (lower PPR encoder)</li></ul><h3 id=velocity-measurement-unstable>Velocity Measurement Unstable</h3><p><strong>Check:</strong></p><ul><li>✅ Use hardware velocity measurement (QEI/PDEC) instead of position differentiation</li><li>✅ Increase velocity measurement time window</li><li>✅ Add low-pass filter on velocity output (cutoff ~10-50 Hz)</li><li>✅ Check encoder PPR not too high for motor speed range</li></ul><hr><h2 id=device-family-support-summary>Device Family Support Summary</h2><table><thead><tr><th>Encoder Block</th><th>dsPIC30F</th><th>dsPIC33F</th><th>dsPIC33E</th><th>dsPIC33C</th><th>dsPIC33A</th><th>PIC24</th><th>PIC32</th><th>SAM E5x</th><th>SAM E7x</th><th>SAM C2x</th></tr></thead><tbody><tr><td>QEI</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>PDEC</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>✅</td><td>✅</td><td>❌</td></tr><tr><td>QDEC_SAMx</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td><td>⚠️</td><td>⚠️</td><td>✅</td></tr><tr><td>ChangeNotification</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr></tbody></table><p><strong>Legend:</strong> ✅ Full Support | ⚠️ Available but PDEC preferred | ❌ Not Available</p><hr><h2 id=see-also>See Also</h2><p><strong>Related Block Categories:</strong></p><ul><li><strong><a href=../pwm_io/>PWM Blocks</a></strong> - For motor control PWM generation</li><li><strong><a href=../timers/>Timer Blocks</a></strong> - For velocity measurement timing</li><li><strong><a href=../digital_io/>Digital I/O Blocks</a></strong> - For software encoder decoding</li></ul><p><strong>Application Notes:</strong></p><ul><li><a href=https://www.microchip.com/AN1078>AN1078</a> - Sensorless Field-Oriented Control with Encoder Option</li><li><a href=https://www.microchip.com/AN1292>AN1292</a> - Sensorless FOC with Encoder Backup</li><li><a href=https://www.microchip.com/DS70601B>DS70601B</a> - QEI Module Family Reference Manual</li></ul><p><strong>Example Projects:</strong></p><ul><li><a href=../../getting_started/motor_control_examples.html>Motor Control Examples</a> - FOC with encoder feedback</li><li><a href=../../getting_started/board_templates.html>Board Templates</a> - Pre-configured encoder setups</li></ul><hr><p><strong>💡 Quick Selection Guide:</strong></p><ul><li><strong>Using dsPIC for motor control?</strong> → QEI (hardware, zero overhead)</li><li><strong>Using SAM E5x/E7x for motors?</strong> → PDEC (angular output, hardware velocity)</li><li><strong>Using SAM C2x cost-optimized?</strong> → QDEC_SAMx (TC-based)</li><li><strong>Need encoder on any device?</strong> → ChangeNotification (software, universally available)</li><li><strong>High-speed encoder (> 5000 RPM)?</strong> → QEI or PDEC only (hardware required)</li></ul><div class=nav-footer><p>Last updated: October 2025 | MPLAB Blockset Documentation</p><p>&copy; 2025 Microchip Technology Incorporated and its subsidiaries</p><p style=font-size:10px;margin-top:8px;line-height:1.4>The "Microchip" name and logo, the "M" logo, and other names, logos, and brands are registered
and unregistered trademarks of Microchip Technology Incorporated or its affiliates and/or
subsidiaries in the United States and/or other countries ("Microchip Trademarks"). Information
regarding Microchip Trademarks can be found at
<a href=https://www.microchip.com/en-us/about/legal-information/microchip-trademarks target=_blank style=color:var(--accent-primary)>https://www.microchip.com/en-us/about/legal-information/microchip-trademarks</a>.</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
☰</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="🌙",n.textContent="Dark"):(t.textContent="☀️",n.textContent="Light")}(function(){const n=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}}),window.toggleSection=function(e){const t=document.getElementById("section-"+e);if(t&&(t.classList.toggle("expanded"),t.classList.contains("nav-section"))){const n=getExpandedSections();t.classList.contains("expanded")?n.add(e):n.delete(e),localStorage.setItem("expandedSections",JSON.stringify([...n]))}};function getExpandedSections(){const e=localStorage.getItem("expandedSections");return new Set(e?JSON.parse(e):[])}function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;if(n===e){t.classList.add("active");const n=t.closest(".nav-subsection");n&&!n.classList.contains("expanded")&&n.classList.add("expanded");const e=t.closest(".nav-section");if(e&&!e.classList.contains("expanded")){e.classList.add("expanded");const n=e.id.replace("section-",""),t=getExpandedSections();t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t]))}}})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage();const t=document.querySelector(".nav-link.active");if(t){const e=t.closest(".nav-section");if(e&&e.id){const n=e.id.replace("section-",""),t=getExpandedSections();t.has(n)||(t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t])))}}}()</script></body></html>