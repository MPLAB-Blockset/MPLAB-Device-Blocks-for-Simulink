<!doctype html><html lang=en><head><title>System Configuration Blocks - MPLAB Blockset for MATLAB/Simulink</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Microchip Blockset for MATLAB/Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block_reference/system_configuration.html><link rel=icon type=image/x-icon href=../favicon.ico><style>:root{--bg-primary:#f8f9fa;--bg-secondary:white;--bg-tertiary:#f8f9fa;--text-primary:#2c3e50;--text-secondary:#666;--text-tertiary:#6c757d;--text-heading:#003d5c;--border-color:#dee2e6;--border-light:#e1e8ed;--border-medium:#e9ecef;--accent-primary:#0076A8;--accent-secondary:#005a85;--accent-hover:#005580;--accent-light:#e3f2fd;--code-bg:#f4f4f4;--code-text:#c7254e;--pre-bg:linear-gradient(to bottom, #e8e8e8 0%, #f0f0f0 100%);--pre-border:#d0d0d0;--table-hover:#e3f2fd;--table-stripe:#f8f9fa;--note-bg:linear-gradient(to right, #e7f3fe 0%, #f5fbff 100%);--note-border:#2196F3;--note-text:#1976D2;--warning-bg:linear-gradient(to right, #fff9e6 0%, #fffcf0 100%);--warning-border:#ff9800;--warning-text:#f57c00;--shadow-sm:0 2px 4px rgba(0,0,0,0.05);--shadow-md:0 2px 8px rgba(0,0,0,0.08);--shadow-lg:0 2px 12px rgba(0,0,0,0.08)}[data-theme=dark]{--bg-primary:#1a1d23;--bg-secondary:#242831;--bg-tertiary:#2d3139;--text-primary:#e4e6eb;--text-secondary:#adb5bd;--text-tertiary:#8b95a1;--text-heading:#e4e6eb;--border-color:#3a3f4b;--border-light:#3a3f4b;--border-medium:#404654;--accent-primary:#4da6d6;--accent-secondary:#3d8ab5;--accent-hover:#60b4e0;--accent-light:#2d4556;--code-bg:#2d3139;--code-text:#ff6b9d;--pre-bg:linear-gradient(to bottom, #2d3139 0%, #2d3139 100%);--pre-border:#3a3f4b;--table-hover:#2d4556;--table-stripe:#2d3139;--note-bg:linear-gradient(to right, #1e3a52 0%, #1e3a52 100%);--note-border:#4da6d6;--note-text:#66b3e0;--warning-bg:linear-gradient(to right, #3d3520 0%, #3d3520 100%);--warning-border:#ffb347;--warning-text:#ffc870;--shadow-sm:0 2px 4px rgba(0,0,0,0.3);--shadow-md:0 2px 8px rgba(0,0,0,0.4);--shadow-lg:0 2px 12px rgba(0,0,0,0.5)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:8px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:8px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:55px}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-secondary);margin-bottom:16px;padding:10px 14px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover)}.breadcrumbs span{margin:0 8px;color:var(--text-tertiary)}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:transparent;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:table;width:100%;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;margin:24px 0;padding:20px;box-shadow:var(--shadow-md);table-layout:fixed}.block-icon-image{display:table-cell;width:220px;vertical-align:middle;padding-right:20px}.block-icon-image img{width:200px;height:auto;display:block}.block-icon-description{display:table-cell;vertical-align:middle;font-size:16px;line-height:1.7;color:var(--text-primary)}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"System Configuration Blocks","description":"Microchip Blockset for MATLAB\/Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block_reference\/system_configuration.html","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-16","dateModified":"2025-10-16","inLanguage":"en-US"}</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><h2 class=sidebar-title>MPLAB Blockset</h2></div><div class=sidebar-nav><div class=nav-section><a href=../ class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>🏠</span>Home</span></a></div><div class=nav-section id=section-getting-started><div class=nav-section-title onclick='toggleSection("getting-started")'><span><span class=icon>🚀</span>Getting Started</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../getting_started/overview.html class=nav-link>Overview</a>
<a href=../getting_started/installation.html class=nav-link>Installation</a>
<a href=../getting_started/quick_start.html class=nav-link>Quick Start Guide</a>
<a href=../getting_started/board_templates.html class=nav-link>Board Templates</a>
<a href=../getting_started/motor_control_examples.html class=nav-link>Motor Control Examples</a>
<a href=../getting_started/scheduler_multitasking.html class=nav-link>Scheduler & Multitasking</a>
<a href=../getting_started/external_mode_pil.html class=nav-link>External Mode & PIL</a>
<a href=../getting_started/data_visualization.html class=nav-link>Data Visualization</a>
<a href=../getting_started/supported_devices.html class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-user-guide><div class=nav-section-title onclick='toggleSection("user-guide")'><span><span class=icon>📚</span>User Guide</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../user_guide/code_generation.html class=nav-link>Code Generation</a>
<a href=../user_guide/compiler_setup.html class=nav-link>Compiler Setup</a>
<a href=../user_guide/external_mode.html class=nav-link>External Mode</a>
<a href=../user_guide/pil_testing.html class=nav-link>PIL Testing</a></div></div><div class=nav-section id=section-block-reference><div class=nav-section-title onclick='toggleSection("block-reference")'><span><span class=icon>🧩</span>Block Reference</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><div class=nav-subsection id=section-pwm-timers><div class=nav-subsection-title onclick='toggleSection("pwm-timers")'><span><span class=icon>⚡</span>PWM & Timers</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/pwm_io/pwm.html class=nav-block-link>PWM</a>
<a href=../block_reference/pwm_io/pwm_highspeed.html class=nav-block-link>PWM High-Speed</a>
<a href=../block_reference/pwm_io/pwm_hs_fep.html class=nav-block-link>PWM HS FEP</a>
<a href=../block_reference/pwm_io/pwm_highspeed_override.html class=nav-block-link>PWM HS Override</a>
<a href=../block_reference/pwm_io/mcpwm.html class=nav-block-link>MCPWM (PIC32)</a>
<a href=../block_reference/pwm_io/pwm_sam7x.html class=nav-block-link>PWM SAM7x</a>
<a href=../block_reference/pwm_io/pwm_sam7x_override.html class=nav-block-link>PWM SAM7x Override</a>
<a href=../block_reference/pwm_io/tcc_pwm.html class=nav-block-link>TCC PWM (SAM)</a></div></div><div class=nav-subsection id=section-timers><div class=nav-subsection-title onclick='toggleSection("timers")'><span><span class=icon>⏱️</span>Timers</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/timers/timer_config.html class=nav-block-link>Timer Config</a>
<a href=../block_reference/timers/input_capture.html class=nav-block-link>Input Capture</a>
<a href=../block_reference/timers/output_compare_hw.html class=nav-block-link>Output Compare (HW)</a>
<a href=../block_reference/timers/output_compare_sw.html class=nav-block-link>Output Compare (SW)</a>
<a href=../block_reference/timers/timer_pil_profiling.html class=nav-block-link>PIL Profiling Timer</a></div></div><div class=nav-subsection id=section-adc><div class=nav-subsection-title onclick='toggleSection("adc")'><span><span class=icon>📊</span>ADC</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/adc/adc.html class=nav-block-link>ADC (dsPIC)</a>
<a href=../block_reference/adc/adc_hs_12b.html class=nav-block-link>ADC HS 12-bit</a>
<a href=../block_reference/adc/adc_highspeed_sar.html class=nav-block-link>ADC High-Speed SAR</a>
<a href=../block_reference/adc/adc_highspeed_sar_dspic.html class=nav-block-link>ADC HS SAR (dsPIC)</a>
<a href=../block_reference/adc/adc_same5x.html class=nav-block-link>ADC (SAM E5x)</a>
<a href=../block_reference/adc/adc_samrh707x.html class=nav-block-link>ADC (SAMRH707x)</a>
<a href=../block_reference/adc/afec_sam7x.html class=nav-block-link>AFEC (SAM7x)</a></div></div><div class=nav-subsection id=section-communication><div class=nav-subsection-title onclick='toggleSection("communication")'><span><span class=icon>📡</span>Communication</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><div class=nav-subsection id=section-uart><div class=nav-subsection-title onclick='toggleSection("uart")'><span><span class=icon></span>UART</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/communication/uart/uart_config.html class=nav-block-link>UART Config</a>
<a href=../block_reference/communication/uart/uart_tx.html class=nav-block-link>UART Tx</a>
<a href=../block_reference/communication/uart/uart_rx.html class=nav-block-link>UART Rx</a>
<a href=../block_reference/communication/uart/uart_txmatlab.html class=nav-block-link>UART Tx MATLAB</a>
<a href=../block_reference/communication/uart/uart_break_and_autobaud.html class=nav-block-link>UART Break & Autobaud</a></div></div><div class=nav-subsection id=section-can><div class=nav-subsection-title onclick='toggleSection("can")'><span><span class=icon></span>CAN</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/communication/can/can_config.html class=nav-block-link>CAN Config</a>
<a href=../block_reference/communication/can/can_tx.html class=nav-block-link>CAN Tx</a>
<a href=../block_reference/communication/can/can_rx.html class=nav-block-link>CAN Rx</a></div></div><a href=../block_reference/communication/i2c.html class=nav-block-link>I2C Master/Slave</a>
<a href=../block_reference/communication/spi.html class=nav-block-link>SPI Master/Slave</a></div></div><div class=nav-subsection id=section-digital-io><div class=nav-subsection-title onclick='toggleSection("digital-io")'><span><span class=icon>🔌</span>Digital I/O</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/digital_io/digital_input.html class=nav-block-link>Digital Input</a>
<a href=../block_reference/digital_io/digital_output.html class=nav-block-link>Digital Output</a>
<a href=../block_reference/digital_io/digital_output_read.html class=nav-block-link>Digital Output Read</a>
<a href=../block_reference/digital_io/digital_output_write.html class=nav-block-link>Digital Output Write</a></div></div><div class=nav-subsection id=section-encoders><div class=nav-subsection-title onclick='toggleSection("encoders")'><span><span class=icon>🔄</span>Encoders</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/encoders_counters/qei.html class=nav-block-link>QEI (Quadrature Encoder)</a>
<a href=../block_reference/encoders_counters/pdec.html class=nav-block-link>PDEC (SAM)</a>
<a href=../block_reference/encoders_counters/qdec_samx.html class=nav-block-link>QDEC (SAM)</a>
<a href=../block_reference/encoders_counters/change_notification.html class=nav-block-link>Change Notification</a></div></div><div class=nav-subsection id=section-analog-io><div class=nav-subsection-title onclick='toggleSection("analog-io")'><span><span class=icon>📉</span>Analog I/O</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html class=nav-block-link>High-Speed Comparator</a>
<a href=../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=nav-block-link>Comparator w/ Slope</a>
<a href=../block_reference/analog_io/comparator_opamps_volt_ref/op_amp.html class=nav-block-link>Op-Amp</a>
<a href=../block_reference/analog_io/comparator_opamps_volt_ref/pga.html class=nav-block-link>PGA (Programmable Gain Amp)</a>
<a href=../block_reference/analog_io/dac_samx.html class=nav-block-link>DAC (SAM)</a></div></div><div class=nav-subsection id=section-system-config><div class=nav-subsection-title onclick='toggleSection("system-config")'><span><span class=icon>⚙️</span>System Config</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/system_configuration/master.html class=nav-block-link>Master</a>
<a href=../block_reference/system_configuration/interrupt.html class=nav-block-link>Interrupt</a>
<a href=../block_reference/system_configuration/compiler_options.html class=nav-block-link>Compiler Options</a>
<a href=../block_reference/system_configuration/scheduler_options.html class=nav-block-link>Scheduler Options</a>
<a href=../block_reference/system_configuration/idle_task.html class=nav-block-link>Idle Task</a>
<a href=../block_reference/system_configuration/mcu_load.html class=nav-block-link>MCU Load</a>
<a href=../block_reference/system_configuration/mcu_overload.html class=nav-block-link>MCU Overload</a>
<a href=../block_reference/system_configuration/tasks_state.html class=nav-block-link>Tasks State</a>
<a href=../block_reference/system_configuration/secondary_core.html class=nav-block-link>Secondary Core</a></div></div><div class=nav-subsection id=section-utility><div class=nav-subsection-title onclick='toggleSection("utility")'><span><span class=icon>🔧</span>Utility Blocks</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../block_reference/user_functions/c_function_call.html class=nav-block-link>C Function Call</a>
<a href=../block_reference/utility/doc.html class=nav-block-link>Documentation Block</a>
<a href=../block_reference/utility/msi.html class=nav-block-link>MSI (Model Sample Info)</a>
<a href=../block_reference/utility/port_info.html class=nav-block-link>Port Info</a>
<a href=../block_reference/utility/timer_info.html class=nav-block-link>Timer Info</a>
<a href=../block_reference/utility/simulink_reset_config.html class=nav-block-link>Simulink Reset Config</a></div></div></div></div><div class=nav-section id=section-examples><div class=nav-section-title onclick='toggleSection("examples")'><span><span class=icon>📖</span>Examples</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../examples/field_weakening.html class=nav-link>Field Weakening</a></div></div><div class=nav-section id=section-github><a href=https://github.com/microchip-technology/mplab-blockset class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>💻</span>GitHub</span></a></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=../>Home</a>
<span>></span>
<a href=../block_reference.html>Block Reference</a>
<span>></span>
<span>System Configuration Blocks</span></div><div class=under-construction-banner><span class=icon>⚠️</span>
<strong>Documentation Under Construction</strong> —
This documentation is currently being developed. All information has not been validated by Microchip yet.</div><div class=page-header><h1>System Configuration Blocks</h1><div class=page-header-right><img src=../images/microchip-logo.png alt="Microchip Logo" class=microchip-logo>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>☀️</span>
<span id=theme-text>Light</span></button></div></div><h1>System Configuration Blocks</h1><p>Master, Clock, and system-level configuration blocks</p><h2><a href=../block_reference/system_configuration/compiler_options.html>CompilerOptimisation</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_configuration/CompilerOptimisation.svg type=image/svg+xml><img src=../assets/images/blocks/system_configuration/CompilerOptimisation.png alt="Compiler Options Block Icon"></picture><div class=block-icon-description>The <strong>CompilerOptimisation</strong> block configures compiler toolchain, optimization levels, Device Family Pack (DFP) selection, and linker options for controlling code size, execution speed, and build behavior.</div></div><h2 id=compiler-selection>Compiler Selection</h2><table><thead><tr><th>Parameter</th><th>Description</th><th>Options</th></tr></thead><tbody><tr><td>COMP_LIST</td><td>Installed compiler version selection (auto-detected)</td><td>XC16 v1.xx-v2.xx</td></tr><tr><td>LATEST_CMPLR</td><td>Always use latest installed compiler</td><td>on / off</td></tr><tr><td>DFP_LIST</td><td>Device Family Pack version</td><td>from compiler</td></tr><tr><td>CMSIS_DSP</td><td>(ARM)</td><td>CMSIS DSP library for ARM</td></tr></tbody></table><h2 id=optimization-levels>Optimization Levels</h2><table><thead><tr><th>Level</th><th>Speed</th><th>Code Size</th><th>Use Case</th></tr></thead><tbody><tr><td>-O0</td><td>Slowest</td><td>Largest</td><td>Debug - no optimization</td></tr><tr><td>-O1</td><td>Moderate</td><td>Reduced</td><td>Basic optimization</td></tr><tr><td>-O2</td><td>Fast</td><td>Smaller</td><td>Production (recommended)</td></tr><tr><td>-O3</td><td>Fastest</td><td>May increase</td><td>Maximum speed</td></tr><tr><td>-Os</td><td>Varies</td><td>Smallest</td><td>Size-constrained</td></tr></tbody></table><h2 id=dspic-options-16-bit>dsPIC Options (16-bit)</h2><table><thead><tr><th>Option</th><th>Description</th><th>Impact</th></tr></thead><tbody><tr><td>USE_64BIT_DOUBLE</td><td>64-bit doubles vs 32-bit</td><td>2× memory, higher precision</td></tr><tr><td>PROCEDURAL_ABSTRACTION</td><td>Extract common code (-mpa)</td><td>5-15% size reduction</td></tr><tr><td>MCODE</td><td>Code memory model</td><td>small (</td></tr><tr><td>MDATA</td><td>Data memory model</td><td>small (near) / large (far)</td></tr><tr><td>MLARGEARRAY</td><td>Arrays >32KB</td><td>32-bit indexing required</td></tr><tr><td>GC_SECTIONS</td><td>Remove unused code/data</td><td>10-30% size reduction</td></tr></tbody></table><h2 id=armpic32-options-32-bit>ARM/PIC32 Options (32-bit)</h2><table><thead><tr><th>Option</th><th>Description</th><th>Impact</th></tr></thead><tbody><tr><td>OPTIMIZATION_FLTO</td><td>Link-Time Optimization</td><td>5-20% improvement, slow build</td></tr><tr><td>OPTIMIZATION_REORDER</td><td>Reorder for cache locality</td><td>Speed improvement</td></tr><tr><td>CONSERVE_STACK</td><td>Minimize stack usage</td><td>Reduced stack requirements</td></tr></tbody></table><h2 id=debug-options>Debug Options</h2><table><thead><tr><th>Option</th><th>Description</th><th>Output</th></tr></thead><tbody><tr><td>DEBUG_INFO</td><td>Debug symbols in ELF</td><td>Required for debugging</td></tr><tr><td>AssemblyListing</td><td>.lst file generation</td><td>Assembly/source mix</td></tr><tr><td>ProduceHexOutput</td><td>.hex file generation</td><td>Programming file</td></tr><tr><td>MCHP_STACK_USAGE</td><td>Stack usage report (MCHP)</td><td>.su files</td></tr><tr><td>GCC_STACK_USAGE</td><td>Stack usage report (GCC)</td><td>.su files</td></tr></tbody></table><h2 id=linker-configuration>Linker Configuration</h2><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>UseCustom_LinkerScript</td><td>Use custom memory map</td></tr><tr><td>LinkerScript</td><td>Path to .gld/.ld file</td></tr><tr><td>HEAP_SIZE</td><td>Heap allocation (bytes)</td></tr><tr><td>CUSTOM_OPTIM</td><td>Additional compiler flags</td></tr><tr><td>CUSTOM_OPTIM_LD</td><td>Additional linker flags</td></tr></tbody></table><h2 id=math-libraries-dspic>Math Libraries (dsPIC)</h2><table><thead><tr><th>Library</th><th>Speed</th><th>Accuracy</th></tr></thead><tbody><tr><td>Standard</td><td>Moderate</td><td>Full precision</td></tr><tr><td>Fast</td><td>2-3× faster</td><td>Slightly reduced</td></tr><tr><td>Relaxed</td><td>Maximum speed</td><td>Trade precision</td></tr></tbody></table><h2 id=example-configurations>Example Configurations</h2><h3 id=debug>Debug</h3><pre tabindex=0><code>OPTIMIZATION_LEVEL: -O0
DEBUG_INFO: on
GC_SECTIONS: None
→ Largest code, easiest debugging
</code></pre><h3 id=production-speed>Production (Speed)</h3><pre tabindex=0><code>OPTIMIZATION_LEVEL: -O2
PROCEDURAL_ABSTRACTION: on (dsPIC)
OPTIMIZATION_FLTO: on (ARM/PIC32)
GC_SECTIONS: Remove unused
→ Fast execution, moderate size
</code></pre><h3 id=size-constrained>Size-Constrained</h3><pre tabindex=0><code>OPTIMIZATION_LEVEL: -Os
PROCEDURAL_ABSTRACTION: on
GC_SECTIONS: Remove unused
→ Minimum code size
</code></pre><h2 id=see-also>See Also</h2><ul><li>[MCHP_Master] - Compiler auto-configuration</li><li>[MCHP_PortInfo] - Resource visualization</li></ul><h2><a href=../block_reference/system_configuration/idle_task.html>IdleTask</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_functions/IdleTask.svg type=image/svg+xml><img src=../assets/images/blocks/system_functions/IdleTask.png alt="Idle Task Block Icon"></picture><div class=block-icon-description><strong>Idle Task Characteristics:</strong> - <strong>Lowest priority</strong> - Preempted by any scheduled task or interrupt - <strong>Non-deterministic timing</strong> - Execution time varies with CPU load - <strong>Continuous loop</strong> - Runs whenever CPU is idle - <strong>Single instance</strong> - Only one idle task per model - <strong>Power management</strong> - Ideal location for sleep/idle instructions</div></div><h2 id=usage-scenarios>Usage Scenarios</h2><table><thead><tr><th>Application</th><th>Description</th><th>Example Code</th></tr></thead><tbody><tr><td>Power Saving</td><td>Enter low-power mode when idle</td><td>Idle(); (dsPIC) __WFI(); (ARM)</td></tr><tr><td>Watchdog Refresh</td><td>Service watchdog timer in idle loop</td><td>ClrWdt();</td></tr><tr><td>Background Communication</td><td>Process non-critical messages</td><td>Parse low-priority UART data</td></tr><tr><td>Diagnostics</td><td>Monitor system health</td><td>Check stack usage, temperature</td></tr><tr><td>LED Blinking</td><td>Visual heartbeat indicator</td><td>Toggle status LED</td></tr></tbody></table><h2 id=block-configuration>Block Configuration</h2><p>The idle task is implemented using a Simulink Function-Call Subsystem:</p><h2><a href=../block_reference/system_configuration/interrupt.html>Interrupt</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_functions/Interrupt.svg type=image/svg+xml><img src=../assets/images/blocks/system_functions/Interrupt.png alt="Interrupt Block Icon"></picture><div class=block-icon-description>The <strong>Interrupt</strong> block creates interrupt-driven subsystems by connecting peripheral interrupt sources to Simulink triggered subsystems. The block automatically manages interrupt vector configuration, priority levels, and timing synchronization. <strong>Key Capabilities:</strong> - <strong>Automatic interrupt detection</strong> - Discovers all peripheral interrupts in model - <strong>Dynamic interrupt list</strong> - Popup shows only available interrupts from active peripherals - <strong>Priority management</strong> - Configure interrupt priority levels (device-dependent) - <strong>Multiple timing modes</strong> - Base rate, periodic trigger, or hardware timer-based - <strong>Context preservation</strong> - Automatic FPU context save/restore (PIC32 with FPU)</div></div><h2 id=interrupt-sources>Interrupt Sources</h2><h3 id=peripheral-interrupts-auto-detected>Peripheral Interrupts (Auto-detected)</h3><p>The block automatically detects interrupts from peripheral blocks in your model:</p><h2><a href=../block_reference/system_configuration/master.html>Master</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_configuration/Master.svg type=image/svg+xml><img src=../assets/images/blocks/system_configuration/Master.png alt="Master Block Icon"></picture><div class=block-icon-description><div class=warning style="background-color:#fff3cd;border-left:4px solid #ffc107;padding:15px;margin:20px 0">CRITICAL: The Master block is MANDATORY in every MCHP Blockset model. This is always the FIRST block to add to any new model. Without it, no other MCHP blocks will function. Master Block The <strong>Master</strong> block is the central configuration block for the entire MCHP Blockset. It defines the target microcontroller, clock configuration, peripheral initialization, compiler settings, and code generation options. All other MCHP blocks depend on parameters set in this block. <strong>Primary Functions:</strong> - <strong>Target Selection</strong> - Choose from 800+ supported Microchip microcontrollers - <strong>Clock Configuration</strong> - Configure oscillator, PLL, and system clocks (FCY/FOSC) - <strong>Fuse Settings</strong> - Set device configuration bits (watchdog, code protection, etc.) - <strong>Build System</strong> - Configure compiler paths, optimization, and project settings - <strong>External Mode</strong> - Enable real-time data monitoring via UART - <strong>PIL Testing</strong> - Processor-in-the-Loop test framework configuration</div>## Supported Devices The Master block supports <strong>800+ Microchip microcontrollers</strong> across multiple families:</div></div><h3 id=16-bit-dscmcu-families>16-bit DSC/MCU Families</h3><table><thead><tr><th>Family</th><th>Examples</th><th>Features</th><th>Applications</th></tr></thead><tbody><tr><td>dsPIC30F</td><td>30F1010, 30F2020, 30F6015</td><td>Legacy DSC, basic DSP engine</td><td>Motor control, power supplies</td></tr><tr><td>dsPIC33F</td><td>33FJ128MC802, 33FJ256GP710A</td><td>Enhanced DSP, DMA, advanced PWM</td><td>Digital power, motor control</td></tr><tr><td>dsPIC33E</td><td>33EP512MU810, 33EP256MC710</td><td>PPS, DMA, high-speed ADC</td><td>Motor control, instrumentation</td></tr><tr><td>dsPIC33C</td><td>33CK64MC105, 33CH128MP508</td><td>Dual-core options, high-speed PWM</td><td>Motor control, power conversion</td></tr><tr><td>dsPIC33A</td><td>(Latest)</td><td>33AK128MC106, 33AK512MPS512</td><td>Advanced PWM with FEP, 12-bit ADC</td></tr><tr><td>PIC24F/H</td><td>24F16KL402, 24FJ256GB110</td><td>General-purpose MCU, low power</td><td>Portable, battery-powered apps</td></tr></tbody></table><h3 id=32-bit-mcu-families>32-bit MCU Families</h3><table><thead><tr><th>Family</th><th>Examples</th><th>Features</th><th>Applications</th></tr></thead><tbody><tr><td>PIC32MK</td><td>32MK0512MCF064, 32MK1024GPE100</td><td>MIPS M5150, FPU, motor control</td><td>Advanced motor control</td></tr><tr><td>PIC32MZ</td><td>32MZ2048EFM144, 32MZ1024ECH144</td><td>High-performance MIPS, crypto</td><td>IoT, connectivity, graphics</td></tr><tr><td>PIC32MX</td><td>32MX795F512L, 32MX440F256H</td><td>USB, Ethernet, graphics</td><td>HMI, connectivity</td></tr><tr><td>PIC32A</td><td>(New)</td><td>32AK1216GC41036</td><td>Next-gen 32-bit architecture</td></tr></tbody></table><h3 id=arm-based-families-sam>ARM-based Families (SAM)</h3><table><thead><tr><th>Family</th><th>Core</th><th>Examples</th><th>Features</th></tr></thead><tbody><tr><td>SAME70</td><td>Cortex-M7</td><td>SAME70Q21B, SAME70N21B</td><td>300 MHz, FPU, DSP, Ethernet</td></tr><tr><td>SAMS70</td><td>Cortex-M7</td><td>SAMS70Q21B</td><td>High-speed processing, security</td></tr><tr><td>SAMV71</td><td>Cortex-M7</td><td>SAMV71Q21B</td><td>Automotive, CAN-FD, safety</td></tr><tr><td>SAME5x</td><td>Cortex-M4F</td><td>SAME54P20A</td><td>120 MHz, crypto, low power</td></tr><tr><td>SAMC2x</td><td>Cortex-M0+</td><td>SAMC21N18A</td><td>Motor control, cost-optimized</td></tr><tr><td>SAMD2x</td><td>Cortex-M0+</td><td>SAMD21G18A</td><td>Ultra-low power, IoT</td></tr><tr><td>PIC32CZ</td><td>Cortex-M7</td><td>PIC32CZ_MC70</td><td>High-performance, security</td></tr></tbody></table><h2 id=block-parameters>Block Parameters</h2><h3 id=target-configuration>Target Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Values/Range</th></tr></thead><tbody><tr><td>PICREF</td><td>Microcontroller selection. Dynamic popup filtered by supported families with oscillator support verification.</td><td>800+ devices</td></tr><tr><td>PACKAGE</td><td>(SAM only)</td><td>Package selection for ARM devices (affects pin availability).</td></tr></tbody></table><h3 id=clock-configuration>Clock Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Values/Range</th></tr></thead><tbody><tr><td>OSCILLATOR_SELECT</td><td>Primary oscillator source selection. Options dynamically updated based on chip capabilities.</td><td>• Internal Fast RC (FRC)</td></tr><tr><td>QUARTZ</td><td>Crystal/resonator frequency when using external oscillator.</td><td>0.4 MHz to 40 MHz</td></tr><tr><td>ACTIV_PLL</td><td>Enable Phase-Locked Loop for frequency multiplication.</td><td>on / off</td></tr><tr><td>MIPS_DESIRED</td><td>Target instruction cycle frequency (FCY). Automatically calculates PLL settings.</td><td>Device-specific</td></tr><tr><td>ACLKCON</td><td>(dsPIC33C only)</td><td>Auxiliary clock configuration for PWM and other peripherals.</td></tr><tr><td>CPUDIV</td><td>(SAM Cortex-M0+ only)</td><td>CPU clock divider selection.</td></tr><tr><td>VDD_range</td><td>(SAM Cortex-M0+ only)</td><td>Operating voltage range (affects flash wait states).</td></tr></tbody></table><pre><code>        Select oscillator source (internal RC or external crystal/clock)
        If using crystal, specify frequency in QUARTZ parameter
        Enable PLL if higher frequencies are required
        Set MIPS_DESIRED to target frequency - PLL multipliers are calculated automatically
        Block display shows achieved MIPS/MHz on the diagram
</code></pre><h3 id=fuse-configuration-device-configuration-bits>Fuse Configuration (Device Configuration Bits)</h3><p>The Master block exposes device-specific configuration fuses extracted from Microchip XML specifications. Available fuses depend on the selected chip.</p><h2><a href=../block_reference/system_configuration/mcu_load.html>MCU LOAD</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_configuration/MCU_Load.svg type=image/svg+xml><img src=../assets/images/blocks/system_configuration/MCU_Load.png alt="MCU Load Block Icon"></picture><div class=block-icon-description>The <strong>MCU LOAD</strong> block measures and outputs the real-time CPU utilization percentage, providing essential feedback for performance optimization and schedulability verification.</div></div><h2 id=output-signal>Output Signal</h2><table><thead><tr><th>Output</th><th>Data Type</th><th>Range</th><th>Description</th></tr></thead><tbody><tr><td>CPU_Load</td><td>single (float)</td><td>0.0 to 100.0</td><td>Percentage of CPU time used by scheduled tasks</td></tr></tbody></table><h2 id=measurement-method>Measurement Method</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#000;font-weight:700>//</span> CPU load calculation:
</span></span><span style=display:flex><span>CPU_Load = (<span style=color:#099>1</span> <span style=color:#000;font-weight:700>-</span> (IdleTime <span style=color:#000;font-weight:700>/</span> TotalTime)) × <span style=color:#099>100</span><span style=color:#998;font-style:italic>%</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Where:
</span></span><span style=display:flex><span>  IdleTime = Time spent in idle task
</span></span><span style=display:flex><span>  TotalTime = Total elapsed time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Measurement window: Configurable averaging period
</span></span></code></pre></div><h2 id=usage-guidelines>Usage Guidelines</h2><table><thead><tr><th>CPU Load Range</th><th>Status</th><th>Recommendation</th></tr></thead><tbody><tr><td>0-60%</td><td>✓ Healthy</td><td>Good margin for additional features</td></tr><tr><td>60-80%</td><td>⚠ Moderate</td><td>Monitor closely, optimize if growing</td></tr><tr><td>80-95%</td><td>⚠ High</td><td>Optimize code, reduce sample rates</td></tr><tr><td>>95%</td><td>❌ Critical</td><td>System unstable, immediate action required</td></tr></tbody></table><h2 id=example-application>Example Application</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Monitor CPU load and trigger optimization</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CPU_Load → Display (live monitoring)
</span></span><span style=display:flex><span>CPU_Load → Compare (threshold <span style=color:#099>80</span><span style=color:#998;font-style:italic>%)</span>
</span></span><span style=display:flex><span>         → LED warning <span style=color:#000;font-weight:700>if</span> exceeded
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% External mode:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% - Tune parameters while monitoring load</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% - Find maximum achievable performance</span>
</span></span></code></pre></div><h2 id=see-also>See Also</h2><ul><li>[MCHP_MCU_OVERLOAD] - Overload detection and recovery</li><li>[MCHP_Tasks_State] - Task execution monitoring</li><li>[MCHP_Scheduler_Options] - Scheduler configuration</li></ul><h2><a href=../block_reference/system_configuration/mcu_overload.html>MCU OVERLOAD</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_configuration/MCU_Overload.svg type=image/svg+xml><img src=../assets/images/blocks/system_configuration/MCU_Overload.png alt="MCU Overload Block Icon"></picture><div class=block-icon-description>The <strong>MCU OVERLOAD</strong> block detects when scheduled tasks miss their deadlines and provides diagnostic information for identifying the cause of overload conditions.</div></div><h2 id=output-signals>Output Signals</h2><table><thead><tr><th>Output</th><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td>Overload_Flag</td><td>boolean</td><td>1 = Task missed deadline, 0 = Normal operation</td></tr><tr><td>Overload_TaskID</td><td>uint8</td><td>ID of task that caused overload (if known)</td></tr><tr><td>Overload_Count</td><td>uint32</td><td>Cumulative count of overload events</td></tr></tbody></table><h2 id=overload-conditions>Overload Conditions</h2><table><thead><tr><th>Condition</th><th>Detection Method</th><th>Response</th></tr></thead><tbody><tr><td>Task execution exceeds period</td><td>Compare execution time vs sample time</td><td>Set flag, log task ID</td></tr><tr><td>Queue overflow</td><td>Task triggered while already queued</td><td>Set flag, increment counter</td></tr><tr><td>Preemption cascade</td><td>Multiple nested preemptions</td><td>Set flag, identify root task</td></tr></tbody></table><h2 id=example-usage>Example Usage</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Overload detection and safe shutdown</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Overload_Flag → LED (visual warning)
</span></span><span style=display:flex><span>Overload_Flag → Switch
</span></span><span style=display:flex><span>             → <span style=color:#000;font-weight:700>if</span> (<span style=color:#099>1</span>): Enter safe mode
</span></span><span style=display:flex><span>                        Disable non<span style=color:#000;font-weight:700>-</span>critical tasks
</span></span><span style=display:flex><span>                        Log diagnostics
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Recovery strategy:</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>if</span> Overload_Count <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#099>10</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic>% Persistent overload - reduce functionality</span>
</span></span><span style=display:flex><span>    Disable_MotorControl();
</span></span><span style=display:flex><span>    Enable_SafeShutdown();
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>end</span>
</span></span></code></pre></div><h2 id=debugging-with-overload-block>Debugging with Overload Block</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Analysis workflow:</span>
</span></span><span style=display:flex><span><span style=color:#099>1.</span> Connect outputs to scopes<span style=color:#000;font-weight:700>/</span>displays
</span></span><span style=display:flex><span><span style=color:#099>2.</span> Run model and observe overload <span style=color:#000;font-weight:700>events</span>
</span></span><span style=display:flex><span><span style=color:#099>3.</span> Identify TaskID causing overload
</span></span><span style=display:flex><span><span style=color:#099>4.</span> Use MCHP_Tasks_State to see task interactions
</span></span><span style=display:flex><span><span style=color:#099>5.</span> Optimize identified task or reduce sample rate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Common overload patterns:</span>
</span></span><span style=display:flex><span>TaskID=<span style=color:#099>1</span>, Count growing → Base rate task too slow
</span></span><span style=display:flex><span>TaskID varies randomly → Interrupt storms
</span></span><span style=display:flex><span>TaskID=<span style=color:#099>0</span> (idle) → Should never happen (check config)
</span></span></code></pre></div><h2 id=see-also>See Also</h2><ul><li>[MCHP_MCU_LOAD] - CPU utilization monitoring</li><li>[MCHP_Tasks_State] - Task state visibility</li><li>[MCHP_Scheduler_Options] - Overload behavior config</li></ul><h2><a href=../block_reference/system_configuration/scheduler_options.html>Scheduler Options</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_configuration/SchedulerOptions.svg type=image/svg+xml><img src=../assets/images/blocks/system_configuration/SchedulerOptions.png alt="Scheduler Options Block Icon"></picture><div class=block-icon-description>The <strong>Scheduler Options</strong> block configures the behavior of the built-in <strong>Rate Monotonic Scheduler</strong> used for multitasking in MCHP Blockset models. The scheduler manages execution of multiple tasks at different sample rates with <strong>preemptive priority-based scheduling</strong>. <strong>Rate Monotonic Scheduling Principle:</strong> - <strong>Highest rate = Highest priority</strong> - Faster tasks automatically get higher priority - <strong>Preemptive execution</strong> - Higher priority tasks interrupt lower priority tasks - <strong>Deterministic behavior</strong> - Guaranteed timing if schedulability conditions are met - <strong>Automatic priority assignment</strong> - No manual priority configuration needed</div></div><h2 id=rate-monotonic-scheduler-architecture>Rate Monotonic Scheduler Architecture</h2><h3 id=task-priority-assignment>Task Priority Assignment</h3><table><thead><tr><th>Sample Time</th><th>Priority Level</th><th>Can Preempt</th><th>Example Use</th></tr></thead><tbody><tr><td>Base rate (fastest)</td><td>40 (highest)</td><td>All slower tasks</td><td>Fast current loop (50 µs)</td></tr><tr><td>2× base rate</td><td>30</td><td>Slower tasks</td><td>Speed controller (100 µs)</td></tr><tr><td>10× base rate</td><td>20</td><td>Even slower tasks</td><td>Position controller (500 µs)</td></tr><tr><td>100× base rate</td><td>10</td><td>Background tasks</td><td>Communication (5 ms)</td></tr><tr><td>Triggered subsystems</td><td>Configurable</td><td>Based on config</td><td>Interrupt-driven tasks</td></tr></tbody></table><h2 id=block-parameters>Block Parameters</h2><h3 id=task-overload-behavior>Task Overload Behavior</h3><table><thead><tr><th>Option</th><th>Behavior</th><th>Use Case</th><th>Risk</th></tr></thead><tbody><tr><td>Queue the task</td><td>(queue length is 1)</td><td>• If task is still running when next trigger occurs, queue ONE additional execution</td><td>• Task executes twice back-to-back when current run completes</td></tr><tr><td>Skip this task execution once</td><td>• If task is running, skip the triggered execution</td><td>• Resume normal execution at next trigger</td><td>• Overload does not accumulate</td></tr><tr><td>Delay all new tasks</td><td>until end of overload</td><td>• All task triggers are blocked during overload</td><td>• Tasks resume when overloaded task completes</td></tr></tbody></table><h3 id=overload-behavior-comparison>Overload Behavior Comparison</h3><pre tabindex=0><code>// Task with 10 ms period, execution takes 12 ms (overload)

Option 1: Queue (queue length = 1)
t=0ms:   Task starts
t=10ms:  Trigger → QUEUED (1 pending)
t=12ms:  Task ends → immediately starts queued execution
t=20ms:  Trigger → LOST (queue full)
t=24ms:  Task ends
t=30ms:  Normal execution resumes

Option 2: Skip once
t=0ms:   Task starts
t=10ms:  Trigger → SKIPPED
t=12ms:  Task ends
t=20ms:  Normal execution
t=30ms:  Normal execution

Option 3: Delay all
t=0ms:   Task starts
t=10ms:  Trigger → DELAYED
t=12ms:  Task ends → delayed trigger executes immediately
t=24ms:  Task ends (ran at t=12)
t=30ms:  Back to normal (with 2ms delay accumulated)
</code></pre><h2 id=multitasking-configuration>Multitasking Configuration</h2><h3 id=simulink-configuration-requirements>Simulink Configuration Requirements</h3><ul><li><strong>Solver Type:</strong> Fixed-step (required for code generation)</li></ul><pre tabindex=0><code>Configuration Parameters → Solver
Type: Fixed-step
Solver: discrete (no continuous states)
</code></pre><ul><li><strong>Sample Times:</strong> Define task rates as integer multiples</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span>Base rate: <span style=color:#099>50e-6</span>     <span style=color:#998;font-style:italic>% 50 µs (20 kHz)</span>
</span></span><span style=display:flex><span>Task <span style=color:#099>1</span>:    <span style=color:#099>100e-6</span>    <span style=color:#998;font-style:italic>% 2× base rate</span>
</span></span><span style=display:flex><span>Task <span style=color:#099>2</span>:    <span style=color:#099>500e-6</span>    <span style=color:#998;font-style:italic>% 10× base rate</span>
</span></span><span style=display:flex><span>Task <span style=color:#099>3</span>:    <span style=color:#099>5e-3</span>      <span style=color:#998;font-style:italic>% 100× base rate</span>
</span></span></code></pre></div><ul><li><strong>Tasking Mode:</strong> Enable multitasking in configuration</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span>Configuration Parameters → Code Generation → Interface
</span></span><span style=display:flex><span>Multi<span style=color:#000;font-weight:700>-</span>instance code: off
</span></span><span style=display:flex><span>Single output<span style=color:#000;font-weight:700>/</span>update <span style=color:#000;font-weight:700>function</span>: off
</span></span><span style=display:flex><span>⚠️ Let MCHP blockset manage tasking automatically
</span></span></code></pre></div><h3 id=scheduling-algorithm>Scheduling Algorithm</h3><pre tabindex=0><code>// Simplified scheduler pseudocode

        execute_task(highest);
        mark_complete(highest);
        ready_tasks = check_triggered_tasks();
    }
}
</code></pre><h2 id=examples>Examples</h2><h3 id=example-1-motor-control-application>Example 1: Motor Control Application</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Three-level motor control hierarchy</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Base rate: 50 µs, Overload: Queue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Sample times:
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Current loop:    <span style=color:#099>50e-6</span>    (Priority <span style=color:#099>40</span> <span style=color:#000;font-weight:700>-</span> highest)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Speed loop:      <span style=color:#099>500e-6</span>   (Priority <span style=color:#099>30</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Position loop:   <span style=color:#099>5e-3</span>     (Priority <span style=color:#099>20</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Communication:   <span style=color:#099>100e-3</span>   (Priority <span style=color:#099>10</span> <span style=color:#000;font-weight:700>-</span> lowest)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Scheduler Options:
</span></span><span style=display:flex><span>TaskOverloadBehaviour: <span style=color:#d14>&#39;Queue the task (queue length is 1)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Result: Current loop can preempt all others</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Brief overloads are queued and caught up</span>
</span></span></code></pre></div><h3 id=example-2-data-acquisition-system>Example 2: Data Acquisition System</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Robust data logging with guaranteed timing</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Base rate: 100 µs, Overload: Delay all</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Sample times:
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Fast ADC:       <span style=color:#099>100e-6</span>   (Priority <span style=color:#099>40</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Slow sensors:   <span style=color:#099>10e-3</span>    (Priority <span style=color:#099>30</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Data logging:   <span style=color:#099>100e-3</span>   (Priority <span style=color:#099>20</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Display update: <span style=color:#099>500e-3</span>   (Priority <span style=color:#099>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Scheduler Options:
</span></span><span style=display:flex><span>TaskOverloadBehaviour: <span style=color:#d14>&#39;Delay all new tasks until end of overload&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Result: No samples lost, timing may shift temporarily</span>
</span></span></code></pre></div><h3 id=example-3-communication-system>Example 3: Communication System</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Non-critical monitoring allows missed samples</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Base rate: 1 ms, Overload: Skip</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Sample times:
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Protocol handler: <span style=color:#099>1e-3</span>   (Priority <span style=color:#099>40</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Data processing:  <span style=color:#099>10e-3</span>  (Priority <span style=color:#099>30</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> Status update:    <span style=color:#099>100e-3</span> (Priority <span style=color:#099>20</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Scheduler Options:
</span></span><span style=display:flex><span>TaskOverloadBehaviour: <span style=color:#d14>&#39;Skip this task execution once&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Result: Skipped status updates acceptable</span>
</span></span></code></pre></div><h2 id=schedulability-analysis>Schedulability Analysis</h2><h3 id=liu--layland-utilization-bound>Liu & Layland Utilization Bound</h3><p>For Rate Monotonic Scheduling, the system is schedulable if:</p><h2><a href=../block_reference/system_configuration/secondary_core.html>SECONDARY CORE</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/dual_core/SECONDARY_core.svg type=image/svg+xml><img src=../assets/images/blocks/dual_core/SECONDARY_core.png alt="Secondary Core Block Icon"></picture><div class=block-icon-description>The <strong>SECONDARY CORE</strong> block configures the secondary (slave) core in dual-core dsPIC33CH devices.</div></div><h2 id=dual-core-architecture>Dual-Core Architecture</h2><table><thead><tr><th>Feature</th><th>Master Core</th><th>Secondary Core</th></tr></thead><tbody><tr><td>Device Name</td><td>33CH128MP508</td><td>33CH128MP508S1</td></tr><tr><td>Purpose</td><td>System management</td><td>Real-time control</td></tr><tr><td>Communication</td><td>MSI mailboxes, FIFO</td><td>MSI mailboxes, FIFO</td></tr></tbody></table><h2 id=development-workflow>Development Workflow</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Step 1: Create MASTER core project</span>
</span></span><span style=display:flex><span>Model: Master_Control.slx
</span></span><span style=display:flex><span>MCHP_Master → PICREF: <span style=color:#099>33</span>CH128MP508 (master)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Step 2: Create SECONDARY core project</span>
</span></span><span style=display:flex><span>Model: Secondary_FastLoop.slx
</span></span><span style=display:flex><span>MCHP_Master → PICREF: <span style=color:#099>33</span>CH128MP508S1 (slave)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Step 3: Build both projects</span>
</span></span><span style=display:flex><span><span style=color:#099>1.</span> Build secondary → generates .s image file
</span></span><span style=display:flex><span><span style=color:#099>2.</span> Build master → links secondary image
</span></span><span style=display:flex><span><span style=color:#099>3.</span> Program master (includes slave code)
</span></span></code></pre></div><h2 id=see-also>See Also</h2><ul><li>[MCHP_Master] - Target device configuration</li></ul><h2><a href=../block_reference/system_configuration/tasks_state.html>Tasks State</a></h2><div class=block-icon-container><picture class=block-icon-image><source srcset=../assets/images/blocks/system_configuration/TasksState.svg type=image/svg+xml><img src=../assets/images/blocks/system_configuration/TasksState.png alt="Tasks State Block Icon"></picture><div class=block-icon-description>The <strong>Tasks State</strong> block outputs the current execution state of all scheduled tasks, providing real-time visibility into the multitasking scheduler behavior. Essential for debugging timing issues and verifying task preemption.</div></div><h2 id=output-signals>Output Signals</h2><table><thead><tr><th>Output</th><th>Data Type</th><th>Description</th><th>Values</th></tr></thead><tbody><tr><td>TaskID</td><td>uint8</td><td>Currently executing task identifier</td><td>0 = Idle</td></tr><tr><td>TaskState</td><td>uint8 vector</td><td>State of each task (length = number of tasks)</td><td>0 = Idle</td></tr><tr><td>Overload</td><td>boolean</td><td>Overload condition detected</td><td>0 = Normal</td></tr></tbody></table><h2 id=example-usage>Example Usage</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#998;font-style:italic>% Monitor task execution and detect preemption</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Connect outputs:</span>
</span></span><span style=display:flex><span>TaskID     → Display or scope
</span></span><span style=display:flex><span>TaskState  → Vector scope (multi<span style=color:#000;font-weight:700>-</span>line)
</span></span><span style=display:flex><span>Overload   → Alert<span style=color:#000;font-weight:700>/</span>LED
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% Interpretation:</span>
</span></span><span style=display:flex><span>TaskID = <span style=color:#099>1</span>  → Base rate task executing
</span></span><span style=display:flex><span>TaskID = <span style=color:#099>2</span>  → First subrate task executing
</span></span><span style=display:flex><span>TaskID = <span style=color:#099>0</span>  → Idle task (no scheduled work)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>% TaskState example for 3-task system:</span>
</span></span><span style=display:flex><span>[<span style=color:#099>2</span> <span style=color:#099>1</span> <span style=color:#099>0</span>]  → Task <span style=color:#099>1</span> running, Task <span style=color:#099>2</span> ready, Task <span style=color:#099>3</span> idle
</span></span><span style=display:flex><span>[<span style=color:#099>1</span> <span style=color:#099>2</span> <span style=color:#099>0</span>]  → Task <span style=color:#099>1</span> ready, Task <span style=color:#099>2</span> running (preempted Task <span style=color:#099>1</span>)
</span></span></code></pre></div><h2 id=debugging-scenarios>Debugging Scenarios</h2><table><thead><tr><th>Observation</th><th>Diagnosis</th><th>Action</th></tr></thead><tbody><tr><td>TaskID always 1</td><td>Base rate never completes</td><td>Reduce base rate execution time</td></tr><tr><td>TaskID never changes</td><td>Single task consuming all CPU</td><td>Check for infinite loops</td></tr><tr><td>Overload = 1 frequently</td><td>Tasks missing deadlines</td><td>Lower sample rates or optimize code</td></tr><tr><td>TaskState shows [2 2 2]</td><td>Multiple tasks trying to run simultaneously (impossible)</td><td>Check scheduler configuration</td></tr></tbody></table><h2 id=see-also>See Also</h2><ul><li>[MCHP_Scheduler_Options] - Scheduler configuration</li><li>[MCHP_MCU_LOAD] - CPU load measurement</li><li>[MCHP_MCU_OVERLOAD] - Overload detection</li></ul><div class=nav-footer><p>Last updated: January 2025 | MPLAB Blockset Documentation</p><p>&copy; 2025 Microchip Technology Inc. All rights reserved.</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
☰</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="🌙",n.textContent="Dark"):(t.textContent="☀️",n.textContent="Light")}(function(){const n=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}}),window.toggleSection=function(e){const t=document.getElementById("section-"+e);if(t&&(t.classList.toggle("expanded"),t.classList.contains("nav-section"))){const n=getExpandedSections();t.classList.contains("expanded")?n.add(e):n.delete(e),localStorage.setItem("expandedSections",JSON.stringify([...n]))}};function getExpandedSections(){const e=localStorage.getItem("expandedSections");return new Set(e?JSON.parse(e):[])}function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;if(n===e){t.classList.add("active");const n=t.closest(".nav-subsection");n&&!n.classList.contains("expanded")&&n.classList.add("expanded");const e=t.closest(".nav-section");if(e&&!e.classList.contains("expanded")){e.classList.add("expanded");const n=e.id.replace("section-",""),t=getExpandedSections();t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t]))}}})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage();const t=document.querySelector(".nav-link.active");if(t){const e=t.closest(".nav-section");if(e&&e.id){const n=e.id.replace("section-",""),t=getExpandedSections();t.has(n)||(t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t])))}}}()</script></body></html>