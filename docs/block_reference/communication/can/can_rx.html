<!doctype html><html lang=en><head><title>CAN Rx - MPLAB Blockset for MATLAB/Simulink</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Microchip Blockset for MATLAB/Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block_reference/communication/can/can_rx.html><link rel=icon type=image/x-icon href=../../../favicon.ico><style>:root{--bg-primary:#f8f9fa;--bg-secondary:white;--bg-tertiary:#f8f9fa;--text-primary:#2c3e50;--text-secondary:#666;--text-tertiary:#6c757d;--text-heading:#003d5c;--border-color:#dee2e6;--border-light:#e1e8ed;--border-medium:#e9ecef;--accent-primary:#0076A8;--accent-secondary:#005a85;--accent-hover:#005580;--accent-light:#e3f2fd;--code-bg:#f4f4f4;--code-text:#c7254e;--pre-bg:linear-gradient(to bottom, #e8e8e8 0%, #f0f0f0 100%);--pre-border:#d0d0d0;--table-hover:#e3f2fd;--table-stripe:#f8f9fa;--note-bg:linear-gradient(to right, #e7f3fe 0%, #f5fbff 100%);--note-border:#2196F3;--note-text:#1976D2;--warning-bg:linear-gradient(to right, #fff9e6 0%, #fffcf0 100%);--warning-border:#ff9800;--warning-text:#f57c00;--shadow-sm:0 2px 4px rgba(0,0,0,0.05);--shadow-md:0 2px 8px rgba(0,0,0,0.08);--shadow-lg:0 2px 12px rgba(0,0,0,0.08)}[data-theme=dark]{--bg-primary:#1a1d23;--bg-secondary:#242831;--bg-tertiary:#2d3139;--text-primary:#e4e6eb;--text-secondary:#adb5bd;--text-tertiary:#8b95a1;--text-heading:#e4e6eb;--border-color:#3a3f4b;--border-light:#3a3f4b;--border-medium:#404654;--accent-primary:#4da6d6;--accent-secondary:#3d8ab5;--accent-hover:#60b4e0;--accent-light:#2d4556;--code-bg:#2d3139;--code-text:#ff6b9d;--pre-bg:linear-gradient(to bottom, #2d3139 0%, #2d3139 100%);--pre-border:#3a3f4b;--table-hover:#2d4556;--table-stripe:#2d3139;--note-bg:linear-gradient(to right, #1e3a52 0%, #1e3a52 100%);--note-border:#4da6d6;--note-text:#66b3e0;--warning-bg:linear-gradient(to right, #3d3520 0%, #3d3520 100%);--warning-border:#ffb347;--warning-text:#ffc870;--shadow-sm:0 2px 4px rgba(0,0,0,0.3);--shadow-md:0 2px 8px rgba(0,0,0,0.4);--shadow-lg:0 2px 12px rgba(0,0,0,0.5)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:8px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:8px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:55px}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-secondary);margin-bottom:16px;padding:10px 14px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover)}.breadcrumbs span{margin:0 8px;color:var(--text-tertiary)}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:transparent;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:table;width:100%;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;margin:24px 0;padding:20px;box-shadow:var(--shadow-md);table-layout:fixed}.block-icon-image{display:table-cell;width:220px;vertical-align:middle;padding-right:20px}.block-icon-image img{width:200px;height:auto;display:block}.block-icon-description{display:table-cell;vertical-align:middle;font-size:16px;line-height:1.7;color:var(--text-primary)}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"CAN Rx","description":"Microchip Blockset for MATLAB\/Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block_reference\/communication\/can\/can_rx.html","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-16","dateModified":"2025-10-16","inLanguage":"en-US"}</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><h2 class=sidebar-title>MPLAB Blockset</h2></div><div class=sidebar-nav><div class=nav-section><a href=../../../ class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>🏠</span>Home</span></a></div><div class=nav-section id=section-getting-started><div class=nav-section-title onclick='toggleSection("getting-started")'><span><span class=icon>🚀</span>Getting Started</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../getting_started/overview.html class=nav-link>Overview</a>
<a href=../../../getting_started/installation.html class=nav-link>Installation</a>
<a href=../../../getting_started/quick_start.html class=nav-link>Quick Start Guide</a>
<a href=../../../getting_started/board_templates.html class=nav-link>Board Templates</a>
<a href=../../../getting_started/motor_control_examples.html class=nav-link>Motor Control Examples</a>
<a href=../../../getting_started/scheduler_multitasking.html class=nav-link>Scheduler & Multitasking</a>
<a href=../../../getting_started/external_mode_pil.html class=nav-link>External Mode & PIL</a>
<a href=../../../getting_started/data_visualization.html class=nav-link>Data Visualization</a>
<a href=../../../getting_started/supported_devices.html class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-user-guide><div class=nav-section-title onclick='toggleSection("user-guide")'><span><span class=icon>📚</span>User Guide</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../user_guide/code_generation.html class=nav-link>Code Generation</a>
<a href=../../../user_guide/compiler_setup.html class=nav-link>Compiler Setup</a>
<a href=../../../user_guide/external_mode.html class=nav-link>External Mode</a>
<a href=../../../user_guide/pil_testing.html class=nav-link>PIL Testing</a></div></div><div class=nav-section id=section-block-reference><div class=nav-section-title onclick='toggleSection("block-reference")'><span><span class=icon>🧩</span>Block Reference</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><div class=nav-subsection id=section-pwm-timers><div class=nav-subsection-title onclick='toggleSection("pwm-timers")'><span><span class=icon>⚡</span>PWM & Timers</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/pwm_io/pwm.html class=nav-block-link>PWM</a>
<a href=../../../block_reference/pwm_io/pwm_highspeed.html class=nav-block-link>PWM High-Speed</a>
<a href=../../../block_reference/pwm_io/pwm_hs_fep.html class=nav-block-link>PWM HS FEP</a>
<a href=../../../block_reference/pwm_io/pwm_highspeed_override.html class=nav-block-link>PWM HS Override</a>
<a href=../../../block_reference/pwm_io/mcpwm.html class=nav-block-link>MCPWM (PIC32)</a>
<a href=../../../block_reference/pwm_io/pwm_sam7x.html class=nav-block-link>PWM SAM7x</a>
<a href=../../../block_reference/pwm_io/pwm_sam7x_override.html class=nav-block-link>PWM SAM7x Override</a>
<a href=../../../block_reference/pwm_io/tcc_pwm.html class=nav-block-link>TCC PWM (SAM)</a></div></div><div class=nav-subsection id=section-timers><div class=nav-subsection-title onclick='toggleSection("timers")'><span><span class=icon>⏱️</span>Timers</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/timers/timer_config.html class=nav-block-link>Timer Config</a>
<a href=../../../block_reference/timers/input_capture.html class=nav-block-link>Input Capture</a>
<a href=../../../block_reference/timers/output_compare_hw.html class=nav-block-link>Output Compare (HW)</a>
<a href=../../../block_reference/timers/output_compare_sw.html class=nav-block-link>Output Compare (SW)</a>
<a href=../../../block_reference/timers/timer_pil_profiling.html class=nav-block-link>PIL Profiling Timer</a></div></div><div class=nav-subsection id=section-adc><div class=nav-subsection-title onclick='toggleSection("adc")'><span><span class=icon>📊</span>ADC</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/adc/adc.html class=nav-block-link>ADC (dsPIC)</a>
<a href=../../../block_reference/adc/adc_hs_12b.html class=nav-block-link>ADC HS 12-bit</a>
<a href=../../../block_reference/adc/adc_highspeed_sar.html class=nav-block-link>ADC High-Speed SAR</a>
<a href=../../../block_reference/adc/adc_highspeed_sar_dspic.html class=nav-block-link>ADC HS SAR (dsPIC)</a>
<a href=../../../block_reference/adc/adc_same5x.html class=nav-block-link>ADC (SAM E5x)</a>
<a href=../../../block_reference/adc/adc_samrh707x.html class=nav-block-link>ADC (SAMRH707x)</a>
<a href=../../../block_reference/adc/afec_sam7x.html class=nav-block-link>AFEC (SAM7x)</a></div></div><div class=nav-subsection id=section-communication><div class=nav-subsection-title onclick='toggleSection("communication")'><span><span class=icon>📡</span>Communication</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><div class=nav-subsection id=section-uart><div class=nav-subsection-title onclick='toggleSection("uart")'><span><span class=icon></span>UART</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/communication/uart/uart_config.html class=nav-block-link>UART Config</a>
<a href=../../../block_reference/communication/uart/uart_tx.html class=nav-block-link>UART Tx</a>
<a href=../../../block_reference/communication/uart/uart_rx.html class=nav-block-link>UART Rx</a>
<a href=../../../block_reference/communication/uart/uart_txmatlab.html class=nav-block-link>UART Tx MATLAB</a>
<a href=../../../block_reference/communication/uart/uart_break_and_autobaud.html class=nav-block-link>UART Break & Autobaud</a></div></div><div class=nav-subsection id=section-can><div class=nav-subsection-title onclick='toggleSection("can")'><span><span class=icon></span>CAN</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/communication/can/can_config.html class=nav-block-link>CAN Config</a>
<a href=../../../block_reference/communication/can/can_tx.html class=nav-block-link>CAN Tx</a>
<a href=../../../block_reference/communication/can/can_rx.html class=nav-block-link>CAN Rx</a></div></div><a href=../../../block_reference/communication/i2c.html class=nav-block-link>I2C Master/Slave</a>
<a href=../../../block_reference/communication/spi.html class=nav-block-link>SPI Master/Slave</a></div></div><div class=nav-subsection id=section-digital-io><div class=nav-subsection-title onclick='toggleSection("digital-io")'><span><span class=icon>🔌</span>Digital I/O</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/digital_io/digital_input.html class=nav-block-link>Digital Input</a>
<a href=../../../block_reference/digital_io/digital_output.html class=nav-block-link>Digital Output</a>
<a href=../../../block_reference/digital_io/digital_output_read.html class=nav-block-link>Digital Output Read</a>
<a href=../../../block_reference/digital_io/digital_output_write.html class=nav-block-link>Digital Output Write</a></div></div><div class=nav-subsection id=section-encoders><div class=nav-subsection-title onclick='toggleSection("encoders")'><span><span class=icon>🔄</span>Encoders</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/encoders_counters/qei.html class=nav-block-link>QEI (Quadrature Encoder)</a>
<a href=../../../block_reference/encoders_counters/pdec.html class=nav-block-link>PDEC (SAM)</a>
<a href=../../../block_reference/encoders_counters/qdec_samx.html class=nav-block-link>QDEC (SAM)</a>
<a href=../../../block_reference/encoders_counters/change_notification.html class=nav-block-link>Change Notification</a></div></div><div class=nav-subsection id=section-analog-io><div class=nav-subsection-title onclick='toggleSection("analog-io")'><span><span class=icon>📉</span>Analog I/O</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html class=nav-block-link>High-Speed Comparator</a>
<a href=../../../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=nav-block-link>Comparator w/ Slope</a>
<a href=../../../block_reference/analog_io/comparator_opamps_volt_ref/op_amp.html class=nav-block-link>Op-Amp</a>
<a href=../../../block_reference/analog_io/comparator_opamps_volt_ref/pga.html class=nav-block-link>PGA (Programmable Gain Amp)</a>
<a href=../../../block_reference/analog_io/dac_samx.html class=nav-block-link>DAC (SAM)</a></div></div><div class=nav-subsection id=section-system-config><div class=nav-subsection-title onclick='toggleSection("system-config")'><span><span class=icon>⚙️</span>System Config</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/system_configuration/master.html class=nav-block-link>Master</a>
<a href=../../../block_reference/system_configuration/interrupt.html class=nav-block-link>Interrupt</a>
<a href=../../../block_reference/system_configuration/compiler_options.html class=nav-block-link>Compiler Options</a>
<a href=../../../block_reference/system_configuration/scheduler_options.html class=nav-block-link>Scheduler Options</a>
<a href=../../../block_reference/system_configuration/idle_task.html class=nav-block-link>Idle Task</a>
<a href=../../../block_reference/system_configuration/mcu_load.html class=nav-block-link>MCU Load</a>
<a href=../../../block_reference/system_configuration/mcu_overload.html class=nav-block-link>MCU Overload</a>
<a href=../../../block_reference/system_configuration/tasks_state.html class=nav-block-link>Tasks State</a>
<a href=../../../block_reference/system_configuration/secondary_core.html class=nav-block-link>Secondary Core</a></div></div><div class=nav-subsection id=section-utility><div class=nav-subsection-title onclick='toggleSection("utility")'><span><span class=icon>🔧</span>Utility Blocks</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../block_reference/user_functions/c_function_call.html class=nav-block-link>C Function Call</a>
<a href=../../../block_reference/utility/doc.html class=nav-block-link>Documentation Block</a>
<a href=../../../block_reference/utility/msi.html class=nav-block-link>MSI (Model Sample Info)</a>
<a href=../../../block_reference/utility/port_info.html class=nav-block-link>Port Info</a>
<a href=../../../block_reference/utility/timer_info.html class=nav-block-link>Timer Info</a>
<a href=../../../block_reference/utility/simulink_reset_config.html class=nav-block-link>Simulink Reset Config</a></div></div></div></div><div class=nav-section id=section-examples><div class=nav-section-title onclick='toggleSection("examples")'><span><span class=icon>📖</span>Examples</span>
<span class=toggle-icon>▶</span></div><div class=nav-section-children><a href=../../../examples/field_weakening.html class=nav-link>Field Weakening</a></div></div><div class=nav-section id=section-github><a href=https://github.com/microchip-technology/mplab-blockset class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>💻</span>GitHub</span></a></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=../../../>Home</a>
<span>></span>
<a href=../../../block_reference.html>Block Reference</a>
<span>></span>
<span>CAN Rx</span></div><div class=under-construction-banner><span class=icon>⚠️</span>
<strong>Documentation Under Construction</strong> —
This documentation is currently being developed. All information has not been validated by Microchip yet.</div><div class=page-header><h1>CAN Rx</h1><div class=page-header-right><img src=../../../images/microchip-logo.png alt="Microchip Logo" class=microchip-logo>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>☀️</span>
<span id=theme-text>Light</span></button></div></div><div class=block-icon-container><picture class=block-icon-image><source srcset=../../../assets/images/blocks/bus_can/CAN_Rx.svg type=image/svg+xml><img src=../../../assets/images/blocks/bus_can/CAN_Rx.png alt="CAN Rx Block Icon"></picture><div class=block-icon-description>The <strong>CAN Rx</strong> block receives CAN messages from the CAN bus network and outputs the message ID, data length, and payload data. The block supports flexible message filtering with standard (11-bit) and extended (29-bit) identifiers, multiple filter types (exact match, range, mask), and configurable storage in dedicated buffers or FIFOs. This block requires a <strong>CAN Config</strong> block in the same model to configure the CAN peripheral. Multiple CAN Rx blocks can be used to receive different messages on the same CAN module, each with its own filter configuration.</div></div><p>The <strong>CAN Rx</strong> block receives CAN messages from the CAN bus network and outputs the message ID, data length, and payload data. The block supports flexible message filtering with standard (11-bit) and extended (29-bit) identifiers, multiple filter types (exact match, range, mask), and configurable storage in dedicated buffers or FIFOs.</p><p>This block requires a <strong>CAN Config</strong> block in the same model to configure the CAN peripheral. Multiple CAN Rx blocks can be used to receive different messages on the same CAN module, each with its own filter configuration.</p><h2 id=block-ports>Block Ports</h2><h3 id=output-ports>Output Ports</h3><table><thead><tr><th>Port Name</th><th>Data Type</th><th>Size</th><th>Description</th></tr></thead><tbody><tr><td>MsgID</td><td>uint16 or uint32</td><td>Scalar (1)</td><td>Received message identifier (uint16 for standard, uint32 for extended)</td></tr><tr><td>MsgLen</td><td>uint8</td><td>Scalar (1)</td><td>Number of data bytes received (0-8 for CAN 2.0, 0-64 for CAN-FD)</td></tr><tr><td>Rx[N]</td><td>uint8</td><td>Vector (1-64)</td><td>Received message data bytes</td></tr></tbody></table><h2 id=block-parameters>Block Parameters</h2><h3 id=can-module-selection>CAN Module Selection</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>CAN Module</td><td>Selects which CAN peripheral to use (must match CAN Config block)</td><td>CAN0, CAN1, MCAN0, MCAN1 (device-dependent)</td><td>CAN0 or MCAN0</td></tr></tbody></table><h3 id=message-configuration>Message Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>Message Type</td><td>Identifier format to receive</td><td>Standard (11-bit ID), Extended (29-bit ID)</td><td>Standard</td></tr><tr><td>Filter Type</td><td>How to match incoming messages</td><td>Classic (Mask), Dual ID, Range</td><td>Classic</td></tr></tbody></table><h3 id=filter-configuration-classic-mode>Filter Configuration (Classic Mode)</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>Message ID</td><td>CAN identifier to match (hexadecimal)</td><td>0x000-0x7FF (standard), 0x00000000-0x1FFFFFFF (extended)</td><td>0x100</td></tr><tr><td>Message ID Mask</td><td>Bitwise mask (1=must match, 0=don&rsquo;t care)</td><td>0x000-0x7FF (standard), 0x00000000-0x1FFFFFFF (extended)</td><td>0x7FF (exact match)</td></tr></tbody></table><h3 id=filter-configuration-dual-id-mode>Filter Configuration (Dual ID Mode)</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>Message ID 1</td><td>First CAN identifier to accept</td><td>0x000-0x7FF (standard), 0x00000000-0x1FFFFFFF (extended)</td><td>0x100</td></tr><tr><td>Message ID 2</td><td>Second CAN identifier to accept</td><td>0x000-0x7FF (standard), 0x00000000-0x1FFFFFFF (extended)</td><td>0x101</td></tr></tbody></table><h3 id=filter-configuration-range-mode>Filter Configuration (Range Mode)</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>Message ID 1 (Min)</td><td>Minimum CAN identifier in range</td><td>0x000-0x7FF (standard), 0x00000000-0x1FFFFFFF (extended)</td><td>0x100</td></tr><tr><td>Message ID 2 (Max)</td><td>Maximum CAN identifier in range</td><td>0x000-0x7FF (standard), 0x00000000-0x1FFFFFFF (extended)</td><td>0x10F</td></tr></tbody></table><h3 id=buffer-configuration>Buffer Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Options</th><th>Default</th></tr></thead><tbody><tr><td>Data Store</td><td>Reception buffer type</td><td>RX FIFO 0, RX FIFO 1, Rx Buffer</td><td>RX FIFO 0</td></tr></tbody></table><p><strong>Tip:</strong> Use <strong>Rx Buffer</strong> for single high-priority messages that must never be lost. Use <strong>RX FIFO 0/1</strong> for multiple messages of the same type that can be queued.</p><h3 id=data-configuration>Data Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Valid Values</th><th>Default</th></tr></thead><tbody><tr><td>Data Type</td><td>Data output port type</td><td>uint8, uint16, uint32</td><td>uint8</td></tr><tr><td>Data Size</td><td>Size of data output port</td><td>1-8 (CAN 2.0), 1-64 (CAN-FD)</td><td>8</td></tr></tbody></table><h2 id=message-filtering>Message Filtering</h2><h3 id=filter-types-explained>Filter Types Explained</h3><h4 id=1-classic-filter-mask-based>1. Classic Filter (Mask-Based)</h4><p>Compares incoming message ID with configured ID using bitwise AND with mask:</p><pre tabindex=0><code>Filter Logic:
  Accept if: (Incoming_ID &amp; Mask) == (Filter_ID &amp; Mask)

Example 1 - Exact Match:
  Filter ID:  0x123
  Mask:       0x7FF (all bits must match)
  Accepts:    0x123 only
  Rejects:    0x122, 0x124, all others

Example 2 - Partial Match:
  Filter ID:  0x100
  Mask:       0x7F0 (ignore lower 4 bits)
  Accepts:    0x100, 0x101, 0x102...0x10F (16 IDs)
  Rejects:    0x110, 0x0FF, all others

Example 3 - Don&#39;t Care Bits:
  Filter ID:  0x200
  Mask:       0x700 (only check upper 3 bits)
  Accepts:    0x200-0x2FF (256 IDs)
  Rejects:    0x100, 0x300, all others
</code></pre><h4 id=2-dual-id-filter>2. Dual ID Filter</h4><p>Accepts messages matching either of two specific IDs:</p><pre tabindex=0><code>Filter Logic:
  Accept if: (Incoming_ID == ID1) OR (Incoming_ID == ID2)

Example:
  ID1:        0x200
  ID2:        0x300
  Accepts:    0x200, 0x300 only
  Rejects:    All other IDs

Use Case:
  - Two related messages to same processing
  - Status from two different sources
  - Command and acknowledgment pairing
</code></pre><h4 id=3-range-filter>3. Range Filter</h4><p>Accepts any message ID within a specified range (inclusive):</p><pre tabindex=0><code>Filter Logic:
  Accept if: (ID1 &lt;= Incoming_ID &lt;= ID2)

Example:
  ID1 (Min):  0x100
  ID2 (Max):  0x10F
  Accepts:    0x100, 0x101, 0x102...0x10F (16 IDs)
  Rejects:    0x0FF, 0x110, all others

Use Case:
  - Group of related sensors (0x200-0x20F)
  - Module address range (0x300-0x3FF)
  - Priority band filtering
</code></pre><h3 id=filter-priority-and-matching-order>Filter Priority and Matching Order</h3><p>When multiple filters are configured, the CAN controller processes them in order:</p><pre tabindex=0><code>Incoming Message (ID: 0x105)
        │
        ▼
   ┌─────────────────┐
   │ Standard Filters │ (processed first)
   │  Filter 1: 0x100-0x10F (Range) → MATCH! → RX FIFO 0
   │  Filter 2: 0x105 (Exact)       → (not checked, already matched)
   └─────────────────┘
        │
        ▼
   ┌─────────────────┐
   │ Extended Filters │ (only if no standard match)
   │  Filter 3: ...
   └─────────────────┘

Result: Message accepted by Filter 1, stored in RX FIFO 0
</code></pre><h2 id=buffer-modes-comparison>Buffer Modes Comparison</h2><table><thead><tr><th>Feature</th><th>RX FIFO 0/1</th><th>Rx Buffer</th></tr></thead><tbody><tr><td>Storage Type</td><td>First-In-First-Out queue</td><td>Dedicated single message buffer</td></tr><tr><td>Capacity</td><td>Multiple messages (configured depth)</td><td>One message per buffer</td></tr><tr><td>Overflow Behavior</td><td>Newest message overwrites oldest (watermark)</td><td>New message rejected if not read</td></tr><tr><td>Use Case</td><td>Multiple messages of same type, bursty traffic</td><td>Single critical message, guaranteed delivery</td></tr><tr><td>Filter Sharing</td><td>Multiple filters can target same FIFO</td><td>One filter per buffer</td></tr><tr><td>Read Access</td><td>Sequential (FIFO order)</td><td>Direct (always latest)</td></tr></tbody></table><h2 id=implementation-details>Implementation Details</h2><h3 id=reception-process-sam-e7x-mcan>Reception Process (SAM E7x MCAN)</h3><pre tabindex=0><code>/* CAN Rx Implementation */

    /* Extract message header */
    msg-&gt;id = rxBuf-&gt;ID;
    msg-&gt;extended = rxBuf-&gt;XTD;
    msg-&gt;rtr = rxBuf-&gt;RTR;
    msg-&gt;dlc = rxBuf-&gt;DLC;

    /* Determine actual data length from DLC */

    /* Copy data from buffer */

    /* Get filter index that matched */
    msg-&gt;filter_idx = rxBuf-&gt;FIDX;

    /* Acknowledge reception */

### Filter Configuration (SAM E5x/C2x)
</code></pre><p>/* Standard ID Filter Setup */
void CAN_ConfigStandardFilter(uint8_t filterIdx,
uint16_t id1, uint16_t id2,
FilterType_t type,</p><pre><code>/* Configure filter based on type */

    case FILTER_DUAL:
        filter-&gt;MCAN_SIDFE_0 =
            MCAN_SIDFE_0_SFT(1) |        // Dual ID filter
            MCAN_SIDFE_0_SFID1(id1) |    // First ID
            MCAN_SIDFE_0_SFID2(id2) |    // Second ID
            MCAN_SIDFE_0_SFEC(action);
        break;

    case FILTER_CLASSIC:
        filter-&gt;MCAN_SIDFE_0 =
            MCAN_SIDFE_0_SFT(2) |        // Classic filter
            MCAN_SIDFE_0_SFID1(id1) |    // Filter ID
            MCAN_SIDFE_0_SFID2(id2) |    // Mask
            MCAN_SIDFE_0_SFEC(action);
        break;
}

/* Flush cache to ensure filter is written */
SCB_CleanDCache_by_Addr((uint32_t*)filter, sizeof(*filter));
</code></pre><p>}</p><pre tabindex=0><code>
## Block Usage Examples

### Example 1: Single ID Reception

**Application:** Receive motor speed command (ID 0x100)
</code></pre><p>Simulink Model:
CAN Rx
(ID: 0x100)
┌──────────┐
CAN Bus ─────────→│ MsgID │────→ [Check ID = 0x100]
│ MsgLen │────→ [Validate length]
│ Rx[8] │────→ [speed_cmd, mode, &mldr;]
└──────────┘</p><p>Configuration:</p><ul><li>CAN Module: CAN0</li><li>Message Type: Standard (11-bit)</li><li>Filter Type: Classic</li><li>Message ID: 0x100</li><li>Mask: 0x7FF (exact match)</li><li>Data Store: Rx Buffer</li><li>Data Size: 8 bytes</li></ul><p>Filter Behavior:
Accepts: ID 0x100 only
Rejects: All other IDs</p><pre tabindex=0><code>
### Example 2: ID Range Reception

**Application:** Receive sensor data from multiple nodes (ID 0x200-0x20F)
</code></pre><p>Simulink Model:
CAN Rx
(ID: 0x200-0x20F)
┌──────────┐
CAN Bus ─────────→│ MsgID │────→ [Node ID = MsgID - 0x200]
│ MsgLen │────→ [Validate]
│ Rx[4] │────→ [temp, hum, pres, rsv]
└──────────┘
│
▼
┌─────────────┐
│ Demux by ID │
│ (Switch) │
└─────────────┘
│ │ │ │
▼ ▼ ▼ ▼
Node0&mldr;Node15</p><p>Configuration:</p><ul><li>Message Type: Standard</li><li>Filter Type: Range</li><li>ID1 (Min): 0x200</li><li>ID2 (Max): 0x20F</li><li>Data Store: RX FIFO 0</li><li>Data Size: 4 bytes</li></ul><p>Filter Behavior:
Accepts: 0x200, 0x201, 0x202&mldr;0x20F (16 IDs)
Rejects: 0x1FF, 0x210, all others</p><pre tabindex=0><code>
### Example 3: Broadcast Reception

**Application:** Receive network-wide broadcast messages
</code></pre><p>Network Topology:
┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐
│Node 1│ │Node 2│ │Node 3│ │Node 4│
└───┬──┘ └───┬──┘ └───┬──┘ └───┬──┘
└──────────┴──────────┴──────────┘
CAN Bus (250 kbps)</p><p>Master broadcasts: ID 0x000 (time sync, emergency stop)
All nodes receive using CAN Rx:</p><p>Configuration:</p><ul><li>Message Type: Standard</li><li>Filter Type: Classic</li><li>Message ID: 0x000</li><li>Mask: 0x7FF (exact match)</li><li>Data Store: RX FIFO 0 (all nodes)</li></ul><p>Broadcast Use Cases:</p><ul><li>Network time synchronization</li><li>Emergency stop commands</li><li>Configuration updates</li><li>State machine transitions</li></ul><pre tabindex=0><code>
### Example 4: Multi-Filter Node

**Application:** Motor controller receiving commands and status
</code></pre><p>Motor Control Node:
┌────────────────────────────────────┐
│ │
│ CAN Rx (0x100) │
│ → Motor Command │
│ [speed_setpoint][mode][enable] │
│ │
│ CAN Rx (0x200-0x20F) │
│ → Sensor Feedback Range │
│ [sensor_id][value][status] │
│ │
│ CAN Rx (0x000) │
│ → Emergency Broadcast │
│ [emergency_stop][reason] │
│ │
└────────────────────────────────────┘
▲
│
CAN Bus</p><p>Filter Configuration (3 CAN Rx blocks):</p><ol><li>Command: ID=0x100, Mask=0x7FF → Rx Buffer</li><li>Sensors: ID1=0x200, ID2=0x20F (Range) → RX FIFO 0</li><li>Emergency: ID=0x000, Mask=0x7FF → Rx Buffer</li></ol><p>Priority:</p><ul><li>0x000: Highest (emergency - dedicated buffer)</li><li>0x100: High (command - dedicated buffer)</li><li>0x200-0x20F: Medium (sensors - FIFO queue)</li></ul><pre tabindex=0><code>
### Example 5: CAN-FD Reception (SAM E7x)

**Application:** Receive firmware update packets with 64-byte payload
</code></pre><p>Firmware Update Protocol:
CAN Rx (CAN-FD)
(ID: 0x500)
┌──────────────┐
CAN-FD Bus ──────→│ MsgID │────→ 0x500 (update packet)
(2 Mbps data) │ MsgLen │────→ 64 (bytes)
│ Rx[64] │────→ [packet_data]
└──────────────┘
│
▼
┌──────────────┐
│ Packet Parser│
│ [seq][data] │
└──────────────┘</p><p>Configuration:</p><ul><li>CAN Module: MCAN0</li><li>Enable CAN-FD: On</li><li>Message Type: Standard</li><li>Filter Type: Classic</li><li>Message ID: 0x500</li><li>Mask: 0x7FF</li><li>Data Store: RX FIFO 0</li><li>Data Size: 64 bytes</li></ul><p>Performance:</p><ul><li>64 bytes per packet</li><li>~1000 packets/sec @ 2 Mbps data phase</li><li>~64 kB/sec throughput</li><li>Firmware update time: ~16 sec for 1 MB</li></ul><pre tabindex=0><code>
## Troubleshooting

### Common Reception Issues


            
                Missing CAN Config block in model
                CAN module mismatch between Config and Rx blocks
                Incorrect filter configuration (ID/mask mismatch)
                No messages with matching ID on bus
                Bus-off error state or physical connection issue
            
            Solutions:
            
                Verify CAN Config block exists and matches Rx block CAN module
                Use CAN bus analyzer to confirm expected messages are present
                Test with broadest filter first (mask=0x000, accept all)
                Check filter type matches incoming message type (standard vs extended)
                Verify bus termination and hardware connections


            
                Cache coherency issues (ARM Cortex-M7 with DCache)
                Data type mismatch between Tx and Rx
                Buffer overrun (FIFO overflow)
                Endianness mismatch (multi-byte values)
            
            Solutions:
            
                Place CAN buffers in non-cached memory (TCM) on SAM E7x
                Use cache invalidate before reading (SCB_InvalidateDCache_by_Addr)
                Ensure consistent data types across network nodes
                Increase FIFO depth or use dedicated Rx buffer
                Verify byte order for 16/32-bit values


            
                Verify message type matches (standard vs extended ID)
                Check mask calculation: 1=must match, 0=don&#39;t care
                Test with exact match first (mask=0x7FF or 0x1FFFFFFF)
                Verify ID1 ≤ ID2 for range filters
                Check for filter ordering conflicts (first match wins)

### FIFO Overflow Handling

| Issue | Symptom | Solution |
|---|---|---|
| Messages lost | Missing sequence numbers, gaps in data | Increase FIFO depth, reduce message rate, process faster |
| FIFO full error | Overflow interrupt, watermark exceeded | Monitor fill level, implement flow control |
| Old data received | Stale messages processed | Flush FIFO on overflow, timestamp validation |
| Unpredictable behavior | Intermittent message loss | Use dedicated buffer for critical messages |

### Debug Checklist

- ✓ Verify CAN Config block present and configured correctly
- ✓ Check CAN module selection matches between Config and Rx blocks
- ✓ Confirm message type (standard/extended) matches filter configuration
- ✓ Test filter with broadest setting first (accept all IDs)
- ✓ Use CAN bus analyzer to verify transmitted messages
- ✓ Check filter mask calculation (1=match, 0=ignore)
- ✓ Verify data size matches expected message length
- ✓ Monitor FIFO fill level for overflow conditions
- ✓ Test with simple constant ID before complex filtering
- ✓ Check cache coherency on ARM Cortex-M7 devices

## Filter Configuration Examples

### Common Filter Patterns
</code></pre><p>/* Example 1: Accept single ID (0x123) */
Message ID: 0x123
Mask: 0x7FF (all bits must match)
Result: Accepts 0x123 only</p><p>/* Example 2: Accept range (0x100-0x10F) */
Filter Type: Range
ID1 (Min): 0x100
ID2 (Max): 0x10F
Result: Accepts 16 IDs from 0x100 to 0x10F</p><p>/* Example 3: Accept two specific IDs */
Filter Type: Dual
ID1: 0x200
ID2: 0x300
Result: Accepts 0x200 or 0x300 only</p><p>/* Example 4: Accept group (0x200-0x2FF, ignore lower byte) */
Message ID: 0x200
Mask: 0x700 (check upper 3 bits only)
Result: Accepts 0x200-0x2FF (256 IDs)</p><p>/* Example 5: Accept all (broadcast receiver) */
Message ID: 0x000
Mask: 0x000 (no bits need to match)
Result: Accepts all IDs (0x000-0x7FF)</p><pre tabindex=0><code>
## Related Blocks

- [CAN Config] - Configure CAN peripheral and buffers
- [CAN Tx] - Transmit CAN messages
- [Digital Output] - Control CAN transceiver enable pins
- [Interrupt Config] - Configure CAN reception interrupts

## References

- ISO 11898-1:2015 - CAN Protocol Specification
- Bosch CAN FD Specification Version 1.0
- [SAM E70/S70/V70/V71 Family Datasheet (DS60001527)] - MCAN Module
- [SAM E5x/D5x Family Datasheet (DS60001507)] - CAN Module
- Application Note: CAN Message Filtering and Buffer Management (search [Microchip Portal])
- Application Note: CAN-FD Implementation and Migration (search [Microchip Portal])



## See Also

### Datasheets

- [SAM E70/S70/V70/V71 Family Datasheet (DS60001527)](https://www.microchip.com/DS60001527)
- [SAM E5x/D5x Family Datasheet (DS60001507)](https://www.microchip.com/DS60001507)

### Other

- [Microchip Portal](https://www.microchip.com/en-us/search)
- [Microchip Portal](https://www.microchip.com/en-us/search)
</code></pre><div class=nav-footer><p>Last updated: January 2025 | MPLAB Blockset Documentation</p><p>&copy; 2025 Microchip Technology Inc. All rights reserved.</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
☰</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="🌙",n.textContent="Dark"):(t.textContent="☀️",n.textContent="Light")}(function(){const n=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}}),window.toggleSection=function(e){const t=document.getElementById("section-"+e);if(t&&(t.classList.toggle("expanded"),t.classList.contains("nav-section"))){const n=getExpandedSections();t.classList.contains("expanded")?n.add(e):n.delete(e),localStorage.setItem("expandedSections",JSON.stringify([...n]))}};function getExpandedSections(){const e=localStorage.getItem("expandedSections");return new Set(e?JSON.parse(e):[])}function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;if(n===e){t.classList.add("active");const n=t.closest(".nav-subsection");n&&!n.classList.contains("expanded")&&n.classList.add("expanded");const e=t.closest(".nav-section");if(e&&!e.classList.contains("expanded")){e.classList.add("expanded");const n=e.id.replace("section-",""),t=getExpandedSections();t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t]))}}})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage();const t=document.querySelector(".nav-link.active");if(t){const e=t.closest(".nav-section");if(e&&e.id){const n=e.id.replace("section-",""),t=getExpandedSections();t.has(n)||(t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t])))}}}()</script></body></html>