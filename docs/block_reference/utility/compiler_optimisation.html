<!DOCTYPE html>
<html>
<head>
    <title>MCHP_CompilerOptimisation - MCHP Blockset</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../assets/css/navigation.css">
    <script src="../../assets/js/navigation.js"></script>
</head>
<body>
    <!-- Mobile Navigation Toggle -->
    <button class="nav-toggle" aria-label="Toggle navigation">☰</button>

    <!-- Left Navigation Panel -->
    <nav class="doc-nav-container">
        <div class="doc-nav-header">
            <a href="../../index.html">MCHP Blockset Docs</a>
        </div>
        <ul class="doc-nav-menu">
            <li class="nav-item">
                <a href="../../index.html" class="nav-link">Home</a>
            </li>

            <!-- Getting Started Section -->
            <li class="nav-item">
                <div class="nav-category">Getting Started <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../getting_started/overview.html" class="nav-link">Overview</a></li>
                    <li><a href="../../getting_started/installation.html" class="nav-link">Installation</a></li>
                    <li><a href="../../getting_started/quick_start.html" class="nav-link">Quick Start</a></li>
                    <li><a href="../../getting_started/board_templates.html" class="nav-link">Board Templates</a></li>
                    <li><a href="../../getting_started/supported_devices.html" class="nav-link">Supported Devices</a></li>
                </ul>
            </li>

            <!-- User Guide Section -->
            <li class="nav-item">
                <div class="nav-category">User Guide <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../user_guide/index.html" class="nav-link">User Guide Overview</a></li>
                    <li><a href="../../user_guide/code_generation.html" class="nav-link">Code Generation</a></li>
                    <li><a href="../../user_guide/external_mode.html" class="nav-link">External Mode</a></li>
                </ul>
            </li>

            <!-- Block Reference Section -->
            <li class="nav-item">
                <div class="nav-category">Block Reference <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../block_reference/index.html" class="nav-link">Block Reference Overview</a></li>
                </ul>
            </li>

            <!-- Examples Section -->
            <li class="nav-item">
                <div class="nav-category">Examples <span class="nav-category-icon">▼</span></div>
                <ul class="nav-list">
                    <li><a href="../../examples/field_weakening.html" class="nav-link">Field Weakening</a></li>
                </ul>
            </li>

            <!-- Release Notes -->
            <li class="nav-item">
                <a href="../../release_notes.html" class="nav-link">Release Notes</a>
            </li>
        </ul>
    </nav>

    <div class="doc-content-wrapper">
<div class="breadcrumb"><a href="../index.html">Block Reference</a> &gt; <a href="./utility.html">Utility Blocks</a> &gt; MCHP_CompilerOptimisation</div>
<h1>MCHP_CompilerOptimisation - Compiler and Build Configuration</h1>

    <!-- Block Icon -->
    <div class="block-image">
        <img src="../assets/images/blocks/utility/CompilerOptimisation.svg"
             alt="CompilerOptimisation Block Icon"
             onerror="this.onerror=null; this.src='../assets/images/blocks/utility/CompilerOptimisation.png';">
        <div class="block-image-caption">
            CompilerOptimisation Block Icon
        </div>
    </div>
<h2>Description</h2><p>The <strong>MCHP_CompilerOptimisation</strong> block configures compiler toolchain, optimization levels, Device Family Pack (DFP) selection, and linker options for controlling code size, execution speed, and build behavior.</p>
<h2>Compiler Selection</h2>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Options</th></tr></thead><tbody>
<tr><td><strong>COMP_LIST</strong></td><td>Installed compiler version selection (auto-detected)</td><td>XC16 v1.xx-v2.xx<br>XC32 v2.xx-v4.xx<br>XC-DSC v3.xx</td></tr>
<tr><td><strong>LATEST_CMPLR</strong></td><td>Always use latest installed compiler</td><td>on / off</td></tr>
<tr><td><strong>DFP_LIST</strong></td><td>Device Family Pack version</td><td>from compiler<br>v1.xx.xx<br>Update DFP list</td></tr>
<tr><td><strong>CMSIS_DSP</strong> (ARM)</td><td>CMSIS DSP library for ARM</td><td>Not used<br>v5.x.x</td></tr>
</tbody></table>
<h2>Optimization Levels</h2>
<table><thead><tr><th>Level</th><th>Speed</th><th>Code Size</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>-O0</strong></td><td>Slowest</td><td>Largest</td><td>Debug - no optimization</td></tr>
<tr><td><strong>-O1</strong></td><td>Moderate</td><td>Reduced</td><td>Basic optimization</td></tr>
<tr><td><strong>-O2</strong></td><td>Fast</td><td>Smaller</td><td>Production (recommended)</td></tr>
<tr><td><strong>-O3</strong></td><td>Fastest</td><td>May increase</td><td>Maximum speed</td></tr>
<tr><td><strong>-Os</strong></td><td>Varies</td><td>Smallest</td><td>Size-constrained</td></tr>
</tbody></table>
<h2>dsPIC Options (16-bit)</h2>
<table><thead><tr><th>Option</th><th>Description</th><th>Impact</th></tr></thead><tbody>
<tr><td><strong>USE_64BIT_DOUBLE</strong></td><td>64-bit doubles vs 32-bit</td><td>2× memory, higher precision</td></tr>
<tr><td><strong>PROCEDURAL_ABSTRACTION</strong></td><td>Extract common code (-mpa)</td><td>5-15% size reduction</td></tr>
<tr><td><strong>MCODE</strong></td><td>Code memory model</td><td>small (<32KB) / large (>32KB)</td></tr>
<tr><td><strong>MDATA</strong></td><td>Data memory model</td><td>small (near) / large (far)</td></tr>
<tr><td><strong>MLARGEARRAY</strong></td><td>Arrays >32KB</td><td>32-bit indexing required</td></tr>
<tr><td><strong>GC_SECTIONS</strong></td><td>Remove unused code/data</td><td>10-30% size reduction</td></tr>
</tbody></table>
<h2>ARM/PIC32 Options (32-bit)</h2>
<table><thead><tr><th>Option</th><th>Description</th><th>Impact</th></tr></thead><tbody>
<tr><td><strong>OPTIMIZATION_FLTO</strong></td><td>Link-Time Optimization</td><td>5-20% improvement, slow build</td></tr>
<tr><td><strong>OPTIMIZATION_REORDER</strong></td><td>Reorder for cache locality</td><td>Speed improvement</td></tr>
<tr><td><strong>CONSERVE_STACK</strong></td><td>Minimize stack usage</td><td>Reduced stack requirements</td></tr>
</tbody></table>
<h2>Debug Options</h2>
<table><thead><tr><th>Option</th><th>Description</th><th>Output</th></tr></thead><tbody>
<tr><td><strong>DEBUG_INFO</strong></td><td>Debug symbols in ELF</td><td>Required for debugging</td></tr>
<tr><td><strong>AssemblyListing</strong></td><td>.lst file generation</td><td>Assembly/source mix</td></tr>
<tr><td><strong>ProduceHexOutput</strong></td><td>.hex file generation</td><td>Programming file</td></tr>
<tr><td><strong>MCHP_STACK_USAGE</strong></td><td>Stack usage report (MCHP)</td><td>.su files</td></tr>
<tr><td><strong>GCC_STACK_USAGE</strong></td><td>Stack usage report (GCC)</td><td>.su files</td></tr>
</tbody></table>
<h2>Linker Configuration</h2>
<table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>UseCustom_LinkerScript</strong></td><td>Use custom memory map</td></tr>
<tr><td><strong>LinkerScript</strong></td><td>Path to .gld/.ld file</td></tr>
<tr><td><strong>HEAP_SIZE</strong></td><td>Heap allocation (bytes)</td></tr>
<tr><td><strong>CUSTOM_OPTIM</strong></td><td>Additional compiler flags</td></tr>
<tr><td><strong>CUSTOM_OPTIM_LD</strong></td><td>Additional linker flags</td></tr>
</tbody></table>
<h2>Math Libraries (dsPIC)</h2>
<table><thead><tr><th>Library</th><th>Speed</th><th>Accuracy</th></tr></thead><tbody>
<tr><td><strong>Standard</strong></td><td>Moderate</td><td>Full precision</td></tr>
<tr><td><strong>Fast</strong></td><td>2-3× faster</td><td>Slightly reduced</td></tr>
<tr><td><strong>Relaxed</strong></td><td>Maximum speed</td><td>Trade precision</td></tr>
</tbody></table>
<h2>Example Configurations</h2>
<h3>Debug</h3>
<pre><code>OPTIMIZATION_LEVEL: -O0
DEBUG_INFO: on
GC_SECTIONS: None
→ Largest code, easiest debugging</code></pre>
<h3>Production (Speed)</h3>
<pre><code>OPTIMIZATION_LEVEL: -O2
PROCEDURAL_ABSTRACTION: on (dsPIC)
OPTIMIZATION_FLTO: on (ARM/PIC32)
GC_SECTIONS: Remove unused
→ Fast execution, moderate size</code></pre>
<h3>Size-Constrained</h3>
<pre><code>OPTIMIZATION_LEVEL: -Os
PROCEDURAL_ABSTRACTION: on
GC_SECTIONS: Remove unused
→ Minimum code size</code></pre>
<div class="warning"><strong>Notes:</strong> Optimization affects timing. FLTO increases build time 3-5×. DFP updates contain bug fixes.</div>
<h2>See Also</h2>
<ul><li><a href="../system/master.html">MCHP_Master</a> - Compiler auto-configuration</li>
<li><a href="port_info.html">MCHP_PortInfo</a> - Resource visualization</li></ul>
<footer><p>&copy; 2025 Microchip Technology Inc. MCHP Blockset Documentation.</p></footer>
    </div>
</body>
</html>
