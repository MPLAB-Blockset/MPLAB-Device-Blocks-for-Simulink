<!doctype html><html lang=en><head><title>IC - Input Capture Block - MPLAB Device Blocks for Simulink</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/input_capture/><link rel=icon type=image/x-icon href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/favicon.ico><style>:root{--bg-primary:#f5f7fa;--bg-secondary:#ffffff;--bg-tertiary:#e8ecf1;--text-primary:#1a1a1a;--text-secondary:#4a5568;--text-tertiary:#718096;--text-heading:#0f1419;--border-color:#d1d5db;--border-light:#e5e7eb;--border-medium:#cbd5e0;--accent-primary:#14508F;--accent-secondary:#0088CC;--accent-hover:#0A3A6B;--accent-light:#E6F2FF;--code-bg:#f3f4f6;--code-text:#9D174D;--pre-bg:linear-gradient(to bottom, #f9fafb 0%, #f3f4f6 100%);--pre-border:#d1d5db;--table-hover:#EBF5FF;--table-stripe:#f9fafb;--note-bg:linear-gradient(to right, #EBF5FF 0%, #F0F9FF 100%);--note-border:#0088CC;--note-text:#0369A1;--warning-bg:linear-gradient(to right, #FEF3C7 0%, #FFF9E6 100%);--warning-border:#D97706;--warning-text:#92400E;--shadow-sm:0 1px 3px rgba(0,0,0,0.06);--shadow-md:0 2px 6px rgba(0,0,0,0.08);--shadow-lg:0 4px 12px rgba(0,0,0,0.1)}[data-theme=dark]{--bg-primary:#0f1419;--bg-secondary:#1a1f29;--bg-tertiary:#242b38;--text-primary:#e8eaed;--text-secondary:#b4b9c5;--text-tertiary:#8b92a3;--text-heading:#f1f3f5;--border-color:#2d3748;--border-light:#374151;--border-medium:#4b5563;--accent-primary:#60A5FA;--accent-secondary:#38BDF8;--accent-hover:#93C5FD;--accent-light:#1e3a5f;--code-bg:#1e2530;--code-text:#F472B6;--pre-bg:linear-gradient(to bottom, #1a1f29 0%, #1e2530 100%);--pre-border:#374151;--table-hover:#1e3a5f;--table-stripe:#1a1f29;--note-bg:linear-gradient(to right, #1e3a5f 0%, #1e3a5f 100%);--note-border:#60A5FA;--note-text:#93C5FD;--warning-bg:linear-gradient(to right, #422006 0%, #422006 100%);--warning-border:#FBBF24;--warning-text:#FCD34D;--shadow-sm:0 1px 3px rgba(0,0,0,0.4);--shadow-md:0 2px 6px rgba(0,0,0,0.5);--shadow-lg:0 4px 12px rgba(0,0,0,0.6)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}html{background-color:var(--bg-primary);color:var(--text-primary)}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff!important;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-title a{color:#fff!important;text-decoration:none}.sidebar-title a:hover{color:rgba(255,255,255,.9)!important;text-decoration:none}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:4px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:6px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:5px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-title-wrapper{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.page-title-tags{display:flex;flex-wrap:wrap;gap:5px;align-items:center}.page-title-tags .family-tag{display:inline-block;padding:2px 7px;font-size:10px;font-weight:600;background-color:#2196f3;color:#fff;border-radius:3px;white-space:nowrap}.page-title-tags .family-detail{font-weight:400;opacity:.9;font-size:9px;margin-left:2px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:40px;max-width:200px;object-fit:contain}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-primary);margin-bottom:8px;padding:6px 10px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px;font-weight:500}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover);text-decoration:underline}.breadcrumbs span{margin:0 8px;color:var(--text-secondary);font-weight:400}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:initial;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.matlab-cmd{color:#c7254e;font-family:Consolas,Monaco,courier new,monospace;background-color:#f4f4f4;padding:3px 6px;border-radius:3px;font-size:14px;text-decoration:none}a.matlab-cmd:hover{text-decoration:underline;cursor:pointer}code.matlab-cmd{cursor:default}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}li mjx-container[display=true]{text-align:left!important;margin:8px 0!important}li p mjx-container[display=true]{text-align:left!important;margin:8px 0!important}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:flex;align-items:center;gap:15px;margin:20px auto;padding:15px;max-width:900px;background-color:#f8f9fa;border-radius:8px;border:1px solid #dee2e6;transition:all .2s ease-in-out}.block-card-link{display:flex;align-items:center;gap:15px;flex:1;text-decoration:none;color:inherit}.block-icon-container:has(.block-card-link):hover{background-color:#e9ecef;border-color:#0076a8;box-shadow:0 2px 8px rgba(0,118,168,.15);cursor:pointer}.block-icon-image{flex-shrink:0;width:150px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.block-icon-image picture{width:100%;max-width:150px;display:flex;align-items:center;justify-content:center}.block-icon-image img,.block-icon-image source{max-width:100%;max-height:100%;width:auto;height:auto;display:block;object-fit:contain}.block-icon-description{flex:1;font-size:16px;line-height:1.6;color:#333;column-count:1;max-width:100%}.family-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px;justify-content:center;width:100%}.family-tag{display:inline-block;padding:3px 8px;font-size:11px;font-weight:600;background-color:#2196f3;color:#fff;border-radius:4px;white-space:nowrap}.family-detail{font-weight:400;opacity:.9;font-size:10px;margin-left:3px}.chip-family-badges{display:flex;flex-direction:column;gap:6px;padding:12px;background-color:#e3f2fd;border:2px solid #2196f3;border-radius:6px;min-width:140px;flex-shrink:0}.chip-family-badges::before{content:"Device Support";font-size:11px;font-weight:700;color:#1565c0;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;text-align:center}.chip-badge{display:block;padding:6px 10px;font-size:12px;font-weight:600;border-radius:4px;white-space:nowrap;text-align:center;transition:all .15s ease-in-out}.chip-badge:hover{transform:scale(1.05);box-shadow:0 2px 4px rgba(0,0,0,.2)}.chip-badge.dspic30f{background-color:#e3f2fd;color:#1565c0;border:1px solid #90caf9}.chip-badge.dspic33f{background-color:#e8f5e9;color:#2e7d32;border:1px solid #81c784}.chip-badge.dspic33e{background-color:#fff3e0;color:#e65100;border:1px solid #ffb74d}.chip-badge.dspic33c{background-color:#f3e5f5;color:#6a1b9a;border:1px solid #ba68c8}.chip-badge.dspic33a{background-color:#fce4ec;color:#c2185b;border:1px solid #f06292}.chip-badge.pic32{background-color:#e0f7fa;color:#00695c;border:1px solid #4db6ac}.chip-badge.sam{background-color:#fff9c4;color:#f57f17;border:1px solid #fdd835}.chip-badge.all-families{background-color:#e0e0e0;color:#424242;border:1px solid #9e9e9e;font-weight:700}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"IC - Input Capture Block","description":"MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block\/capture_compare\/input_capture\/","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-16","dateModified":"2025-11-30","inLanguage":"en-US"}</script><script>(function(){const e=localStorage.getItem("theme"),t=["light","dark"],n=e&&t.includes(e)?e:null,s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,o=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",o)})()</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><div class=sidebar-title><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/>MPLAB Device Blocks for Simulink</a></div></div><div class=sidebar-nav><div class=nav-section><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/ class=nav-section-title><span><span class=icon>üè†</span>
<span class=nav-text>Home</span></span></a></div><div class=nav-section id=section-/getting_started/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/ class=nav-section-title onclick='toggleSection(event,"/getting_started/")'><span><span class=icon>üöÄ</span>
<span class=nav-text>Getting Started</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/installation/ class=nav-link>MPLAB Blockset Installation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/quick_start/ class=nav-link>Quick Start Guide
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/overview/ class=nav-link>MCHP Blockset Overview
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/board_templates/ class=nav-link>Board Templates
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/motor_control_examples/ class=nav-link>Motor Control Examples
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/scheduler_multitasking/ class=nav-link>Scheduler & Multitasking
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/external_mode_pil/ class=nav-link>External Mode & PIL Testing
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/data_visualization/ class=nav-link>Data Visualization with PIC GUI
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/supported_devices/ class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-/videos/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/videos/ class=nav-section-title><span><span class=icon></span>
<span class=nav-text>Video Tutorials</span></span></a></div><div class=nav-section id=section-/user_guide/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/ class=nav-section-title onclick='toggleSection(event,"/user_guide/")'><span><span class=icon>üìö</span>
<span class=nav-text>User Guide</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/code_generation/ class=nav-link>Code Generation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/compiler_setup/ class=nav-link>Compiler Setup
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/external_mode/ class=nav-link>External Mode
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/pil_testing/ class=nav-link>PIL Testing</a></div></div><div class=nav-section id=section-/block/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/ class=nav-section-title onclick='toggleSection(event,"/block/")'><span><span class=icon>üß©</span>
<span class=nav-text>Block Reference</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><div class=nav-section id=section-/block/pwm_io/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/ class=nav-section-title onclick='toggleSection(event,"/block/pwm_io/")'><span><span class=icon>‚ö°</span>
<span class=nav-text>PWM</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/mcpwm/ class=nav-link>MCPWM
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm/ class=nav-link>PWM
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_highspeed/ class=nav-link>PWM HighSpeed
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_highspeed_override/ class=nav-link>PWM HighSpeed Override
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_hs_fep/ class=nav-link>PWM HS FEP
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_sam7x/ class=nav-link>PWM SAM7x
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_sam7x_override/ class=nav-link>PWM SAM7x Override
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/tcc_pwm/ class=nav-link>TCC PWM</a></div></div><div class=nav-section id=section-/block/adc/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/ class=nav-section-title onclick='toggleSection(event,"/block/adc/")'><span><span class=icon>üìä</span>
<span class=nav-text>ADC</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc/ class=nav-link>ADC - Standard ADC Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_highspeed_sar/ class=nav-link>ADC HighSpeed SAR - High-Speed SAR ADC Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_highspeed_sar_dspic/ class=nav-link>ADC HighSpeed SAR dsPIC - High-Speed SAR ADC for dsPIC33C
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_hs_12b/ class=nav-link>ADC HS 12b - 12-bit High-Speed ADC for dsPIC33A
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_same5x/ class=nav-link>ADC SAME5x - ADC for SAM E5x/D5x/C2x Families
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_samrh707x/ class=nav-link>ADC SAMRH707x - ADC for SAM RH707x Radiation-Hardened MCU
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/afec_sam7x/ class=nav-link>AFEC SAM7x - Analog Front-End Controller for SAM 7x</a></div></div><div class=nav-section id=section-/block/communication/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/ class=nav-section-title onclick='toggleSection(event,"/block/communication/")'><span><span class=icon>üì°</span>
<span class=nav-text>Communication</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><div class=nav-section id=section-/block/communication/uart/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/ class=nav-section-title onclick='toggleSection(event,"/block/communication/uart/")'><span><span class=icon>üì°</span>
<span class=nav-text>UART</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_break_and_autobaud/ class=nav-link>UART Break/Autobaud
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_config/ class=nav-link>UART Config Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_rx/ class=nav-link>UART Rx Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_tx/ class=nav-link>UART Tx Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_txmatlab/ class=nav-link>UART TxMatlab Block</a></div></div><div class=nav-section id=section-/block/communication/can/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/ class=nav-section-title onclick='toggleSection(event,"/block/communication/can/")'><span><span class=icon>üöå</span>
<span class=nav-text>CAN</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/can_config/ class=nav-link>CAN Config
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/can_rx/ class=nav-link>CAN Rx
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/can_tx/ class=nav-link>CAN Tx</a></div></div><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/i2c/ class=nav-link>I2C Master - Communication Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/spi/ class=nav-link>SPI Master/Slave - Communication Block</a></div></div><div class=nav-section id=section-/block/timers/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/timers/ class=nav-section-title onclick='toggleSection(event,"/block/timers/")'><span><span class=icon>‚è±Ô∏è</span>
<span class=nav-text>Timers</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/timers/timer_config/ class=nav-link>TIMER Config - Timer Configuration Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/timers/timer_pil_profiling/ class=nav-link>TIMER PIL Profiling - PIL Timing Profiler</a></div></div><div class=nav-section id=section-/block/capture_compare/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/ class=nav-section-title onclick='toggleSection(event,"/block/capture_compare/")'><span><span class=icon>üìè</span>
<span class=nav-text>Input Capture / Output Compare</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/input_capture/ class="nav-link active">IC - Input Capture Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/output_compare_hw/ class=nav-link>OC HW - Output Compare (Hardware)
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/output_compare_sw/ class=nav-link>OC SW - Software Output Compare</a></div></div><div class=nav-section id=section-/block/digital_io/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/ class=nav-section-title onclick='toggleSection(event,"/block/digital_io/")'><span><span class=icon>üîå</span>
<span class=nav-text>Digital I/O</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_input/ class=nav-link>Digital Input
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_output/ class=nav-link>Digital Output
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_output_read/ class=nav-link>Digital Output Read
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_output_write/ class=nav-link>Digital Output Write</a></div></div><div class=nav-section id=section-/block/encoders/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/ class=nav-section-title onclick='toggleSection(event,"/block/encoders/")'><span><span class=icon>üîÑ</span>
<span class=nav-text>Encoders</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/change_notification/ class=nav-link>CN - Change Notification (Pin Interrupt)
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/pdec/ class=nav-link>PDEC - Position Decoder for SAM Devices
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/qdec_samx/ class=nav-link>QDEC SAMx - Quadrature Decoder for SAM Devices
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/qei/ class=nav-link>QEI - Quadrature Encoder Interface</a></div></div><div class=nav-section id=section-/block/analog_io/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/ class=nav-section-title onclick='toggleSection(event,"/block/analog_io/")'><span><span class=icon>üìâ</span>
<span class=nav-text>Analog I/O</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><div class=nav-section id=section-/block/analog_io/comparator_opamps_volt_ref/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/ class=nav-section-title onclick='toggleSection(event,"/block/analog_io/comparator_opamps_volt_ref/")'><span><span class=icon></span>
<span class=nav-text>Comparator, OpAmp & Voltage Reference</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator/ class=nav-link>MCHP High-Speed Analog Comparator Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope/ class=nav-link>MCHP High-Speed Analog Comparator with Slope Compensation Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/op_amp/ class=nav-link>MCHP Op-Amp Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/pga/ class=nav-link>MCHP PGA Documentation</a></div></div><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/dac_samx/ class=nav-link>MCHP DAC SAMx Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/acc_samx/ class=nav-link>Analog Comparator Controller (ACC) SAMx</a></div></div><div class=nav-section id=section-/block/system_configuration/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/ class=nav-section-title onclick='toggleSection(event,"/block/system_configuration/")'><span><span class=icon>‚öôÔ∏è</span>
<span class=nav-text>System Configuration</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/compiler_options/ class=nav-link>CompilerOptimisation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/idle_task/ class=nav-link>IdleTask
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/interrupt/ class=nav-link>Interrupt
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/master/ class=nav-link>Master
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/mcu_load/ class=nav-link>MCU LOAD
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/mcu_overload/ class=nav-link>MCU OVERLOAD
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/scheduler_options/ class=nav-link>Scheduler Options
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/secondary_core/ class=nav-link>SECONDARY CORE
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/tasks_state/ class=nav-link>Tasks State</a></div></div><div class=nav-section id=section-/block/utility/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/ class=nav-section-title onclick='toggleSection(event,"/block/utility/")'><span><span class=icon>üîß</span>
<span class=nav-text>Utility</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/doc/ class=nav-link>Doc
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/msi/ class=nav-link>MSI
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/port_info/ class=nav-link>PortInfo
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/simulink_reset_config/ class=nav-link>Simulink Reset Config
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/timer_info/ class=nav-link>TimerInfo
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/utility/ class=nav-link>Utility Blocks</a></div></div><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc_blocks/ class=nav-link>ADC Blocks - Analog-to-Digital Converter Reference
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog/ class=nav-link>Analog Signal Conditioning Blocks Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/user_functions/c_function_call/ class=nav-link>C Function Call
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/can/ class=nav-link>CAN Communication Blocks
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_blocks/ class=nav-link>PWM Blocks - Block Reference
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system/system/ class=nav-link>System Blocks</a></div></div><div class=nav-section id=section-/examples/><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/examples/ class=nav-section-title onclick='toggleSection(event,"/examples/")'><span><span class=icon>üìñ</span>
<span class=nav-text>Examples</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/examples/field_weakening/ class=nav-link>Field-weakening</a></div></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/>Home</a>
<span>></span>
<a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/>MPLAB Device Blocks for Simulink</a>
<span>></span>
<a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/>Block Reference</a>
<span>></span>
<a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/>Input Capture / Output Compare</a>
<span>></span>
<span>IC - Input Capture Block</span></div><div class=page-header><div class=page-title-wrapper><h1>IC - Input Capture Block</h1><div class=page-title-tags><span class=family-tag>dsPIC33F</span>
<span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span>
<span class=family-tag>dsPIC33A</span>
<span class=family-tag>PIC32</span></div></div><div class=page-header-right><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/microchip-logo.png alt="Microchip Logo" class=microchip-logo width=800 height=709>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>‚òÄÔ∏è</span>
<span id=theme-text>Light</span></button></div></div><div class=block-icon-container><div class=block-icon-image><picture><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/block_InputCapture.svg type=image/svg+xml><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/block_InputCapture.png alt="Input Capture Block Icon"></picture></div><div class=block-icon-description>The <strong>MCHP_IC</strong> block captures hardware timer values when external events occur on input pins. It enables precise measurement of pulse widths, periods, frequencies, and event timestamps using dedicated Input Capture peripheral modules. Each IC channel can detect rising edges, falling edges, or both, and automatically capture the associated timer value. This is ideal for encoder interfaces, frequency measurement, and event timing applications.</div></div><h2 id=block-inputsoutputs>Block Inputs/Outputs</h2><p><strong>Inputs:</strong> None (captures from hardware pins)</p><p><strong>Outputs:</strong> Dynamic based on configuration</p><table><thead><tr><th>Output Port</th><th>Condition</th><th>Description</th></tr></thead><tbody><tr><td><code>IC1_Up</code>, <code>IC1_Down</code></td><td>Mode 3</td><td>Pulse width measurements (rising and falling edge times)</td></tr><tr><td><code>IC1_Up</code>, <code>IC1_Period</code></td><td>Mode 5</td><td>High pulse width and signal period</td></tr><tr><td><code>IC1_Down</code>, <code>IC1_Period</code></td><td>Mode 10</td><td>Low pulse width and signal period</td></tr></tbody></table><h2 id=block-output-datatype>Block Output Datatype</h2><p>The block supports 1 output datatype representation:</p><table><thead><tr><th>Output Type</th><th>Range</th><th>Description</th></tr></thead><tbody><tr><td><strong>uint16</strong></td><td>0 to <code>ICxmax</code></td><td>Raw timer counts at capture event</td></tr></tbody></table><h3 id=uint-raw-output-1-option>Uint Raw Output (1 option)</h3><p>Integer values transferred directly from ICxBUF capture registers‚Äîno runtime computation. Users handle conversion to physical time units.</p><h3 id=workspace-variables>Workspace Variables</h3><p>The block creates workspace variables for scaling calculations:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>IC1max</code>, <code>IC2max</code>, &mldr;</td><td>Maximum timer count per IC channel (based on associated timer)</td></tr><tr><td><code>ICxmax</code></td><td>Vector of all channel max values (e.g., <code>[65535 65535]</code>)</td></tr></tbody></table><h3 id=scaling-formula>Scaling Formula</h3><p><strong>Scaling formula:</strong> <code>Time_seconds = Timer_Ticks √ó (Max_Period_s / ICxmax)</code></p><p>Where <code>Max_Period_s</code> is the configured timer period in seconds.</p><p><strong>Example:</strong> With IC1max = 65535 and timer max period = 0.25s:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span>Time_Resolution <span style=color:#1f2328>=</span> <span style=color:#0550ae>0.25</span> <span style=color:#0550ae>/</span> <span style=color:#0550ae>65535</span><span style=color:#1f2328>;</span>  <span style=color:#57606a>% ‚âà 3.8 ¬µs per tick</span>
</span></span><span style=display:flex><span>Pulse_Width_s <span style=color:#1f2328>=</span> IC1_Up √ó Time_Resolution<span style=color:#1f2328>;</span>
</span></span></code></pre></div><p>Raw counts preserve full resolution‚Äîusers apply application-specific scaling (frequency, RPM, duty cycle) in their model.</p><p><strong>Hardware Considerations:</strong>
PIC32 devices have hardware FPU‚Äîfloat scaling is efficient. dsPIC30F/33F/33E/33C lack FPU‚Äîuse fixed-point arithmetic in time-critical loops. dsPIC33A has hardware FPU.</p><h2 id=block-parameters>Block Parameters</h2><h3 id=channel-selection>Channel Selection</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>Channel</td><td>IC channel numbers to use</td><td>[1 2 3] for IC1, IC2, IC3</td></tr></tbody></table><h3 id=capture-mode>Capture Mode</h3><table><thead><tr><th>Mode Value</th><th>Description</th><th>Captures</th></tr></thead><tbody><tr><td>1 (0x001)</td><td>Edge detect, every edge</td><td>Every rising or falling edge</td></tr><tr><td>2 (0x002)</td><td>Edge detect, every 4th edge</td><td>Every 4th rising or falling edge</td></tr><tr><td>3 (0x003)</td><td>Edge detect, every 16th edge</td><td>Every 16th rising or falling edge</td></tr><tr><td>4 (0x004)</td><td>Capture rising edge only</td><td>Timer value on rising edge</td></tr><tr><td>5 (0x005)</td><td>Capture falling edge only</td><td>Timer value on falling edge</td></tr><tr><td>6 (0x006)</td><td>Capture every 4th rising edge</td><td>Every 4th rising edge</td></tr><tr><td>7 (0x007)</td><td>Capture every 16th rising edge</td><td>Every 16th rising edge</td></tr></tbody></table><h3 id=measurement-configuration>Measurement Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th><th>Options</th></tr></thead><tbody><tr><td>Channel_UP_Down_Periode</td><td>Measurement type per channel</td><td>3: Pulse width (up & down), 5: Pulse up + period, 10: Pulse down + period</td></tr><tr><td>ChangeDetect</td><td>Output only when value changes</td><td>ON/OFF per channel</td></tr><tr><td>Timer_Ref</td><td>Associated timer for each channel</td><td>Timer index or -2 for system timer</td></tr></tbody></table><h3 id=pin-mapping-for-remappable-devices>Pin Mapping (for remappable devices)</h3><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>PIN_IC1 &mldr; PIN_IC16</td><td>Remappable pin selection for each IC channel (dsPIC33E/C/A, PIC32)</td></tr></tbody></table><h2 id=device-support>Device Support</h2><table><thead><tr><th>Family</th><th>IC Channels</th><th>Edge Detection</th><th>Timer Association</th></tr></thead><tbody><tr><td>dsPIC33F/33E</td><td>IC1-IC8</td><td>Rising, Falling, Both</td><td>Timer2/Timer3</td></tr><tr><td>dsPIC33C/33A</td><td>IC1-IC16 (device dependent)</td><td>Rising, Falling, Both</td><td>Timer1-Timer5</td></tr><tr><td>PIC24F</td><td>IC1-IC9</td><td>Rising, Falling, Both</td><td>Timer2/Timer3</td></tr><tr><td>PIC32MK</td><td>IC1-IC9</td><td>Rising, Falling, Both</td><td>Timer2/Timer3</td></tr></tbody></table><h2 id=implementation-details>Implementation Details</h2><h3 id=register-configuration-dspic>Register Configuration (dsPIC)</h3><ul><li><p><strong>ICxCON1</strong> register:</p></li><li><p>ICSIDL = 0 (continue in idle mode)</p></li><li><p>ICTMR = timer selection (0=Timer3, 1=Timer2, others device-specific)</p></li><li><p>ICI = interrupt prescaler</p></li><li><p>ICM = capture mode (0x1-0x7)</p></li><li><p><strong>ICxBUF</strong> - Capture buffer (read-only, contains timer value)</p></li><li><p><strong>ICxCON2</strong> (33C/33A) - Additional control bits, trigger synchronization</p></li></ul><h3 id=interrupt-handling>Interrupt Handling</h3><p>IC interrupts trigger on each capture event:</p><ul><li>Edge detected on ICx pin</li><li>Timer value captured to ICxBUF</li><li>IC interrupt flag set (IFS)</li><li>ISR reads ICxBUF and processes measurement</li><li>Measurement output updated (pulse width, period, etc.)</li></ul><h3 id=timing-calculation>Timing Calculation</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#57606a>% Pulse width measurement (mode 3)</span>
</span></span><span style=display:flex><span>RisingEdge_Time <span style=color:#1f2328>=</span> IC_RisingCapture <span style=color:#0550ae>/</span> Timer_Frequency<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>FallingEdge_Time <span style=color:#1f2328>=</span> IC_FallingCapture <span style=color:#0550ae>/</span> Timer_Frequency<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>PulseWidth <span style=color:#1f2328>=</span> FallingEdge_Time <span style=color:#0550ae>-</span> RisingEdge_Time<span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>% Period measurement (mode 5)</span>
</span></span><span style=display:flex><span>Period <span style=color:#1f2328>=</span> <span style=color:#1f2328>(</span>IC_CurrentCapture <span style=color:#0550ae>-</span> IC_PreviousCapture<span style=color:#1f2328>)</span> <span style=color:#0550ae>/</span> Timer_Frequency<span style=color:#1f2328>;</span>
</span></span></code></pre></div><h2 id=usage-examples>Usage Examples</h2><h3 id=example-1-quadrature-encoder-interface>Example 1: Quadrature Encoder Interface</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#57606a>% Measure encoder pulses on IC1 and IC2</span>
</span></span><span style=display:flex><span>Channel<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>]</span>
</span></span><span style=display:flex><span>Capture Mode<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>4</span> <span style=color:#0550ae>4</span><span style=color:#1f2328>]</span>  <span style=color:#57606a>% Rising edge only on both</span>
</span></span><span style=display:flex><span>Channel_UP_Down_Periode<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>3</span> <span style=color:#0550ae>3</span><span style=color:#1f2328>]</span>  <span style=color:#57606a>% Pulse measurement</span>
</span></span><span style=display:flex><span>Timer_Ref<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>2</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>]</span>  <span style=color:#57606a>% Both use Timer2</span>
</span></span><span style=display:flex><span>Change Detect<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span>ON ON<span style=color:#1f2328>]</span>  <span style=color:#57606a>% Output only on changes</span>
</span></span></code></pre></div><p><strong>Result:</strong> Captures encoder A/B channel transitions for position/speed calculation.</p><h3 id=example-2-frequency-measurement>Example 2: Frequency Measurement</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#57606a>% Measure signal frequency on IC1</span>
</span></span><span style=display:flex><span>Channel<span style=color:#1f2328>:</span> <span style=color:#0550ae>1</span>
</span></span><span style=display:flex><span>Capture Mode<span style=color:#1f2328>:</span> <span style=color:#0550ae>4</span>  <span style=color:#57606a>% Rising edge</span>
</span></span><span style=display:flex><span>Channel_UP_Down_Periode<span style=color:#1f2328>:</span> <span style=color:#0550ae>5</span>  <span style=color:#57606a>% Pulse + period</span>
</span></span><span style=display:flex><span>Timer_Ref<span style=color:#1f2328>:</span> <span style=color:#0550ae>3</span>  <span style=color:#57606a>% Timer3 with maximum range</span>
</span></span></code></pre></div><p><strong>Result:</strong> Outputs pulse width and period. Frequency = 1 / (Period_ticks / Timer_Freq)</p><h3 id=example-3-pwm-duty-cycle-measurement>Example 3: PWM Duty Cycle Measurement</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#57606a>% Measure PWM duty cycle</span>
</span></span><span style=display:flex><span>Channel<span style=color:#1f2328>:</span> <span style=color:#0550ae>1</span>
</span></span><span style=display:flex><span>Capture Mode<span style=color:#1f2328>:</span> <span style=color:#0550ae>1</span>  <span style=color:#57606a>% Every edge (rising and falling)</span>
</span></span><span style=display:flex><span>Channel_UP_Down_Periode<span style=color:#1f2328>:</span> <span style=color:#0550ae>5</span>  <span style=color:#57606a>% Up time + period</span>
</span></span></code></pre></div><p><strong>Result:</strong> DutyCycle = (PulseWidth / Period) * 100%</p><h3 id=example-4-event-timestamping>Example 4: Event Timestamping</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#57606a>% Timestamp external events</span>
</span></span><span style=display:flex><span>Channel<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>3</span><span style=color:#1f2328>]</span>  <span style=color:#57606a>% Three event sources</span>
</span></span><span style=display:flex><span>Capture Mode<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>4</span> <span style=color:#0550ae>4</span> <span style=color:#0550ae>4</span><span style=color:#1f2328>]</span>  <span style=color:#57606a>% Rising edge trigger</span>
</span></span><span style=display:flex><span>Timer_Ref<span style=color:#1f2328>:</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>-</span><span style=color:#0550ae>2</span> <span style=color:#0550ae>-</span><span style=color:#0550ae>2</span> <span style=color:#0550ae>-</span><span style=color:#0550ae>2</span><span style=color:#1f2328>]</span>  <span style=color:#57606a>% Use high-resolution system timer</span>
</span></span></code></pre></div><p><strong>Result:</strong> Precise event timestamps for synchronization or logging.</p><h2 id=timing-considerations>Timing Considerations</h2><h3 id=timer-selection-guidelines>Timer Selection Guidelines</h3><ul><li><strong>High-frequency signals:</strong> Use Timer2/3 with 1:1 prescaler for best resolution</li><li><strong>Low-frequency signals:</strong> Use higher prescaler or 32-bit timer mode to avoid overflow</li><li><strong>Multiple channels:</strong> Share same timer when measuring related signals</li></ul><h3 id=maximum-measurable-period>Maximum Measurable Period</h3><table><thead><tr><th>Timer Config</th><th>Max Period @ 60MHz Fcy</th></tr></thead><tbody><tr><td>16-bit, 1:1 prescaler</td><td>1.09 ms</td></tr><tr><td>16-bit, 1:256 prescaler</td><td>280 ms</td></tr><tr><td>32-bit mode</td><td>71.6 seconds</td></tr></tbody></table><h3 id=interrupt-latency>Interrupt Latency</h3><ul><li>IC interrupt priority should be high for accurate measurements</li><li>Typical latency: 10-20 instruction cycles (dsPIC)</li><li>Use change detect to reduce output update rate if needed</li></ul><h2 id=troubleshooting>Troubleshooting</h2><h3 id=no-capture-events>No Capture Events</h3><p><strong>Check:</strong></p><ul><li>Input signal connected to correct IC pin</li><li>Pin configured as input (check PPS mapping)</li><li>Signal levels meet input threshold (typically 0.3VDD to 0.7VDD)</li><li>Capture mode matches signal characteristics</li></ul><h3 id=incorrect-measurements>Incorrect Measurements</h3><p><strong>Check:</strong></p><ul><li>Timer frequency configuration matches actual clock</li><li>Timer not shared with conflicting peripheral</li><li>ICxmax variable correctly scaled for unit conversion</li><li>Capture mode appropriate for signal type</li></ul><h3 id=overflow-issues>Overflow Issues</h3><p><strong>Solutions:</strong></p><ul><li>Increase timer prescaler for longer periods</li><li>Use 32-bit timer mode (if available)</li><li>Reduce edge prescaler (capture every edge instead of every 4th/16th)</li></ul><h2 id=related-blocks>Related Blocks</h2><ul><li>[MCHP_TIMER_Config] - Configure timer timebase for IC</li><li>[MCHP_OC_HW] - Output Compare for PWM generation</li><li>[MCHP_QEI] - Dedicated quadrature encoder interface</li><li>[MCHP_Digital_Input] - General digital input (no timing)</li></ul><h2 id=see-also>See Also</h2><ul><li><a href=../../examples/>Encoder Interface Examples</a></li><li><a href=../../examples/>Frequency Measurement Examples</a></li><li>Microchip Family Reference Manual: Input Capture module</li></ul><div class=nav-footer><p>Last updated: January 2026 | MPLAB Blockset Documentation v3.63.02</p><p>&copy; 2026 Microchip Technology Incorporated and its subsidiaries</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
‚ò∞</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="üåô",n.textContent="Dark"):(t.textContent="‚òÄÔ∏è",n.textContent="Light")}(function(){const t=localStorage.getItem("theme"),s=["light","dark"],o=t&&s.includes(t)?t:null,i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=o||(i?"dark":"light");document.documentElement.setAttribute("data-theme",n),updateThemeButton(n)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}});function getExpandedSections(){try{const e=sessionStorage.getItem("expandedSections");if(!e)return new Set;const t=JSON.parse(e);if(!Array.isArray(t))return new Set;const n=t.filter(e=>typeof e=="string"&&/^[a-zA-Z0-9/_-]+$/.test(e));return new Set(n)}catch{return console.warn("Invalid sessionStorage data, resetting expandedSections"),new Set}}function saveExpandedSections(e){sessionStorage.setItem("expandedSections",JSON.stringify([...e]))}function saveSidebarScroll(){const e=document.querySelector(".sidebar");e&&sessionStorage.setItem("sidebarScrollTop",e.scrollTop)}function restoreSidebarScroll(){const e=document.querySelector(".sidebar"),t=sessionStorage.getItem("sidebarScrollTop");if(e&&t){const n=parseInt(t,10);!isNaN(n)&&n>=0&&n<1e5&&(e.scrollTop=n)}}window.toggleSection=function(e,t){const n=document.getElementById("section-"+t);if(n){const e=getExpandedSections();n.classList.contains("expanded")?(n.classList.remove("expanded"),e.delete(t)):(n.classList.add("expanded"),e.add(t)),saveExpandedSections(e),saveSidebarScroll()}};function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;n===e&&t.classList.add("active")})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage(),restoreSidebarScroll();const t=document.querySelectorAll(".nav-link, .nav-section-title");t.forEach(e=>{e.addEventListener("click",function(){saveSidebarScroll()})})}()</script></body></html>